<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACwdJREFUeF7tnUGMHMUVQH/NYi6Ig2cJiziibVtKJHPLOQhkBAc44RwSO5Fiy7gXOUoEEZESEYtIiWKUKBZuY9mREjuREpwLHEBYIHLODUtEwm1xRFnC9h4QF4ynkl7v2rvO7kx3TXVP1a+316lf9f/7/6l3ekY9RviDAAR2JGBgAwEI7EwAQZgOCIwhgCCMBwQQhBmAgBsBriBu3IhKhMBUgtx79pP7dt344hER+00rZsGILFiRuxNhR5kBEjAiX1qRZSN2WcT88/rcPe9/fvTBz1xTdRJk/tWPHpXB4LgVecr1YOIg0BcBI/KmjEanVp7b+17bM1sLMizKcyJyuO1BrIdAAATOV3l2pE0erQQZFlc/EDH72hzAWgiERcBeqfI9DzfNqbEgw6K0TTdlHQRCJ1DlWaPZb7RoWJRvicgToRdNfhBoQeDtKs+enLR+oiC855iEkNcjJjDxPclYQeq7VXYweDdiAKQOgbEEzGj02Li7W+MFKco3uJXLhGkmUN8CXsmzp3eqcUdB7j/38cJX12/8WzMcaoNATeCuXXMPfHrkoeXtaOwoyPyZ8qC1cgGEENBOwBg5tHIsu9hKkGFx9aSIeV47HOqDgIh9pcr3vNBKkN1FecGIHAQfBLQTsCIXV/PsUCtBhkX5jojs1w6H+iAgIperPHu8lSC7i/J9I/It8EFAOwEr8o/VPHsEQbR3mvqcCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGAIKl0mjqdCCCIEzaCUiGQiiAfrjf0G1E11o5OiBm8FFXOypJNQZAPZSAH1vo2ktdFJA5J7OhEtbT3F8Pi2ssi9mfK5i6acrQLsiZH9Wz2r7ojw9fKr0chybocG1O0+3T5K2PkxWimSlGimgXZIsdGz4KX5A45buVdXPuNiN32AWaK5jG4UrQKsq0cwUuygxy38j5d/laM/Ci4KVKckEZBxsoRrCQT5LgtybXfi7HHFc9kUKVpE6SRHMFJ0lCOTe9JThsjeVCTpDQZTYK0kiMYSVrKcSvvM9deE2uPKp3LYMrSIoiTHDOXxFGO22/cy/Mi8oNgpklhIhoEmUqOmUkypRyb7m79UcR+T+FsBlFS7IJ4kaN3STzJsZH3/Jnyz9bKd4KYKGVJxCyIVzl6k8SzHJv+3fqriHxb2XzOvBwE2aYFnX2Y2JEcdQnDoqy/RvPMzCdKWQIxC1K3opOryNrA+f5aCnJEqU7sgsQhCXJEKUedtAZBwpYEOaKVQ5MgYUqCHFHLoU2QsCRBjujl0ChIGJIghwo5tAoyW0mQQ40cmgWZjSTIoUoO7YL0KwlyqJMjBUH6kcSO/l4/YKGLCeET8i6oNt9Ty+cgkyru9BP3jYdCTEqi7evI0ZaY//WpCNLplcR/W/huVRdMXfZMSZBoJOHK4TLK3cSkJkjwkiBHN4PuumuKggQrCXK4jnF3cakKEpwkyNHdkE+zc8qCBCMJckwzwt3Gpi7IzCVBjm4HfNrdEeQmwc4+JxnXIOSYdny7j0eQ24x7lQQ5uh9uHycgyFaKvUiCHD5Gt589EOT/OXcqCXL0M9i+TkGQO0l2+K3c+qhhUdaP5qkf0cNfBAQQZHOTOpZj4ygkicCM9RQRZKNXPcmBJPHIUWeKIGsUbv5gZt+t40rSN/H25yHIjOTgStJ+WGcRkbYgM5YDSWYx8u3OTFeQQORAknYD2/fqNAUJTA4k6Xvsm5+XniCByoEkzYe2z5VpCRK4HEjS5+g3OysdQSKRA0maDW5fq9IQpEM51r9bdanKs0u+m8bnJL6Jtt9PvyDdy7Hxs2cHkKT9AIYeoVuQ/uTY6DOShD7xLfPTK0j/ciBJy+GLYblOQWYnB5LEMPUtctQnyOzlQJIWAxj6Ul2ChCMHkoQ++Q3z0yNIeHIgScMhDHmZDkHClQNJQp7+BrnFL0j4ciBJg0EMdUncgsQjB5KEasCEvOIVJD45kCRCSeIVZA22+WWVL/7cJ/eenlvl9RN3vrPlcwK27hW5ICLWyq9Xl7Kf+kDUkxxeryTI4aPzO+8RvSA3SzMnq3zxJ9Og6lkOL5IgxzQdbxarRJC1Bxj9rlrKftys7K2rZiTHVJIgh0un28foEaSu3ZpT1dLiD9tgmLEcTpIgR5sOT7dWlyC1I1aK1aVsqQmWQORoJQlyNOmsvzXqBLn5lsScrY4tPjsOU2ByNJIEOfwNftOddApys/o/VHl2eDsQgcoxVhLkaDrSftdpFqS+lPypyhe/vxlZ4HJsKwly+B36NrspF6T+b0v+snIs+24NJRI5tkiCHG3G2f9a9YKsI/ubiAz+92OdGw9Y8E+ymx0P8GM73YBtumsqgjTlwToIbCGAIAwEBMYQQBDGAwIIwgxAwI0AVxA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBEmk0ZboRQBA3bkQlQgBBYmq0HZ2IKd1OczWDlzrdf31zBOmDsqczqjwznraKfpthUdo+ikCQPih7OgNBboNEEE9DpWkbBEEQTfPsvRYEQRDvQ6VpQwRBEE3z7L0WBEEQ70OlaUMEQRBN8+y9FgRBEO9DpWlDBEEQTfPsvRYEQRDvQ6VpQwRBEE3z7L0WBEEQ70OlaUMEQRBN80wtCgjwZUUFTaSE7gggSHds2VkBAQRR0ERK6I4AgnTHlp0VEEAQBU2khO4IIEh3bNlZAQEEUdBESuiOAIJ0x5adFRBAEAVNpITuCCBId2zZWQEBBFHQRErojgCCdMeWnRUQcBJkWJTviMh+BfVTAgQmEbhc5dnj2y3a8TGXu4vyghE5OGlnXodA7ASsyMXVPDvUSpBhcfWkiHk+9uLJHwKTCdhXqnzPCy0FKZ8Rkdcnb84KCERP4ECVZ5daCXLv2U/u23Xji/9EXzoFQGACgetz93zt86MPftZKkHrxfFG+YUWegjAEtBIwIm+u5NnTO9U39rco5l/96FE7GLyrFQ51QcCMRo+tPLf3PSdB6qBhUZ4TkcOghIBCAuerPDsyrq5Gv2Y0LK5+IGL2KQRESckSsFeqfM/Dk8pvJMj6laSXn8OalDCvQ8AHgaaPV2osyLokb4nIEz4SZA8IzIjA21WePdn07FaC8J6kKVbWBUpg4nuOO/NuLUi9QX13SwaD49wCDnQMSGsLgfpWroxGp8bdrXK+izWO9f3nPl648dWN/dbafVbMghFZsCJ30x8IzIqAEfnSiiwbscvGmCtzd81d/vTIQ8uu+ThdQVwPIw4CsRFAkNg6Rr69EkCQXnFzWGwEECS2jpFvrwQQpFfcHBYbAQSJrWPk2yuB/wJ9Yosyc9URRgAAAABJRU5ErkJggg==">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Managi</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))h(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&h(b)}).observe(document,{childList:!0,subtree:!0});function i(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(d){if(d.ep)return;d.ep=!0;const m=i(d);fetch(d.href,m)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Qi(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const be={},Vt=[],at=()=>{},pa=()=>!1,ti=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),er=e=>e.startsWith("onUpdate:"),Re=Object.assign,tr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},va=Object.prototype.hasOwnProperty,Se=(e,t)=>va.call(e,t),ce=Array.isArray,qt=e=>Ds(e)==="[object Map]",si=e=>Ds(e)==="[object Set]",Cr=e=>Ds(e)==="[object Date]",he=e=>typeof e=="function",ke=e=>typeof e=="string",Qe=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",kn=e=>(Ce(e)||he(e))&&he(e.then)&&he(e.catch),Rn=Object.prototype.toString,Ds=e=>Rn.call(e),ga=e=>Ds(e).slice(8,-1),Ln=e=>Ds(e)==="[object Object]",sr=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=Qi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},ma=/-(\w)/g,Je=ii(e=>e.replace(ma,(t,i)=>i?i.toUpperCase():"")),Sa=/\B([A-Z])/g,Ut=ii(e=>e.replace(Sa,"-$1").toLowerCase()),ri=ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),mi=ii(e=>e?`on${ri(e)}`:""),kt=(e,t)=>!Object.is(e,t),Fs=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Dn=(e,t,i,h=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:h,value:i})},Ws=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ba=e=>{const t=ke(e)?Number(e):NaN;return isNaN(t)?e:t};let yr;const ni=()=>yr||(yr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bs(e){if(ce(e)){const t={};for(let i=0;i<e.length;i++){const h=e[i],d=ke(h)?Ea(h):bs(h);if(d)for(const m in d)t[m]=d[m]}return t}else if(ke(e)||Ce(e))return e}const Ca=/;(?![^(]*\))/g,ya=/:([^]+)/,wa=/\/\*[^]*?\*\//g;function Ea(e){const t={};return e.replace(wa,"").split(Ca).forEach(i=>{if(i){const h=i.split(ya);h.length>1&&(t[h[0].trim()]=h[1].trim())}}),t}function ts(e){let t="";if(ke(e))t=e;else if(ce(e))for(let i=0;i<e.length;i++){const h=ts(e[i]);h&&(t+=h+" ")}else if(Ce(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const xa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ka=Qi(xa);function An(e){return!!e||e===""}function Ra(e,t){if(e.length!==t.length)return!1;let i=!0;for(let h=0;i&&h<e.length;h++)i=oi(e[h],t[h]);return i}function oi(e,t){if(e===t)return!0;let i=Cr(e),h=Cr(t);if(i||h)return i&&h?e.getTime()===t.getTime():!1;if(i=Qe(e),h=Qe(t),i||h)return e===t;if(i=ce(e),h=ce(t),i||h)return i&&h?Ra(e,t):!1;if(i=Ce(e),h=Ce(t),i||h){if(!i||!h)return!1;const d=Object.keys(e).length,m=Object.keys(t).length;if(d!==m)return!1;for(const b in e){const s=e.hasOwnProperty(b),n=t.hasOwnProperty(b);if(s&&!n||!s&&n||!oi(e[b],t[b]))return!1}}return String(e)===String(t)}function La(e,t){return e.findIndex(i=>oi(i,t))}const Tn=e=>!!(e&&e.__v_isRef===!0),dt=e=>ke(e)?e:e==null?"":ce(e)||Ce(e)&&(e.toString===Rn||!he(e.toString))?Tn(e)?dt(e.value):JSON.stringify(e,On,2):String(e),On=(e,t)=>Tn(t)?On(e,t.value):qt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[h,d],m)=>(i[Si(h,m)+" =>"]=d,i),{})}:si(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Si(i))}:Qe(t)?Si(t):Ce(t)&&!ce(t)&&!Ln(t)?String(t):t,Si=(e,t="")=>{var i;return Qe(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ze;class Da{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ze,!t&&ze&&(this.index=(ze.scopes||(ze.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=ze;try{return ze=this,t()}finally{ze=i}}}on(){ze=this}off(){ze=this.parent}stop(t){if(this._active){this._active=!1;let i,h;for(i=0,h=this.effects.length;i<h;i++)this.effects[i].stop();for(this.effects.length=0,i=0,h=this.cleanups.length;i<h;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,h=this.scopes.length;i<h;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const d=this.parent.scopes.pop();d&&d!==this&&(this.parent.scopes[this.index]=d,d.index=this.index)}this.parent=void 0}}}function Aa(){return ze}let ye;const bi=new WeakSet;class Bn{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ze&&ze.active&&ze.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bi.has(this)&&(bi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Pn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wr(this),In(this);const t=ye,i=Ze;ye=this,Ze=!0;try{return this.fn()}finally{Hn(this),ye=t,Ze=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nr(t);this.deps=this.depsTail=void 0,wr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hi(this)&&this.run()}get dirty(){return Hi(this)}}let Mn=0,ds,_s;function Pn(e,t=!1){if(e.flags|=8,t){e.next=_s,_s=e;return}e.next=ds,ds=e}function ir(){Mn++}function rr(){if(--Mn>0)return;if(_s){let t=_s;for(_s=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;ds;){let t=ds;for(ds=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(h){e||(e=h)}t=i}}if(e)throw e}function In(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Hn(e){let t,i=e.depsTail,h=i;for(;h;){const d=h.prevDep;h.version===-1?(h===i&&(i=d),nr(h),Ta(h)):t=h,h.dep.activeLink=h.prevActiveLink,h.prevActiveLink=void 0,h=d}e.deps=t,e.depsTail=i}function Hi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fn(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs))return;e.globalVersion=Cs;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Hi(e)){e.flags&=-3;return}const i=ye,h=Ze;ye=e,Ze=!0;try{In(e);const d=e.fn(e._value);(t.version===0||kt(d,e._value))&&(e._value=d,t.version++)}catch(d){throw t.version++,d}finally{ye=i,Ze=h,Hn(e),e.flags&=-3}}function nr(e,t=!1){const{dep:i,prevSub:h,nextSub:d}=e;if(h&&(h.nextSub=d,e.prevSub=void 0),d&&(d.prevSub=h,e.nextSub=void 0),i.subs===e&&(i.subs=h,!h&&i.computed)){i.computed.flags&=-5;for(let m=i.computed.deps;m;m=m.nextDep)nr(m,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function Ta(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Ze=!0;const $n=[];function Lt(){$n.push(Ze),Ze=!1}function Dt(){const e=$n.pop();Ze=e===void 0?!0:e}function wr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=ye;ye=void 0;try{t()}finally{ye=i}}}let Cs=0;class Oa{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class or{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ye||!Ze||ye===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==ye)i=this.activeLink=new Oa(ye,this),ye.deps?(i.prevDep=ye.depsTail,ye.depsTail.nextDep=i,ye.depsTail=i):ye.deps=ye.depsTail=i,Nn(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const h=i.nextDep;h.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=h),i.prevDep=ye.depsTail,i.nextDep=void 0,ye.depsTail.nextDep=i,ye.depsTail=i,ye.deps===i&&(ye.deps=h)}return i}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){ir();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{rr()}}}function Nn(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let h=t.deps;h;h=h.nextDep)Nn(h)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Fi=new WeakMap,Ft=Symbol(""),$i=Symbol(""),ys=Symbol("");function Me(e,t,i){if(Ze&&ye){let h=Fi.get(e);h||Fi.set(e,h=new Map);let d=h.get(i);d||(h.set(i,d=new or),d.map=h,d.key=i),d.track()}}function _t(e,t,i,h,d,m){const b=Fi.get(e);if(!b){Cs++;return}const s=n=>{n&&n.trigger()};if(ir(),t==="clear")b.forEach(s);else{const n=ce(e),u=n&&sr(i);if(n&&i==="length"){const f=Number(h);b.forEach((l,_)=>{(_==="length"||_===ys||!Qe(_)&&_>=f)&&s(l)})}else switch((i!==void 0||b.has(void 0))&&s(b.get(i)),u&&s(b.get(ys)),t){case"add":n?u&&s(b.get("length")):(s(b.get(Ft)),qt(e)&&s(b.get($i)));break;case"delete":n||(s(b.get(Ft)),qt(e)&&s(b.get($i)));break;case"set":qt(e)&&s(b.get(Ft));break}}rr()}function jt(e){const t=ve(e);return t===e?t:(Me(t,"iterate",ys),Ge(e)?t:t.map(Pe))}function ai(e){return Me(e=ve(e),"iterate",ys),e}const Ba={__proto__:null,[Symbol.iterator](){return Ci(this,Symbol.iterator,Pe)},concat(...e){return jt(this).concat(...e.map(t=>ce(t)?jt(t):t))},entries(){return Ci(this,"entries",e=>(e[1]=Pe(e[1]),e))},every(e,t){return ct(this,"every",e,t,void 0,arguments)},filter(e,t){return ct(this,"filter",e,t,i=>i.map(Pe),arguments)},find(e,t){return ct(this,"find",e,t,Pe,arguments)},findIndex(e,t){return ct(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ct(this,"findLast",e,t,Pe,arguments)},findLastIndex(e,t){return ct(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ct(this,"forEach",e,t,void 0,arguments)},includes(...e){return yi(this,"includes",e)},indexOf(...e){return yi(this,"indexOf",e)},join(e){return jt(this).join(e)},lastIndexOf(...e){return yi(this,"lastIndexOf",e)},map(e,t){return ct(this,"map",e,t,void 0,arguments)},pop(){return as(this,"pop")},push(...e){return as(this,"push",e)},reduce(e,...t){return Er(this,"reduce",e,t)},reduceRight(e,...t){return Er(this,"reduceRight",e,t)},shift(){return as(this,"shift")},some(e,t){return ct(this,"some",e,t,void 0,arguments)},splice(...e){return as(this,"splice",e)},toReversed(){return jt(this).toReversed()},toSorted(e){return jt(this).toSorted(e)},toSpliced(...e){return jt(this).toSpliced(...e)},unshift(...e){return as(this,"unshift",e)},values(){return Ci(this,"values",Pe)}};function Ci(e,t,i){const h=ai(e),d=h[t]();return h!==e&&!Ge(e)&&(d._next=d.next,d.next=()=>{const m=d._next();return m.value&&(m.value=i(m.value)),m}),d}const Ma=Array.prototype;function ct(e,t,i,h,d,m){const b=ai(e),s=b!==e&&!Ge(e),n=b[t];if(n!==Ma[t]){const l=n.apply(e,m);return s?Pe(l):l}let u=i;b!==e&&(s?u=function(l,_){return i.call(this,Pe(l),_,e)}:i.length>2&&(u=function(l,_){return i.call(this,l,_,e)}));const f=n.call(b,u,h);return s&&d?d(f):f}function Er(e,t,i,h){const d=ai(e);let m=i;return d!==e&&(Ge(e)?i.length>3&&(m=function(b,s,n){return i.call(this,b,s,n,e)}):m=function(b,s,n){return i.call(this,b,Pe(s),n,e)}),d[t](m,...h)}function yi(e,t,i){const h=ve(e);Me(h,"iterate",ys);const d=h[t](...i);return(d===-1||d===!1)&&cr(i[0])?(i[0]=ve(i[0]),h[t](...i)):d}function as(e,t,i=[]){Lt(),ir();const h=ve(e)[t].apply(e,i);return rr(),Dt(),h}const Pa=Qi("__proto__,__v_isRef,__isVue"),Wn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qe));function Ia(e){Qe(e)||(e=String(e));const t=ve(this);return Me(t,"has",e),t.hasOwnProperty(e)}class Un{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,h){if(i==="__v_skip")return t.__v_skip;const d=this._isReadonly,m=this._isShallow;if(i==="__v_isReactive")return!d;if(i==="__v_isReadonly")return d;if(i==="__v_isShallow")return m;if(i==="__v_raw")return h===(d?m?Va:Vn:m?Kn:zn).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(h)?t:void 0;const b=ce(t);if(!d){let n;if(b&&(n=Ba[i]))return n;if(i==="hasOwnProperty")return Ia}const s=Reflect.get(t,i,Ie(t)?t:h);return(Qe(i)?Wn.has(i):Pa(i))||(d||Me(t,"get",i),m)?s:Ie(s)?b&&sr(i)?s:s.value:Ce(s)?d?Gn(s):li(s):s}}class jn extends Un{constructor(t=!1){super(!1,t)}set(t,i,h,d){let m=t[i];if(!this._isShallow){const n=Nt(m);if(!Ge(h)&&!Nt(h)&&(m=ve(m),h=ve(h)),!ce(t)&&Ie(m)&&!Ie(h))return n?!1:(m.value=h,!0)}const b=ce(t)&&sr(i)?Number(i)<t.length:Se(t,i),s=Reflect.set(t,i,h,Ie(t)?t:d);return t===ve(d)&&(b?kt(h,m)&&_t(t,"set",i,h):_t(t,"add",i,h)),s}deleteProperty(t,i){const h=Se(t,i);t[i];const d=Reflect.deleteProperty(t,i);return d&&h&&_t(t,"delete",i,void 0),d}has(t,i){const h=Reflect.has(t,i);return(!Qe(i)||!Wn.has(i))&&Me(t,"has",i),h}ownKeys(t){return Me(t,"iterate",ce(t)?"length":Ft),Reflect.ownKeys(t)}}class Ha extends Un{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Fa=new jn,$a=new Ha,Na=new jn(!0);const Ni=e=>e,Bs=e=>Reflect.getPrototypeOf(e);function Wa(e,t,i){return function(...h){const d=this.__v_raw,m=ve(d),b=qt(m),s=e==="entries"||e===Symbol.iterator&&b,n=e==="keys"&&b,u=d[e](...h),f=i?Ni:t?Wi:Pe;return!t&&Me(m,"iterate",n?$i:Ft),{next(){const{value:l,done:_}=u.next();return _?{value:l,done:_}:{value:s?[f(l[0]),f(l[1])]:f(l),done:_}},[Symbol.iterator](){return this}}}}function Ms(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ua(e,t){const i={get(d){const m=this.__v_raw,b=ve(m),s=ve(d);e||(kt(d,s)&&Me(b,"get",d),Me(b,"get",s));const{has:n}=Bs(b),u=t?Ni:e?Wi:Pe;if(n.call(b,d))return u(m.get(d));if(n.call(b,s))return u(m.get(s));m!==b&&m.get(d)},get size(){const d=this.__v_raw;return!e&&Me(ve(d),"iterate",Ft),Reflect.get(d,"size",d)},has(d){const m=this.__v_raw,b=ve(m),s=ve(d);return e||(kt(d,s)&&Me(b,"has",d),Me(b,"has",s)),d===s?m.has(d):m.has(d)||m.has(s)},forEach(d,m){const b=this,s=b.__v_raw,n=ve(s),u=t?Ni:e?Wi:Pe;return!e&&Me(n,"iterate",Ft),s.forEach((f,l)=>d.call(m,u(f),u(l),b))}};return Re(i,e?{add:Ms("add"),set:Ms("set"),delete:Ms("delete"),clear:Ms("clear")}:{add(d){!t&&!Ge(d)&&!Nt(d)&&(d=ve(d));const m=ve(this);return Bs(m).has.call(m,d)||(m.add(d),_t(m,"add",d,d)),this},set(d,m){!t&&!Ge(m)&&!Nt(m)&&(m=ve(m));const b=ve(this),{has:s,get:n}=Bs(b);let u=s.call(b,d);u||(d=ve(d),u=s.call(b,d));const f=n.call(b,d);return b.set(d,m),u?kt(m,f)&&_t(b,"set",d,m):_t(b,"add",d,m),this},delete(d){const m=ve(this),{has:b,get:s}=Bs(m);let n=b.call(m,d);n||(d=ve(d),n=b.call(m,d)),s&&s.call(m,d);const u=m.delete(d);return n&&_t(m,"delete",d,void 0),u},clear(){const d=ve(this),m=d.size!==0,b=d.clear();return m&&_t(d,"clear",void 0,void 0),b}}),["keys","values","entries",Symbol.iterator].forEach(d=>{i[d]=Wa(d,e,t)}),i}function ar(e,t){const i=Ua(e,t);return(h,d,m)=>d==="__v_isReactive"?!e:d==="__v_isReadonly"?e:d==="__v_raw"?h:Reflect.get(Se(i,d)&&d in h?i:h,d,m)}const ja={get:ar(!1,!1)},za={get:ar(!1,!0)},Ka={get:ar(!0,!1)};const zn=new WeakMap,Kn=new WeakMap,Vn=new WeakMap,Va=new WeakMap;function qa(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ga(e){return e.__v_skip||!Object.isExtensible(e)?0:qa(ga(e))}function li(e){return Nt(e)?e:lr(e,!1,Fa,ja,zn)}function qn(e){return lr(e,!1,Na,za,Kn)}function Gn(e){return lr(e,!0,$a,Ka,Vn)}function lr(e,t,i,h,d){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const m=d.get(e);if(m)return m;const b=Ga(e);if(b===0)return e;const s=new Proxy(e,b===2?h:i);return d.set(e,s),s}function Gt(e){return Nt(e)?Gt(e.__v_raw):!!(e&&e.__v_isReactive)}function Nt(e){return!!(e&&e.__v_isReadonly)}function Ge(e){return!!(e&&e.__v_isShallow)}function cr(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function Ja(e){return!Se(e,"__v_skip")&&Object.isExtensible(e)&&Dn(e,"__v_skip",!0),e}const Pe=e=>Ce(e)?li(e):e,Wi=e=>Ce(e)?Gn(e):e;function Ie(e){return e?e.__v_isRef===!0:!1}function Te(e){return Jn(e,!1)}function Xa(e){return Jn(e,!0)}function Jn(e,t){return Ie(e)?e:new Ya(e,t)}class Ya{constructor(t,i){this.dep=new or,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:ve(t),this._value=i?t:Pe(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,h=this.__v_isShallow||Ge(t)||Nt(t);t=h?t:ve(t),kt(t,i)&&(this._rawValue=t,this._value=h?t:Pe(t),this.dep.trigger())}}function Fe(e){return Ie(e)?e.value:e}const Za={get:(e,t,i)=>t==="__v_raw"?e:Fe(Reflect.get(e,t,i)),set:(e,t,i,h)=>{const d=e[t];return Ie(d)&&!Ie(i)?(d.value=i,!0):Reflect.set(e,t,i,h)}};function Xn(e){return Gt(e)?e:new Proxy(e,Za)}class Qa{constructor(t,i,h){this.fn=t,this.setter=i,this._value=void 0,this.dep=new or(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=h}notify(){if(this.flags|=16,!(this.flags&8)&&ye!==this)return Pn(this,!0),!0}get value(){const t=this.dep.track();return Fn(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function el(e,t,i=!1){let h,d;return he(e)?h=e:(h=e.get,d=e.set),new Qa(h,d,i)}const Ps={},Us=new WeakMap;let Mt;function tl(e,t=!1,i=Mt){if(i){let h=Us.get(i);h||Us.set(i,h=[]),h.push(e)}}function sl(e,t,i=be){const{immediate:h,deep:d,once:m,scheduler:b,augmentJob:s,call:n}=i,u=p=>d?p:Ge(p)||d===!1||d===0?pt(p,1):pt(p);let f,l,_,g,w=!1,v=!1;if(Ie(e)?(l=()=>e.value,w=Ge(e)):Gt(e)?(l=()=>u(e),w=!0):ce(e)?(v=!0,w=e.some(p=>Gt(p)||Ge(p)),l=()=>e.map(p=>{if(Ie(p))return p.value;if(Gt(p))return u(p);if(he(p))return n?n(p,2):p()})):he(e)?t?l=n?()=>n(e,2):e:l=()=>{if(_){Lt();try{_()}finally{Dt()}}const p=Mt;Mt=f;try{return n?n(e,3,[g]):e(g)}finally{Mt=p}}:l=at,t&&d){const p=l,C=d===!0?1/0:d;l=()=>pt(p(),C)}const a=Aa(),c=()=>{f.stop(),a&&a.active&&tr(a.effects,f)};if(m&&t){const p=t;t=(...C)=>{p(...C),c()}}let r=v?new Array(e.length).fill(Ps):Ps;const o=p=>{if(!(!(f.flags&1)||!f.dirty&&!p))if(t){const C=f.run();if(d||w||(v?C.some((y,x)=>kt(y,r[x])):kt(C,r))){_&&_();const y=Mt;Mt=f;try{const x=[C,r===Ps?void 0:v&&r[0]===Ps?[]:r,g];n?n(t,3,x):t(...x),r=C}finally{Mt=y}}}else f.run()};return s&&s(o),f=new Bn(l),f.scheduler=b?()=>b(o,!1):o,g=p=>tl(p,!1,f),_=f.onStop=()=>{const p=Us.get(f);if(p){if(n)n(p,4);else for(const C of p)C();Us.delete(f)}},t?h?o(!0):r=f.run():b?b(o.bind(null,!0),!0):f.run(),c.pause=f.pause.bind(f),c.resume=f.resume.bind(f),c.stop=c,c}function pt(e,t=1/0,i){if(t<=0||!Ce(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Ie(e))pt(e.value,t,i);else if(ce(e))for(let h=0;h<e.length;h++)pt(e[h],t,i);else if(si(e)||qt(e))e.forEach(h=>{pt(h,t,i)});else if(Ln(e)){for(const h in e)pt(e[h],t,i);for(const h of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,h)&&pt(e[h],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function As(e,t,i,h){try{return h?e(...h):e()}catch(d){ci(d,t,i)}}function et(e,t,i,h){if(he(e)){const d=As(e,t,i,h);return d&&kn(d)&&d.catch(m=>{ci(m,t,i)}),d}if(ce(e)){const d=[];for(let m=0;m<e.length;m++)d.push(et(e[m],t,i,h));return d}}function ci(e,t,i,h=!0){const d=t?t.vnode:null,{errorHandler:m,throwUnhandledErrorInProduction:b}=t&&t.appContext.config||be;if(t){let s=t.parent;const n=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;s;){const f=s.ec;if(f){for(let l=0;l<f.length;l++)if(f[l](e,n,u)===!1)return}s=s.parent}if(m){Lt(),As(m,null,10,[e,n,u]),Dt();return}}il(e,i,d,h,b)}function il(e,t,i,h=!0,d=!1){if(d)throw e;console.error(e)}const $e=[];let nt=-1;const Jt=[];let yt=null,zt=0;const Yn=Promise.resolve();let js=null;function hr(e){const t=js||Yn;return e?t.then(this?e.bind(this):e):t}function rl(e){let t=nt+1,i=$e.length;for(;t<i;){const h=t+i>>>1,d=$e[h],m=ws(d);m<e||m===e&&d.flags&2?t=h+1:i=h}return t}function ur(e){if(!(e.flags&1)){const t=ws(e),i=$e[$e.length-1];!i||!(e.flags&2)&&t>=ws(i)?$e.push(e):$e.splice(rl(t),0,e),e.flags|=1,Zn()}}function Zn(){js||(js=Yn.then(eo))}function nl(e){ce(e)?Jt.push(...e):yt&&e.id===-1?yt.splice(zt+1,0,e):e.flags&1||(Jt.push(e),e.flags|=1),Zn()}function xr(e,t,i=nt+1){for(;i<$e.length;i++){const h=$e[i];if(h&&h.flags&2){if(e&&h.id!==e.uid)continue;$e.splice(i,1),i--,h.flags&4&&(h.flags&=-2),h(),h.flags&4||(h.flags&=-2)}}}function Qn(e){if(Jt.length){const t=[...new Set(Jt)].sort((i,h)=>ws(i)-ws(h));if(Jt.length=0,yt){yt.push(...t);return}for(yt=t,zt=0;zt<yt.length;zt++){const i=yt[zt];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}yt=null,zt=0}}const ws=e=>e.id==null?e.flags&2?-1:1/0:e.id;function eo(e){try{for(nt=0;nt<$e.length;nt++){const t=$e[nt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),As(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;nt<$e.length;nt++){const t=$e[nt];t&&(t.flags&=-2)}nt=-1,$e.length=0,Qn(),js=null,($e.length||Jt.length)&&eo()}}let Ae=null,to=null;function zs(e){const t=Ae;return Ae=e,to=e&&e.type.__scopeId||null,t}function $t(e,t=Ae,i){if(!t||e._n)return e;const h=(...d)=>{h._d&&Ir(-1);const m=zs(t);let b;try{b=e(...d)}finally{zs(m),h._d&&Ir(1)}return b};return h._n=!0,h._c=!0,h._d=!0,h}function qe(e,t){if(Ae===null)return e;const i=_i(Ae),h=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[m,b,s,n=be]=t[d];m&&(he(m)&&(m={mounted:m,updated:m}),m.deep&&pt(b),h.push({dir:m,instance:i,value:b,oldValue:void 0,arg:s,modifiers:n}))}return e}function Tt(e,t,i,h){const d=e.dirs,m=t&&t.dirs;for(let b=0;b<d.length;b++){const s=d[b];m&&(s.oldValue=m[b].value);let n=s.dir[h];n&&(Lt(),et(n,i,8,[e.el,s,e,t]),Dt())}}const ol=Symbol("_vte"),so=e=>e.__isTeleport,wt=Symbol("_leaveCb"),Is=Symbol("_enterCb");function io(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ts(()=>{e.isMounted=!0}),uo(()=>{e.isUnmounting=!0}),e}const Ve=[Function,Array],ro={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ve,onEnter:Ve,onAfterEnter:Ve,onEnterCancelled:Ve,onBeforeLeave:Ve,onLeave:Ve,onAfterLeave:Ve,onLeaveCancelled:Ve,onBeforeAppear:Ve,onAppear:Ve,onAfterAppear:Ve,onAppearCancelled:Ve},no=e=>{const t=e.subTree;return t.component?no(t.component):t},al={name:"BaseTransition",props:ro,setup(e,{slots:t}){const i=Ho(),h=io();return()=>{const d=t.default&&fr(t.default(),!0);if(!d||!d.length)return;const m=oo(d),b=ve(e),{mode:s}=b;if(h.isLeaving)return wi(m);const n=kr(m);if(!n)return wi(m);let u=Es(n,b,h,i,l=>u=l);n.type!==Ne&&Wt(n,u);let f=i.subTree&&kr(i.subTree);if(f&&f.type!==Ne&&!Pt(n,f)&&no(i).type!==Ne){let l=Es(f,b,h,i);if(Wt(f,l),s==="out-in"&&n.type!==Ne)return h.isLeaving=!0,l.afterLeave=()=>{h.isLeaving=!1,i.job.flags&8||i.update(),delete l.afterLeave,f=void 0},wi(m);s==="in-out"&&n.type!==Ne?l.delayLeave=(_,g,w)=>{const v=ao(h,f);v[String(f.key)]=f,_[wt]=()=>{g(),_[wt]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return m}}};function oo(e){let t=e[0];if(e.length>1){for(const i of e)if(i.type!==Ne){t=i;break}}return t}const ll=al;function ao(e,t){const{leavingVNodes:i}=e;let h=i.get(t.type);return h||(h=Object.create(null),i.set(t.type,h)),h}function Es(e,t,i,h,d){const{appear:m,mode:b,persisted:s=!1,onBeforeEnter:n,onEnter:u,onAfterEnter:f,onEnterCancelled:l,onBeforeLeave:_,onLeave:g,onAfterLeave:w,onLeaveCancelled:v,onBeforeAppear:a,onAppear:c,onAfterAppear:r,onAppearCancelled:o}=t,p=String(e.key),C=ao(i,e),y=(E,D)=>{E&&et(E,h,9,D)},x=(E,D)=>{const P=D[1];y(E,D),ce(E)?E.every(B=>B.length<=1)&&P():E.length<=1&&P()},S={mode:b,persisted:s,beforeEnter(E){let D=n;if(!i.isMounted)if(m)D=a||n;else return;E[wt]&&E[wt](!0);const P=C[p];P&&Pt(e,P)&&P.el[wt]&&P.el[wt](),y(D,[E])},enter(E){let D=u,P=f,B=l;if(!i.isMounted)if(m)D=c||u,P=r||f,B=o||l;else return;let T=!1;const U=E[Is]=z=>{T||(T=!0,z?y(B,[E]):y(P,[E]),S.delayedLeave&&S.delayedLeave(),E[Is]=void 0)};D?x(D,[E,U]):U()},leave(E,D){const P=String(e.key);if(E[Is]&&E[Is](!0),i.isUnmounting)return D();y(_,[E]);let B=!1;const T=E[wt]=U=>{B||(B=!0,D(),U?y(v,[E]):y(w,[E]),E[wt]=void 0,C[P]===e&&delete C[P])};C[P]=e,g?x(g,[E,T]):T()},clone(E){const D=Es(E,t,i,h,d);return d&&d(D),D}};return S}function wi(e){if(hi(e))return e=Rt(e),e.children=null,e}function kr(e){if(!hi(e))return so(e.type)&&e.children?oo(e.children):e;const{shapeFlag:t,children:i}=e;if(i){if(t&16)return i[0];if(t&32&&he(i.default))return i.default()}}function Wt(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Wt(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fr(e,t=!1,i){let h=[],d=0;for(let m=0;m<e.length;m++){let b=e[m];const s=i==null?b.key:String(i)+String(b.key!=null?b.key:m);b.type===xe?(b.patchFlag&128&&d++,h=h.concat(fr(b.children,t,s))):(t||b.type!==Ne)&&h.push(s!=null?Rt(b,{key:s}):b)}if(d>1)for(let m=0;m<h.length;m++)h[m].patchFlag=-2;return h}/*! #__NO_SIDE_EFFECTS__ */function Xe(e,t){return he(e)?Re({name:e.name},t,{setup:e}):e}function lo(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ks(e,t,i,h,d=!1){if(ce(e)){e.forEach((w,v)=>Ks(w,t&&(ce(t)?t[v]:t),i,h,d));return}if(Xt(h)&&!d){h.shapeFlag&512&&h.type.__asyncResolved&&h.component.subTree.component&&Ks(e,t,i,h.component.subTree);return}const m=h.shapeFlag&4?_i(h.component):h.el,b=d?null:m,{i:s,r:n}=e,u=t&&t.r,f=s.refs===be?s.refs={}:s.refs,l=s.setupState,_=ve(l),g=l===be?()=>!1:w=>Se(_,w);if(u!=null&&u!==n&&(ke(u)?(f[u]=null,g(u)&&(l[u]=null)):Ie(u)&&(u.value=null)),he(n))As(n,s,12,[b,f]);else{const w=ke(n),v=Ie(n);if(w||v){const a=()=>{if(e.f){const c=w?g(n)?l[n]:f[n]:n.value;d?ce(c)&&tr(c,m):ce(c)?c.includes(m)||c.push(m):w?(f[n]=[m],g(n)&&(l[n]=f[n])):(n.value=[m],e.k&&(f[e.k]=n.value))}else w?(f[n]=b,g(n)&&(l[n]=b)):v&&(n.value=b,e.k&&(f[e.k]=b))};b?(a.id=-1,je(a,i)):a()}}}ni().requestIdleCallback;ni().cancelIdleCallback;const Xt=e=>!!e.type.__asyncLoader,hi=e=>e.type.__isKeepAlive;function cl(e,t){co(e,"a",t)}function hl(e,t){co(e,"da",t)}function co(e,t,i=Oe){const h=e.__wdc||(e.__wdc=()=>{let d=i;for(;d;){if(d.isDeactivated)return;d=d.parent}return e()});if(ui(t,h,i),i){let d=i.parent;for(;d&&d.parent;)hi(d.parent.vnode)&&ul(h,t,i,d),d=d.parent}}function ul(e,t,i,h){const d=ui(t,e,h,!0);Vs(()=>{tr(h[t],d)},i)}function ui(e,t,i=Oe,h=!1){if(i){const d=i[e]||(i[e]=[]),m=t.__weh||(t.__weh=(...b)=>{Lt();const s=Os(i),n=et(t,i,e,b);return s(),Dt(),n});return h?d.unshift(m):d.push(m),m}}const mt=e=>(t,i=Oe)=>{(!ks||e==="sp")&&ui(e,(...h)=>t(...h),i)},fl=mt("bm"),Ts=mt("m"),dl=mt("bu"),ho=mt("u"),uo=mt("bum"),Vs=mt("um"),_l=mt("sp"),pl=mt("rtg"),vl=mt("rtc");function gl(e,t=Oe){ui("ec",e,t)}const fo="components",ml="directives";function Sl(e,t){return _o(fo,e,!0,t)||e}const bl=Symbol.for("v-ndc");function Cl(e){return _o(ml,e)}function _o(e,t,i=!0,h=!1){const d=Ae||Oe;if(d){const m=d.type;if(e===fo){const s=oc(m,!1);if(s&&(s===t||s===Je(t)||s===ri(Je(t))))return m}const b=Rr(d[e]||m[e],t)||Rr(d.appContext[e],t);return!b&&h?m:b}}function Rr(e,t){return e&&(e[t]||e[Je(t)]||e[ri(Je(t))])}function Ui(e,t,i,h){let d;const m=i,b=ce(e);if(b||ke(e)){const s=b&&Gt(e);let n=!1;s&&(n=!Ge(e),e=ai(e)),d=new Array(e.length);for(let u=0,f=e.length;u<f;u++)d[u]=t(n?Pe(e[u]):e[u],u,void 0,m)}else if(typeof e=="number"){d=new Array(e);for(let s=0;s<e;s++)d[s]=t(s+1,s,void 0,m)}else if(Ce(e))if(e[Symbol.iterator])d=Array.from(e,(s,n)=>t(s,n,void 0,m));else{const s=Object.keys(e);d=new Array(s.length);for(let n=0,u=s.length;n<u;n++){const f=s[n];d[n]=t(e[f],f,n,m)}}else d=[];return d}function dr(e,t,i={},h,d){if(Ae.ce||Ae.parent&&Xt(Ae.parent)&&Ae.parent.ce)return pe(),lt(xe,null,[de("slot",i,h)],64);let m=e[t];m&&m._c&&(m._d=!1),pe();const b=m&&po(m(i)),s=i.key||b&&b.key,n=lt(xe,{key:(s&&!Qe(s)?s:`_${t}`)+""},b||[],b&&e._===1?64:-2);return m&&m._c&&(m._d=!0),n}function po(e){return e.some(t=>ss(t)?!(t.type===Ne||t.type===xe&&!po(t.children)):!0)?e:null}const ji=e=>e?Fo(e)?_i(e):ji(e.parent):null,ps=Re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ji(e.parent),$root:e=>ji(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>go(e),$forceUpdate:e=>e.f||(e.f=()=>{ur(e.update)}),$nextTick:e=>e.n||(e.n=hr.bind(e.proxy)),$watch:e=>Ul.bind(e)}),Ei=(e,t)=>e!==be&&!e.__isScriptSetup&&Se(e,t),yl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:h,data:d,props:m,accessCache:b,type:s,appContext:n}=e;let u;if(t[0]!=="$"){const g=b[t];if(g!==void 0)switch(g){case 1:return h[t];case 2:return d[t];case 4:return i[t];case 3:return m[t]}else{if(Ei(h,t))return b[t]=1,h[t];if(d!==be&&Se(d,t))return b[t]=2,d[t];if((u=e.propsOptions[0])&&Se(u,t))return b[t]=3,m[t];if(i!==be&&Se(i,t))return b[t]=4,i[t];zi&&(b[t]=0)}}const f=ps[t];let l,_;if(f)return t==="$attrs"&&Me(e.attrs,"get",""),f(e);if((l=s.__cssModules)&&(l=l[t]))return l;if(i!==be&&Se(i,t))return b[t]=4,i[t];if(_=n.config.globalProperties,Se(_,t))return _[t]},set({_:e},t,i){const{data:h,setupState:d,ctx:m}=e;return Ei(d,t)?(d[t]=i,!0):h!==be&&Se(h,t)?(h[t]=i,!0):Se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(m[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:h,appContext:d,propsOptions:m}},b){let s;return!!i[b]||e!==be&&Se(e,b)||Ei(t,b)||(s=m[0])&&Se(s,b)||Se(h,b)||Se(ps,b)||Se(d.config.globalProperties,b)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Se(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Lr(e){return ce(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let zi=!0;function wl(e){const t=go(e),i=e.proxy,h=e.ctx;zi=!1,t.beforeCreate&&Dr(t.beforeCreate,e,"bc");const{data:d,computed:m,methods:b,watch:s,provide:n,inject:u,created:f,beforeMount:l,mounted:_,beforeUpdate:g,updated:w,activated:v,deactivated:a,beforeDestroy:c,beforeUnmount:r,destroyed:o,unmounted:p,render:C,renderTracked:y,renderTriggered:x,errorCaptured:S,serverPrefetch:E,expose:D,inheritAttrs:P,components:B,directives:T,filters:U}=t;if(u&&El(u,h,null),b)for(const J in b){const V=b[J];he(V)&&(h[J]=V.bind(i))}if(d){const J=d.call(i,i);Ce(J)&&(e.data=li(J))}if(zi=!0,m)for(const J in m){const V=m[J],R=he(V)?V.bind(i,i):he(V.get)?V.get.bind(i,i):at,M=!he(V)&&he(V.set)?V.set.bind(i):at,I=De({get:R,set:M});Object.defineProperty(h,J,{enumerable:!0,configurable:!0,get:()=>I.value,set:H=>I.value=H})}if(s)for(const J in s)vo(s[J],h,i,J);if(n){const J=he(n)?n.call(i):n;Reflect.ownKeys(J).forEach(V=>{Zt(V,J[V])})}f&&Dr(f,e,"c");function G(J,V){ce(V)?V.forEach(R=>J(R.bind(i))):V&&J(V.bind(i))}if(G(fl,l),G(Ts,_),G(dl,g),G(ho,w),G(cl,v),G(hl,a),G(gl,S),G(vl,y),G(pl,x),G(uo,r),G(Vs,p),G(_l,E),ce(D))if(D.length){const J=e.exposed||(e.exposed={});D.forEach(V=>{Object.defineProperty(J,V,{get:()=>i[V],set:R=>i[V]=R})})}else e.exposed||(e.exposed={});C&&e.render===at&&(e.render=C),P!=null&&(e.inheritAttrs=P),B&&(e.components=B),T&&(e.directives=T),E&&lo(e)}function El(e,t,i=at){ce(e)&&(e=Ki(e));for(const h in e){const d=e[h];let m;Ce(d)?"default"in d?m=We(d.from||h,d.default,!0):m=We(d.from||h):m=We(d),Ie(m)?Object.defineProperty(t,h,{enumerable:!0,configurable:!0,get:()=>m.value,set:b=>m.value=b}):t[h]=m}}function Dr(e,t,i){et(ce(e)?e.map(h=>h.bind(t.proxy)):e.bind(t.proxy),t,i)}function vo(e,t,i,h){let d=h.includes(".")?To(i,h):()=>i[h];if(ke(e)){const m=t[e];he(m)&&vs(d,m)}else if(he(e))vs(d,e.bind(i));else if(Ce(e))if(ce(e))e.forEach(m=>vo(m,t,i,h));else{const m=he(e.handler)?e.handler.bind(i):t[e.handler];he(m)&&vs(d,m,e)}}function go(e){const t=e.type,{mixins:i,extends:h}=t,{mixins:d,optionsCache:m,config:{optionMergeStrategies:b}}=e.appContext,s=m.get(t);let n;return s?n=s:!d.length&&!i&&!h?n=t:(n={},d.length&&d.forEach(u=>qs(n,u,b,!0)),qs(n,t,b)),Ce(t)&&m.set(t,n),n}function qs(e,t,i,h=!1){const{mixins:d,extends:m}=t;m&&qs(e,m,i,!0),d&&d.forEach(b=>qs(e,b,i,!0));for(const b in t)if(!(h&&b==="expose")){const s=xl[b]||i&&i[b];e[b]=s?s(e[b],t[b]):t[b]}return e}const xl={data:Ar,props:Tr,emits:Tr,methods:us,computed:us,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:us,directives:us,watch:Rl,provide:Ar,inject:kl};function Ar(e,t){return t?e?function(){return Re(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function kl(e,t){return us(Ki(e),Ki(t))}function Ki(e){if(ce(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function He(e,t){return e?[...new Set([].concat(e,t))]:t}function us(e,t){return e?Re(Object.create(null),e,t):t}function Tr(e,t){return e?ce(e)&&ce(t)?[...new Set([...e,...t])]:Re(Object.create(null),Lr(e),Lr(t??{})):t}function Rl(e,t){if(!e)return t;if(!t)return e;const i=Re(Object.create(null),e);for(const h in t)i[h]=He(e[h],t[h]);return i}function mo(){return{app:null,config:{isNativeTag:pa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ll=0;function Dl(e,t){return function(h,d=null){he(h)||(h=Re({},h)),d!=null&&!Ce(d)&&(d=null);const m=mo(),b=new WeakSet,s=[];let n=!1;const u=m.app={_uid:Ll++,_component:h,_props:d,_container:null,_context:m,_instance:null,version:lc,get config(){return m.config},set config(f){},use(f,...l){return b.has(f)||(f&&he(f.install)?(b.add(f),f.install(u,...l)):he(f)&&(b.add(f),f(u,...l))),u},mixin(f){return m.mixins.includes(f)||m.mixins.push(f),u},component(f,l){return l?(m.components[f]=l,u):m.components[f]},directive(f,l){return l?(m.directives[f]=l,u):m.directives[f]},mount(f,l,_){if(!n){const g=u._ceVNode||de(h,d);return g.appContext=m,_===!0?_="svg":_===!1&&(_=void 0),e(g,f,_),n=!0,u._container=f,f.__vue_app__=u,_i(g.component)}},onUnmount(f){s.push(f)},unmount(){n&&(et(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,l){return m.provides[f]=l,u},runWithContext(f){const l=Yt;Yt=u;try{return f()}finally{Yt=l}}};return u}}let Yt=null;function Zt(e,t){if(Oe){let i=Oe.provides;const h=Oe.parent&&Oe.parent.provides;h===i&&(i=Oe.provides=Object.create(h)),i[e]=t}}function We(e,t,i=!1){const h=Oe||Ae;if(h||Yt){const d=Yt?Yt._context.provides:h?h.parent==null?h.vnode.appContext&&h.vnode.appContext.provides:h.parent.provides:void 0;if(d&&e in d)return d[e];if(arguments.length>1)return i&&he(t)?t.call(h&&h.proxy):t}}const So={},bo=()=>Object.create(So),Co=e=>Object.getPrototypeOf(e)===So;function Al(e,t,i,h=!1){const d={},m=bo();e.propsDefaults=Object.create(null),yo(e,t,d,m);for(const b in e.propsOptions[0])b in d||(d[b]=void 0);i?e.props=h?d:qn(d):e.type.props?e.props=d:e.props=m,e.attrs=m}function Tl(e,t,i,h){const{props:d,attrs:m,vnode:{patchFlag:b}}=e,s=ve(d),[n]=e.propsOptions;let u=!1;if((h||b>0)&&!(b&16)){if(b&8){const f=e.vnode.dynamicProps;for(let l=0;l<f.length;l++){let _=f[l];if(fi(e.emitsOptions,_))continue;const g=t[_];if(n)if(Se(m,_))g!==m[_]&&(m[_]=g,u=!0);else{const w=Je(_);d[w]=Vi(n,s,w,g,e,!1)}else g!==m[_]&&(m[_]=g,u=!0)}}}else{yo(e,t,d,m)&&(u=!0);let f;for(const l in s)(!t||!Se(t,l)&&((f=Ut(l))===l||!Se(t,f)))&&(n?i&&(i[l]!==void 0||i[f]!==void 0)&&(d[l]=Vi(n,s,l,void 0,e,!0)):delete d[l]);if(m!==s)for(const l in m)(!t||!Se(t,l))&&(delete m[l],u=!0)}u&&_t(e.attrs,"set","")}function yo(e,t,i,h){const[d,m]=e.propsOptions;let b=!1,s;if(t)for(let n in t){if(fs(n))continue;const u=t[n];let f;d&&Se(d,f=Je(n))?!m||!m.includes(f)?i[f]=u:(s||(s={}))[f]=u:fi(e.emitsOptions,n)||(!(n in h)||u!==h[n])&&(h[n]=u,b=!0)}if(m){const n=ve(i),u=s||be;for(let f=0;f<m.length;f++){const l=m[f];i[l]=Vi(d,n,l,u[l],e,!Se(u,l))}}return b}function Vi(e,t,i,h,d,m){const b=e[i];if(b!=null){const s=Se(b,"default");if(s&&h===void 0){const n=b.default;if(b.type!==Function&&!b.skipFactory&&he(n)){const{propsDefaults:u}=d;if(i in u)h=u[i];else{const f=Os(d);h=u[i]=n.call(null,t),f()}}else h=n;d.ce&&d.ce._setProp(i,h)}b[0]&&(m&&!s?h=!1:b[1]&&(h===""||h===Ut(i))&&(h=!0))}return h}const Ol=new WeakMap;function wo(e,t,i=!1){const h=i?Ol:t.propsCache,d=h.get(e);if(d)return d;const m=e.props,b={},s=[];let n=!1;if(!he(e)){const f=l=>{n=!0;const[_,g]=wo(l,t,!0);Re(b,_),g&&s.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!m&&!n)return Ce(e)&&h.set(e,Vt),Vt;if(ce(m))for(let f=0;f<m.length;f++){const l=Je(m[f]);Or(l)&&(b[l]=be)}else if(m)for(const f in m){const l=Je(f);if(Or(l)){const _=m[f],g=b[l]=ce(_)||he(_)?{type:_}:Re({},_),w=g.type;let v=!1,a=!0;if(ce(w))for(let c=0;c<w.length;++c){const r=w[c],o=he(r)&&r.name;if(o==="Boolean"){v=!0;break}else o==="String"&&(a=!1)}else v=he(w)&&w.name==="Boolean";g[0]=v,g[1]=a,(v||Se(g,"default"))&&s.push(l)}}const u=[b,s];return Ce(e)&&h.set(e,u),u}function Or(e){return e[0]!=="$"&&!fs(e)}const Eo=e=>e[0]==="_"||e==="$stable",_r=e=>ce(e)?e.map(ot):[ot(e)],Bl=(e,t,i)=>{if(t._n)return t;const h=$t((...d)=>_r(t(...d)),i);return h._c=!1,h},xo=(e,t,i)=>{const h=e._ctx;for(const d in e){if(Eo(d))continue;const m=e[d];if(he(m))t[d]=Bl(d,m,h);else if(m!=null){const b=_r(m);t[d]=()=>b}}},ko=(e,t)=>{const i=_r(t);e.slots.default=()=>i},Ro=(e,t,i)=>{for(const h in t)(i||h!=="_")&&(e[h]=t[h])},Ml=(e,t,i)=>{const h=e.slots=bo();if(e.vnode.shapeFlag&32){const d=t._;d?(Ro(h,t,i),i&&Dn(h,"_",d,!0)):xo(t,h)}else t&&ko(e,t)},Pl=(e,t,i)=>{const{vnode:h,slots:d}=e;let m=!0,b=be;if(h.shapeFlag&32){const s=t._;s?i&&s===1?m=!1:Ro(d,t,i):(m=!t.$stable,xo(t,d)),b=t}else t&&(ko(e,t),b={default:1});if(m)for(const s in d)!Eo(s)&&b[s]==null&&delete d[s]},je=Jl;function Il(e){return Hl(e)}function Hl(e,t){const i=ni();i.__VUE__=!0;const{insert:h,remove:d,patchProp:m,createElement:b,createText:s,createComment:n,setText:u,setElementText:f,parentNode:l,nextSibling:_,setScopeId:g=at,insertStaticContent:w}=e,v=(L,O,F,j=null,K=null,W=null,se=void 0,ee=null,Z=!!O.dynamicChildren)=>{if(L===O)return;L&&!Pt(L,O)&&(j=A(L),H(L,K,W,!0),L=null),O.patchFlag===-2&&(Z=!1,O.dynamicChildren=null);const{type:Y,ref:le,shapeFlag:te}=O;switch(Y){case di:a(L,O,F,j);break;case Ne:c(L,O,F,j);break;case ki:L==null&&r(O,F,j,se);break;case xe:B(L,O,F,j,K,W,se,ee,Z);break;default:te&1?C(L,O,F,j,K,W,se,ee,Z):te&6?T(L,O,F,j,K,W,se,ee,Z):(te&64||te&128)&&Y.process(L,O,F,j,K,W,se,ee,Z,$)}le!=null&&K&&Ks(le,L&&L.ref,W,O||L,!O)},a=(L,O,F,j)=>{if(L==null)h(O.el=s(O.children),F,j);else{const K=O.el=L.el;O.children!==L.children&&u(K,O.children)}},c=(L,O,F,j)=>{L==null?h(O.el=n(O.children||""),F,j):O.el=L.el},r=(L,O,F,j)=>{[L.el,L.anchor]=w(L.children,O,F,j,L.el,L.anchor)},o=({el:L,anchor:O},F,j)=>{let K;for(;L&&L!==O;)K=_(L),h(L,F,j),L=K;h(O,F,j)},p=({el:L,anchor:O})=>{let F;for(;L&&L!==O;)F=_(L),d(L),L=F;d(O)},C=(L,O,F,j,K,W,se,ee,Z)=>{O.type==="svg"?se="svg":O.type==="math"&&(se="mathml"),L==null?y(O,F,j,K,W,se,ee,Z):E(L,O,K,W,se,ee,Z)},y=(L,O,F,j,K,W,se,ee)=>{let Z,Y;const{props:le,shapeFlag:te,transition:ne,dirs:ae}=L;if(Z=L.el=b(L.type,W,le&&le.is,le),te&8?f(Z,L.children):te&16&&S(L.children,Z,null,j,K,xi(L,W),se,ee),ae&&Tt(L,null,j,"created"),x(Z,L,L.scopeId,se,j),le){for(const ge in le)ge!=="value"&&!fs(ge)&&m(Z,ge,null,le[ge],W,j);"value"in le&&m(Z,"value",null,le.value,W),(Y=le.onVnodeBeforeMount)&&it(Y,j,L)}ae&&Tt(L,null,j,"beforeMount");const ue=Fl(K,ne);ue&&ne.beforeEnter(Z),h(Z,O,F),((Y=le&&le.onVnodeMounted)||ue||ae)&&je(()=>{Y&&it(Y,j,L),ue&&ne.enter(Z),ae&&Tt(L,null,j,"mounted")},K)},x=(L,O,F,j,K)=>{if(F&&g(L,F),j)for(let W=0;W<j.length;W++)g(L,j[W]);if(K){let W=K.subTree;if(O===W||Bo(W.type)&&(W.ssContent===O||W.ssFallback===O)){const se=K.vnode;x(L,se,se.scopeId,se.slotScopeIds,K.parent)}}},S=(L,O,F,j,K,W,se,ee,Z=0)=>{for(let Y=Z;Y<L.length;Y++){const le=L[Y]=ee?Et(L[Y]):ot(L[Y]);v(null,le,O,F,j,K,W,se,ee)}},E=(L,O,F,j,K,W,se)=>{const ee=O.el=L.el;let{patchFlag:Z,dynamicChildren:Y,dirs:le}=O;Z|=L.patchFlag&16;const te=L.props||be,ne=O.props||be;let ae;if(F&&Ot(F,!1),(ae=ne.onVnodeBeforeUpdate)&&it(ae,F,O,L),le&&Tt(O,L,F,"beforeUpdate"),F&&Ot(F,!0),(te.innerHTML&&ne.innerHTML==null||te.textContent&&ne.textContent==null)&&f(ee,""),Y?D(L.dynamicChildren,Y,ee,F,j,xi(O,K),W):se||V(L,O,ee,null,F,j,xi(O,K),W,!1),Z>0){if(Z&16)P(ee,te,ne,F,K);else if(Z&2&&te.class!==ne.class&&m(ee,"class",null,ne.class,K),Z&4&&m(ee,"style",te.style,ne.style,K),Z&8){const ue=O.dynamicProps;for(let ge=0;ge<ue.length;ge++){const fe=ue[ge],Le=te[fe],we=ne[fe];(we!==Le||fe==="value")&&m(ee,fe,Le,we,K,F)}}Z&1&&L.children!==O.children&&f(ee,O.children)}else!se&&Y==null&&P(ee,te,ne,F,K);((ae=ne.onVnodeUpdated)||le)&&je(()=>{ae&&it(ae,F,O,L),le&&Tt(O,L,F,"updated")},j)},D=(L,O,F,j,K,W,se)=>{for(let ee=0;ee<O.length;ee++){const Z=L[ee],Y=O[ee],le=Z.el&&(Z.type===xe||!Pt(Z,Y)||Z.shapeFlag&70)?l(Z.el):F;v(Z,Y,le,null,j,K,W,se,!0)}},P=(L,O,F,j,K)=>{if(O!==F){if(O!==be)for(const W in O)!fs(W)&&!(W in F)&&m(L,W,O[W],null,K,j);for(const W in F){if(fs(W))continue;const se=F[W],ee=O[W];se!==ee&&W!=="value"&&m(L,W,ee,se,K,j)}"value"in F&&m(L,"value",O.value,F.value,K)}},B=(L,O,F,j,K,W,se,ee,Z)=>{const Y=O.el=L?L.el:s(""),le=O.anchor=L?L.anchor:s("");let{patchFlag:te,dynamicChildren:ne,slotScopeIds:ae}=O;ae&&(ee=ee?ee.concat(ae):ae),L==null?(h(Y,F,j),h(le,F,j),S(O.children||[],F,le,K,W,se,ee,Z)):te>0&&te&64&&ne&&L.dynamicChildren?(D(L.dynamicChildren,ne,F,K,W,se,ee),(O.key!=null||K&&O===K.subTree)&&Lo(L,O,!0)):V(L,O,F,le,K,W,se,ee,Z)},T=(L,O,F,j,K,W,se,ee,Z)=>{O.slotScopeIds=ee,L==null?O.shapeFlag&512?K.ctx.activate(O,F,j,se,Z):U(O,F,j,K,W,se,Z):z(L,O,Z)},U=(L,O,F,j,K,W,se)=>{const ee=L.component=tc(L,j,K);if(hi(L)&&(ee.ctx.renderer=$),sc(ee,!1,se),ee.asyncDep){if(K&&K.registerDep(ee,G,se),!L.el){const Z=ee.subTree=de(Ne);c(null,Z,O,F)}}else G(ee,L,O,F,K,W,se)},z=(L,O,F)=>{const j=O.component=L.component;if(ql(L,O,F))if(j.asyncDep&&!j.asyncResolved){J(j,O,F);return}else j.next=O,j.update();else O.el=L.el,j.vnode=O},G=(L,O,F,j,K,W,se)=>{const ee=()=>{if(L.isMounted){let{next:te,bu:ne,u:ae,parent:ue,vnode:ge}=L;{const _e=Do(L);if(_e){te&&(te.el=ge.el,J(L,te,se)),_e.asyncDep.then(()=>{L.isUnmounted||ee()});return}}let fe=te,Le;Ot(L,!1),te?(te.el=ge.el,J(L,te,se)):te=ge,ne&&Fs(ne),(Le=te.props&&te.props.onVnodeBeforeUpdate)&&it(Le,ue,te,ge),Ot(L,!0);const we=Mr(L),Be=L.subTree;L.subTree=we,v(Be,we,l(Be.el),A(Be),L,K,W),te.el=we.el,fe===null&&Gl(L,we.el),ae&&je(ae,K),(Le=te.props&&te.props.onVnodeUpdated)&&je(()=>it(Le,ue,te,ge),K)}else{let te;const{el:ne,props:ae}=O,{bm:ue,m:ge,parent:fe,root:Le,type:we}=L,Be=Xt(O);Ot(L,!1),ue&&Fs(ue),!Be&&(te=ae&&ae.onVnodeBeforeMount)&&it(te,fe,O),Ot(L,!0);{Le.ce&&Le.ce._injectChildStyle(we);const _e=L.subTree=Mr(L);v(null,_e,F,j,L,K,W),O.el=_e.el}if(ge&&je(ge,K),!Be&&(te=ae&&ae.onVnodeMounted)){const _e=O;je(()=>it(te,fe,_e),K)}(O.shapeFlag&256||fe&&Xt(fe.vnode)&&fe.vnode.shapeFlag&256)&&L.a&&je(L.a,K),L.isMounted=!0,O=F=j=null}};L.scope.on();const Z=L.effect=new Bn(ee);L.scope.off();const Y=L.update=Z.run.bind(Z),le=L.job=Z.runIfDirty.bind(Z);le.i=L,le.id=L.uid,Z.scheduler=()=>ur(le),Ot(L,!0),Y()},J=(L,O,F)=>{O.component=L;const j=L.vnode.props;L.vnode=O,L.next=null,Tl(L,O.props,j,F),Pl(L,O.children,F),Lt(),xr(L),Dt()},V=(L,O,F,j,K,W,se,ee,Z=!1)=>{const Y=L&&L.children,le=L?L.shapeFlag:0,te=O.children,{patchFlag:ne,shapeFlag:ae}=O;if(ne>0){if(ne&128){M(Y,te,F,j,K,W,se,ee,Z);return}else if(ne&256){R(Y,te,F,j,K,W,se,ee,Z);return}}ae&8?(le&16&&re(Y,K,W),te!==Y&&f(F,te)):le&16?ae&16?M(Y,te,F,j,K,W,se,ee,Z):re(Y,K,W,!0):(le&8&&f(F,""),ae&16&&S(te,F,j,K,W,se,ee,Z))},R=(L,O,F,j,K,W,se,ee,Z)=>{L=L||Vt,O=O||Vt;const Y=L.length,le=O.length,te=Math.min(Y,le);let ne;for(ne=0;ne<te;ne++){const ae=O[ne]=Z?Et(O[ne]):ot(O[ne]);v(L[ne],ae,F,null,K,W,se,ee,Z)}Y>le?re(L,K,W,!0,!1,te):S(O,F,j,K,W,se,ee,Z,te)},M=(L,O,F,j,K,W,se,ee,Z)=>{let Y=0;const le=O.length;let te=L.length-1,ne=le-1;for(;Y<=te&&Y<=ne;){const ae=L[Y],ue=O[Y]=Z?Et(O[Y]):ot(O[Y]);if(Pt(ae,ue))v(ae,ue,F,null,K,W,se,ee,Z);else break;Y++}for(;Y<=te&&Y<=ne;){const ae=L[te],ue=O[ne]=Z?Et(O[ne]):ot(O[ne]);if(Pt(ae,ue))v(ae,ue,F,null,K,W,se,ee,Z);else break;te--,ne--}if(Y>te){if(Y<=ne){const ae=ne+1,ue=ae<le?O[ae].el:j;for(;Y<=ne;)v(null,O[Y]=Z?Et(O[Y]):ot(O[Y]),F,ue,K,W,se,ee,Z),Y++}}else if(Y>ne)for(;Y<=te;)H(L[Y],K,W,!0),Y++;else{const ae=Y,ue=Y,ge=new Map;for(Y=ue;Y<=ne;Y++){const Ue=O[Y]=Z?Et(O[Y]):ot(O[Y]);Ue.key!=null&&ge.set(Ue.key,Y)}let fe,Le=0;const we=ne-ue+1;let Be=!1,_e=0;const At=new Array(we);for(Y=0;Y<we;Y++)At[Y]=0;for(Y=ae;Y<=te;Y++){const Ue=L[Y];if(Le>=we){H(Ue,K,W,!0);continue}let st;if(Ue.key!=null)st=ge.get(Ue.key);else for(fe=ue;fe<=ne;fe++)if(At[fe-ue]===0&&Pt(Ue,O[fe])){st=fe;break}st===void 0?H(Ue,K,W,!0):(At[st-ue]=Y+1,st>=_e?_e=st:Be=!0,v(Ue,O[st],F,null,K,W,se,ee,Z),Le++)}const Sr=Be?$l(At):Vt;for(fe=Sr.length-1,Y=we-1;Y>=0;Y--){const Ue=ue+Y,st=O[Ue],br=Ue+1<le?O[Ue+1].el:j;At[Y]===0?v(null,st,F,br,K,W,se,ee,Z):Be&&(fe<0||Y!==Sr[fe]?I(st,F,br,2):fe--)}}},I=(L,O,F,j,K=null)=>{const{el:W,type:se,transition:ee,children:Z,shapeFlag:Y}=L;if(Y&6){I(L.component.subTree,O,F,j);return}if(Y&128){L.suspense.move(O,F,j);return}if(Y&64){se.move(L,O,F,$);return}if(se===xe){h(W,O,F);for(let te=0;te<Z.length;te++)I(Z[te],O,F,j);h(L.anchor,O,F);return}if(se===ki){o(L,O,F);return}if(j!==2&&Y&1&&ee)if(j===0)ee.beforeEnter(W),h(W,O,F),je(()=>ee.enter(W),K);else{const{leave:te,delayLeave:ne,afterLeave:ae}=ee,ue=()=>h(W,O,F),ge=()=>{te(W,()=>{ue(),ae&&ae()})};ne?ne(W,ue,ge):ge()}else h(W,O,F)},H=(L,O,F,j=!1,K=!1)=>{const{type:W,props:se,ref:ee,children:Z,dynamicChildren:Y,shapeFlag:le,patchFlag:te,dirs:ne,cacheIndex:ae}=L;if(te===-2&&(K=!1),ee!=null&&Ks(ee,null,F,L,!0),ae!=null&&(O.renderCache[ae]=void 0),le&256){O.ctx.deactivate(L);return}const ue=le&1&&ne,ge=!Xt(L);let fe;if(ge&&(fe=se&&se.onVnodeBeforeUnmount)&&it(fe,O,L),le&6)oe(L.component,F,j);else{if(le&128){L.suspense.unmount(F,j);return}ue&&Tt(L,null,O,"beforeUnmount"),le&64?L.type.remove(L,O,F,$,j):Y&&!Y.hasOnce&&(W!==xe||te>0&&te&64)?re(Y,O,F,!1,!0):(W===xe&&te&384||!K&&le&16)&&re(Z,O,F),j&&q(L)}(ge&&(fe=se&&se.onVnodeUnmounted)||ue)&&je(()=>{fe&&it(fe,O,L),ue&&Tt(L,null,O,"unmounted")},F)},q=L=>{const{type:O,el:F,anchor:j,transition:K}=L;if(O===xe){Q(F,j);return}if(O===ki){p(L);return}const W=()=>{d(F),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(L.shapeFlag&1&&K&&!K.persisted){const{leave:se,delayLeave:ee}=K,Z=()=>se(F,W);ee?ee(L.el,W,Z):Z()}else W()},Q=(L,O)=>{let F;for(;L!==O;)F=_(L),d(L),L=F;d(O)},oe=(L,O,F)=>{const{bum:j,scope:K,job:W,subTree:se,um:ee,m:Z,a:Y}=L;Br(Z),Br(Y),j&&Fs(j),K.stop(),W&&(W.flags|=8,H(se,L,O,F)),ee&&je(ee,O),je(()=>{L.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},re=(L,O,F,j=!1,K=!1,W=0)=>{for(let se=W;se<L.length;se++)H(L[se],O,F,j,K)},A=L=>{if(L.shapeFlag&6)return A(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const O=_(L.anchor||L.el),F=O&&O[ol];return F?_(F):O};let k=!1;const N=(L,O,F)=>{L==null?O._vnode&&H(O._vnode,null,null,!0):v(O._vnode||null,L,O,null,null,null,F),O._vnode=L,k||(k=!0,xr(),Qn(),k=!1)},$={p:v,um:H,m:I,r:q,mt:U,mc:S,pc:V,pbc:D,n:A,o:e};return{render:N,hydrate:void 0,createApp:Dl(N)}}function xi({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Ot({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Fl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Lo(e,t,i=!1){const h=e.children,d=t.children;if(ce(h)&&ce(d))for(let m=0;m<h.length;m++){const b=h[m];let s=d[m];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=d[m]=Et(d[m]),s.el=b.el),!i&&s.patchFlag!==-2&&Lo(b,s)),s.type===di&&(s.el=b.el)}}function $l(e){const t=e.slice(),i=[0];let h,d,m,b,s;const n=e.length;for(h=0;h<n;h++){const u=e[h];if(u!==0){if(d=i[i.length-1],e[d]<u){t[h]=d,i.push(h);continue}for(m=0,b=i.length-1;m<b;)s=m+b>>1,e[i[s]]<u?m=s+1:b=s;u<e[i[m]]&&(m>0&&(t[h]=i[m-1]),i[m]=h)}}for(m=i.length,b=i[m-1];m-- >0;)i[m]=b,b=t[b];return i}function Do(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Do(t)}function Br(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Nl=Symbol.for("v-scx"),Wl=()=>We(Nl);function vs(e,t,i){return Ao(e,t,i)}function Ao(e,t,i=be){const{immediate:h,deep:d,flush:m,once:b}=i,s=Re({},i),n=t&&h||!t&&m!=="post";let u;if(ks){if(m==="sync"){const g=Wl();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!n){const g=()=>{};return g.stop=at,g.resume=at,g.pause=at,g}}const f=Oe;s.call=(g,w,v)=>et(g,f,w,v);let l=!1;m==="post"?s.scheduler=g=>{je(g,f&&f.suspense)}:m!=="sync"&&(l=!0,s.scheduler=(g,w)=>{w?g():ur(g)}),s.augmentJob=g=>{t&&(g.flags|=4),l&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const _=sl(e,t,s);return ks&&(u?u.push(_):n&&_()),_}function Ul(e,t,i){const h=this.proxy,d=ke(e)?e.includes(".")?To(h,e):()=>h[e]:e.bind(h,h);let m;he(t)?m=t:(m=t.handler,i=t);const b=Os(this),s=Ao(d,m.bind(h),i);return b(),s}function To(e,t){const i=t.split(".");return()=>{let h=e;for(let d=0;d<i.length&&h;d++)h=h[i[d]];return h}}const jl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Je(t)}Modifiers`]||e[`${Ut(t)}Modifiers`];function zl(e,t,...i){if(e.isUnmounted)return;const h=e.vnode.props||be;let d=i;const m=t.startsWith("update:"),b=m&&jl(h,t.slice(7));b&&(b.trim&&(d=i.map(f=>ke(f)?f.trim():f)),b.number&&(d=i.map(Ws)));let s,n=h[s=mi(t)]||h[s=mi(Je(t))];!n&&m&&(n=h[s=mi(Ut(t))]),n&&et(n,e,6,d);const u=h[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,et(u,e,6,d)}}function Oo(e,t,i=!1){const h=t.emitsCache,d=h.get(e);if(d!==void 0)return d;const m=e.emits;let b={},s=!1;if(!he(e)){const n=u=>{const f=Oo(u,t,!0);f&&(s=!0,Re(b,f))};!i&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!m&&!s?(Ce(e)&&h.set(e,null),null):(ce(m)?m.forEach(n=>b[n]=null):Re(b,m),Ce(e)&&h.set(e,b),b)}function fi(e,t){return!e||!ti(t)?!1:(t=t.slice(2).replace(/Once$/,""),Se(e,t[0].toLowerCase()+t.slice(1))||Se(e,Ut(t))||Se(e,t))}function Mr(e){const{type:t,vnode:i,proxy:h,withProxy:d,propsOptions:[m],slots:b,attrs:s,emit:n,render:u,renderCache:f,props:l,data:_,setupState:g,ctx:w,inheritAttrs:v}=e,a=zs(e);let c,r;try{if(i.shapeFlag&4){const p=d||h,C=p;c=ot(u.call(C,p,f,l,g,_,w)),r=s}else{const p=t;c=ot(p.length>1?p(l,{attrs:s,slots:b,emit:n}):p(l,null)),r=t.props?s:Kl(s)}}catch(p){gs.length=0,ci(p,e,1),c=de(Ne)}let o=c;if(r&&v!==!1){const p=Object.keys(r),{shapeFlag:C}=o;p.length&&C&7&&(m&&p.some(er)&&(r=Vl(r,m)),o=Rt(o,r,!1,!0))}return i.dirs&&(o=Rt(o,null,!1,!0),o.dirs=o.dirs?o.dirs.concat(i.dirs):i.dirs),i.transition&&Wt(o,i.transition),c=o,zs(a),c}const Kl=e=>{let t;for(const i in e)(i==="class"||i==="style"||ti(i))&&((t||(t={}))[i]=e[i]);return t},Vl=(e,t)=>{const i={};for(const h in e)(!er(h)||!(h.slice(9)in t))&&(i[h]=e[h]);return i};function ql(e,t,i){const{props:h,children:d,component:m}=e,{props:b,children:s,patchFlag:n}=t,u=m.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&n>=0){if(n&1024)return!0;if(n&16)return h?Pr(h,b,u):!!b;if(n&8){const f=t.dynamicProps;for(let l=0;l<f.length;l++){const _=f[l];if(b[_]!==h[_]&&!fi(u,_))return!0}}}else return(d||s)&&(!s||!s.$stable)?!0:h===b?!1:h?b?Pr(h,b,u):!0:!!b;return!1}function Pr(e,t,i){const h=Object.keys(t);if(h.length!==Object.keys(e).length)return!0;for(let d=0;d<h.length;d++){const m=h[d];if(t[m]!==e[m]&&!fi(i,m))return!0}return!1}function Gl({vnode:e,parent:t},i){for(;t;){const h=t.subTree;if(h.suspense&&h.suspense.activeBranch===e&&(h.el=e.el),h===e)(e=t.vnode).el=i,t=t.parent;else break}}const Bo=e=>e.__isSuspense;function Jl(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):nl(e)}const xe=Symbol.for("v-fgt"),di=Symbol.for("v-txt"),Ne=Symbol.for("v-cmt"),ki=Symbol.for("v-stc"),gs=[];let Ke=null;function pe(e=!1){gs.push(Ke=e?null:[])}function Xl(){gs.pop(),Ke=gs[gs.length-1]||null}let xs=1;function Ir(e,t=!1){xs+=e,e<0&&Ke&&t&&(Ke.hasOnce=!0)}function Mo(e){return e.dynamicChildren=xs>0?Ke||Vt:null,Xl(),xs>0&&Ke&&Ke.push(e),e}function Ee(e,t,i,h,d,m){return Mo(ie(e,t,i,h,d,m,!0))}function lt(e,t,i,h,d){return Mo(de(e,t,i,h,d,!0))}function ss(e){return e?e.__v_isVNode===!0:!1}function Pt(e,t){return e.type===t.type&&e.key===t.key}const Po=({key:e})=>e??null,$s=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||Ie(e)||he(e)?{i:Ae,r:e,k:t,f:!!i}:e:null);function ie(e,t=null,i=null,h=0,d=null,m=e===xe?0:1,b=!1,s=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Po(t),ref:t&&$s(t),scopeId:to,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:h,dynamicProps:d,dynamicChildren:null,appContext:null,ctx:Ae};return s?(pr(n,i),m&128&&e.normalize(n)):i&&(n.shapeFlag|=ke(i)?8:16),xs>0&&!b&&Ke&&(n.patchFlag>0||m&6)&&n.patchFlag!==32&&Ke.push(n),n}const de=Yl;function Yl(e,t=null,i=null,h=0,d=null,m=!1){if((!e||e===bl)&&(e=Ne),ss(e)){const s=Rt(e,t,!0);return i&&pr(s,i),xs>0&&!m&&Ke&&(s.shapeFlag&6?Ke[Ke.indexOf(e)]=s:Ke.push(s)),s.patchFlag=-2,s}if(ac(e)&&(e=e.__vccOpts),t){t=Zl(t);let{class:s,style:n}=t;s&&!ke(s)&&(t.class=ts(s)),Ce(n)&&(cr(n)&&!ce(n)&&(n=Re({},n)),t.style=bs(n))}const b=ke(e)?1:Bo(e)?128:so(e)?64:Ce(e)?4:he(e)?2:0;return ie(e,t,i,h,d,b,m,!0)}function Zl(e){return e?cr(e)||Co(e)?Re({},e):e:null}function Rt(e,t,i=!1,h=!1){const{props:d,ref:m,patchFlag:b,children:s,transition:n}=e,u=t?Io(d||{},t):d,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Po(u),ref:t&&t.ref?i&&m?ce(m)?m.concat($s(t)):[m,$s(t)]:$s(t):m,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?b===-1?16:b|16:b,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:n,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rt(e.ssContent),ssFallback:e.ssFallback&&Rt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return n&&h&&Wt(f,n.clone(f)),f}function ft(e=" ",t=0){return de(di,null,e,t)}function vt(e="",t=!1){return t?(pe(),lt(Ne,null,e)):de(Ne,null,e)}function ot(e){return e==null||typeof e=="boolean"?de(Ne):ce(e)?de(xe,null,e.slice()):ss(e)?Et(e):de(di,null,String(e))}function Et(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rt(e)}function pr(e,t){let i=0;const{shapeFlag:h}=e;if(t==null)t=null;else if(ce(t))i=16;else if(typeof t=="object")if(h&65){const d=t.default;d&&(d._c&&(d._d=!1),pr(e,d()),d._c&&(d._d=!0));return}else{i=32;const d=t._;!d&&!Co(t)?t._ctx=Ae:d===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:Ae},i=32):(t=String(t),h&64?(i=16,t=[ft(t)]):i=8);e.children=t,e.shapeFlag|=i}function Io(...e){const t={};for(let i=0;i<e.length;i++){const h=e[i];for(const d in h)if(d==="class")t.class!==h.class&&(t.class=ts([t.class,h.class]));else if(d==="style")t.style=bs([t.style,h.style]);else if(ti(d)){const m=t[d],b=h[d];b&&m!==b&&!(ce(m)&&m.includes(b))&&(t[d]=m?[].concat(m,b):b)}else d!==""&&(t[d]=h[d])}return t}function it(e,t,i,h=null){et(e,t,7,[i,h])}const Ql=mo();let ec=0;function tc(e,t,i){const h=e.type,d=(t?t.appContext:e.appContext)||Ql,m={uid:ec++,vnode:e,type:h,parent:t,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Da(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(d.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wo(h,d),emitsOptions:Oo(h,d),emit:null,emitted:null,propsDefaults:be,inheritAttrs:h.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=t?t.root:m,m.emit=zl.bind(null,m),e.ce&&e.ce(m),m}let Oe=null;const Ho=()=>Oe||Ae;let Gs,qi;{const e=ni(),t=(i,h)=>{let d;return(d=e[i])||(d=e[i]=[]),d.push(h),m=>{d.length>1?d.forEach(b=>b(m)):d[0](m)}};Gs=t("__VUE_INSTANCE_SETTERS__",i=>Oe=i),qi=t("__VUE_SSR_SETTERS__",i=>ks=i)}const Os=e=>{const t=Oe;return Gs(e),e.scope.on(),()=>{e.scope.off(),Gs(t)}},Hr=()=>{Oe&&Oe.scope.off(),Gs(null)};function Fo(e){return e.vnode.shapeFlag&4}let ks=!1;function sc(e,t=!1,i=!1){t&&qi(t);const{props:h,children:d}=e.vnode,m=Fo(e);Al(e,h,m,t),Ml(e,d,i);const b=m?ic(e,t):void 0;return t&&qi(!1),b}function ic(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,yl);const{setup:h}=i;if(h){Lt();const d=e.setupContext=h.length>1?nc(e):null,m=Os(e),b=As(h,e,0,[e.props,d]),s=kn(b);if(Dt(),m(),(s||e.sp)&&!Xt(e)&&lo(e),s){if(b.then(Hr,Hr),t)return b.then(n=>{Fr(e,n)}).catch(n=>{ci(n,e,0)});e.asyncDep=b}else Fr(e,b)}else $o(e)}function Fr(e,t,i){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=Xn(t)),$o(e)}function $o(e,t,i){const h=e.type;e.render||(e.render=h.render||at);{const d=Os(e);Lt();try{wl(e)}finally{Dt(),d()}}}const rc={get(e,t){return Me(e,"get",""),e[t]}};function nc(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,rc),slots:e.slots,emit:e.emit,expose:t}}function _i(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xn(Ja(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in ps)return ps[i](e)},has(t,i){return i in t||i in ps}})):e.proxy}function oc(e,t=!0){return he(e)?e.displayName||e.name:e.name||t&&e.__name}function ac(e){return he(e)&&"__vccOpts"in e}const De=(e,t)=>el(e,t,ks);function vr(e,t,i){const h=arguments.length;return h===2?Ce(t)&&!ce(t)?ss(t)?de(e,null,[t]):de(e,t):de(e,null,t):(h>3?i=Array.prototype.slice.call(arguments,2):h===3&&ss(i)&&(i=[i]),de(e,t,i))}const lc="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gi;const $r=typeof window<"u"&&window.trustedTypes;if($r)try{Gi=$r.createPolicy("vue",{createHTML:e=>e})}catch{}const No=Gi?e=>Gi.createHTML(e):e=>e,cc="http://www.w3.org/2000/svg",hc="http://www.w3.org/1998/Math/MathML",ut=typeof document<"u"?document:null,Nr=ut&&ut.createElement("template"),uc={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,h)=>{const d=t==="svg"?ut.createElementNS(cc,e):t==="mathml"?ut.createElementNS(hc,e):i?ut.createElement(e,{is:i}):ut.createElement(e);return e==="select"&&h&&h.multiple!=null&&d.setAttribute("multiple",h.multiple),d},createText:e=>ut.createTextNode(e),createComment:e=>ut.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ut.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,h,d,m){const b=i?i.previousSibling:t.lastChild;if(d&&(d===m||d.nextSibling))for(;t.insertBefore(d.cloneNode(!0),i),!(d===m||!(d=d.nextSibling)););else{Nr.innerHTML=No(h==="svg"?`<svg>${e}</svg>`:h==="mathml"?`<math>${e}</math>`:e);const s=Nr.content;if(h==="svg"||h==="mathml"){const n=s.firstChild;for(;n.firstChild;)s.appendChild(n.firstChild);s.removeChild(n)}t.insertBefore(s,i)}return[b?b.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},St="transition",ls="animation",is=Symbol("_vtc"),Wo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Uo=Re({},ro,Wo),fc=e=>(e.displayName="Transition",e.props=Uo,e),dc=fc((e,{slots:t})=>vr(ll,jo(e),t)),Bt=(e,t=[])=>{ce(e)?e.forEach(i=>i(...t)):e&&e(...t)},Wr=e=>e?ce(e)?e.some(t=>t.length>1):e.length>1:!1;function jo(e){const t={};for(const B in e)B in Wo||(t[B]=e[B]);if(e.css===!1)return t;const{name:i="v",type:h,duration:d,enterFromClass:m=`${i}-enter-from`,enterActiveClass:b=`${i}-enter-active`,enterToClass:s=`${i}-enter-to`,appearFromClass:n=m,appearActiveClass:u=b,appearToClass:f=s,leaveFromClass:l=`${i}-leave-from`,leaveActiveClass:_=`${i}-leave-active`,leaveToClass:g=`${i}-leave-to`}=e,w=_c(d),v=w&&w[0],a=w&&w[1],{onBeforeEnter:c,onEnter:r,onEnterCancelled:o,onLeave:p,onLeaveCancelled:C,onBeforeAppear:y=c,onAppear:x=r,onAppearCancelled:S=o}=t,E=(B,T,U,z)=>{B._enterCancelled=z,Ct(B,T?f:s),Ct(B,T?u:b),U&&U()},D=(B,T)=>{B._isLeaving=!1,Ct(B,l),Ct(B,g),Ct(B,_),T&&T()},P=B=>(T,U)=>{const z=B?x:r,G=()=>E(T,B,U);Bt(z,[T,G]),Ur(()=>{Ct(T,B?n:m),rt(T,B?f:s),Wr(z)||jr(T,h,v,G)})};return Re(t,{onBeforeEnter(B){Bt(c,[B]),rt(B,m),rt(B,b)},onBeforeAppear(B){Bt(y,[B]),rt(B,n),rt(B,u)},onEnter:P(!1),onAppear:P(!0),onLeave(B,T){B._isLeaving=!0;const U=()=>D(B,T);rt(B,l),B._enterCancelled?(rt(B,_),Ji()):(Ji(),rt(B,_)),Ur(()=>{B._isLeaving&&(Ct(B,l),rt(B,g),Wr(p)||jr(B,h,a,U))}),Bt(p,[B,U])},onEnterCancelled(B){E(B,!1,void 0,!0),Bt(o,[B])},onAppearCancelled(B){E(B,!0,void 0,!0),Bt(S,[B])},onLeaveCancelled(B){D(B),Bt(C,[B])}})}function _c(e){if(e==null)return null;if(Ce(e))return[Ri(e.enter),Ri(e.leave)];{const t=Ri(e);return[t,t]}}function Ri(e){return ba(e)}function rt(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[is]||(e[is]=new Set)).add(t)}function Ct(e,t){t.split(/\s+/).forEach(h=>h&&e.classList.remove(h));const i=e[is];i&&(i.delete(t),i.size||(e[is]=void 0))}function Ur(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let pc=0;function jr(e,t,i,h){const d=e._endId=++pc,m=()=>{d===e._endId&&h()};if(i!=null)return setTimeout(m,i);const{type:b,timeout:s,propCount:n}=zo(e,t);if(!b)return h();const u=b+"end";let f=0;const l=()=>{e.removeEventListener(u,_),m()},_=g=>{g.target===e&&++f>=n&&l()};setTimeout(()=>{f<n&&l()},s+1),e.addEventListener(u,_)}function zo(e,t){const i=window.getComputedStyle(e),h=w=>(i[w]||"").split(", "),d=h(`${St}Delay`),m=h(`${St}Duration`),b=zr(d,m),s=h(`${ls}Delay`),n=h(`${ls}Duration`),u=zr(s,n);let f=null,l=0,_=0;t===St?b>0&&(f=St,l=b,_=m.length):t===ls?u>0&&(f=ls,l=u,_=n.length):(l=Math.max(b,u),f=l>0?b>u?St:ls:null,_=f?f===St?m.length:n.length:0);const g=f===St&&/\b(transform|all)(,|$)/.test(h(`${St}Property`).toString());return{type:f,timeout:l,propCount:_,hasTransform:g}}function zr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,h)=>Kr(i)+Kr(e[h])))}function Kr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ji(){return document.body.offsetHeight}function vc(e,t,i){const h=e[is];h&&(t=(t?[t,...h]:[...h]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Js=Symbol("_vod"),Ko=Symbol("_vsh"),Xs={beforeMount(e,{value:t},{transition:i}){e[Js]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):cs(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:h}){!t!=!i&&(h?t?(h.beforeEnter(e),cs(e,!0),h.enter(e)):h.leave(e,()=>{cs(e,!1)}):cs(e,t))},beforeUnmount(e,{value:t}){cs(e,t)}};function cs(e,t){e.style.display=t?e[Js]:"none",e[Ko]=!t}const gc=Symbol(""),mc=/(^|;)\s*display\s*:/;function Sc(e,t,i){const h=e.style,d=ke(i);let m=!1;if(i&&!d){if(t)if(ke(t))for(const b of t.split(";")){const s=b.slice(0,b.indexOf(":")).trim();i[s]==null&&Ns(h,s,"")}else for(const b in t)i[b]==null&&Ns(h,b,"");for(const b in i)b==="display"&&(m=!0),Ns(h,b,i[b])}else if(d){if(t!==i){const b=h[gc];b&&(i+=";"+b),h.cssText=i,m=mc.test(i)}}else t&&e.removeAttribute("style");Js in e&&(e[Js]=m?h.display:"",e[Ko]&&(h.display="none"))}const Vr=/\s*!important$/;function Ns(e,t,i){if(ce(i))i.forEach(h=>Ns(e,t,h));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const h=bc(e,t);Vr.test(i)?e.setProperty(Ut(h),i.replace(Vr,""),"important"):e[h]=i}}const qr=["Webkit","Moz","ms"],Li={};function bc(e,t){const i=Li[t];if(i)return i;let h=Je(t);if(h!=="filter"&&h in e)return Li[t]=h;h=ri(h);for(let d=0;d<qr.length;d++){const m=qr[d]+h;if(m in e)return Li[t]=m}return t}const Gr="http://www.w3.org/1999/xlink";function Jr(e,t,i,h,d,m=ka(t)){h&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Gr,t.slice(6,t.length)):e.setAttributeNS(Gr,t,i):i==null||m&&!An(i)?e.removeAttribute(t):e.setAttribute(t,m?"":Qe(i)?String(i):i)}function Xr(e,t,i,h,d){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?No(i):i);return}const m=e.tagName;if(t==="value"&&m!=="PROGRESS"&&!m.includes("-")){const s=m==="OPTION"?e.getAttribute("value")||"":e.value,n=i==null?e.type==="checkbox"?"on":"":String(i);(s!==n||!("_value"in e))&&(e.value=n),i==null&&e.removeAttribute(t),e._value=i;return}let b=!1;if(i===""||i==null){const s=typeof e[t];s==="boolean"?i=An(i):i==null&&s==="string"?(i="",b=!0):s==="number"&&(i=0,b=!0)}try{e[t]=i}catch{}b&&e.removeAttribute(d||t)}function It(e,t,i,h){e.addEventListener(t,i,h)}function Cc(e,t,i,h){e.removeEventListener(t,i,h)}const Yr=Symbol("_vei");function yc(e,t,i,h,d=null){const m=e[Yr]||(e[Yr]={}),b=m[t];if(h&&b)b.value=h;else{const[s,n]=wc(t);if(h){const u=m[t]=kc(h,d);It(e,s,u,n)}else b&&(Cc(e,s,b,n),m[t]=void 0)}}const Zr=/(?:Once|Passive|Capture)$/;function wc(e){let t;if(Zr.test(e)){t={};let h;for(;h=e.match(Zr);)e=e.slice(0,e.length-h[0].length),t[h[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ut(e.slice(2)),t]}let Di=0;const Ec=Promise.resolve(),xc=()=>Di||(Ec.then(()=>Di=0),Di=Date.now());function kc(e,t){const i=h=>{if(!h._vts)h._vts=Date.now();else if(h._vts<=i.attached)return;et(Rc(h,i.value),t,5,[h])};return i.value=e,i.attached=xc(),i}function Rc(e,t){if(ce(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(h=>d=>!d._stopped&&h&&h(d))}else return t}const Qr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Lc=(e,t,i,h,d,m)=>{const b=d==="svg";t==="class"?vc(e,h,b):t==="style"?Sc(e,i,h):ti(t)?er(t)||yc(e,t,i,h,m):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Dc(e,t,h,b))?(Xr(e,t,h),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Jr(e,t,h,b,m,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ke(h))?Xr(e,Je(t),h,m,t):(t==="true-value"?e._trueValue=h:t==="false-value"&&(e._falseValue=h),Jr(e,t,h,b))};function Dc(e,t,i,h){if(h)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qr(t)&&he(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const d=e.tagName;if(d==="IMG"||d==="VIDEO"||d==="CANVAS"||d==="SOURCE")return!1}return Qr(t)&&ke(i)?!1:t in e}const Vo=new WeakMap,qo=new WeakMap,Ys=Symbol("_moveCb"),en=Symbol("_enterCb"),Ac=e=>(delete e.props.mode,e),Tc=Ac({name:"TransitionGroup",props:Re({},Uo,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=Ho(),h=io();let d,m;return ho(()=>{if(!d.length)return;const b=e.moveClass||`${e.name||"v"}-move`;if(!Ic(d[0].el,i.vnode.el,b))return;d.forEach(Bc),d.forEach(Mc);const s=d.filter(Pc);Ji(),s.forEach(n=>{const u=n.el,f=u.style;rt(u,b),f.transform=f.webkitTransform=f.transitionDuration="";const l=u[Ys]=_=>{_&&_.target!==u||(!_||/transform$/.test(_.propertyName))&&(u.removeEventListener("transitionend",l),u[Ys]=null,Ct(u,b))};u.addEventListener("transitionend",l)})}),()=>{const b=ve(e),s=jo(b);let n=b.tag||xe;if(d=[],m)for(let u=0;u<m.length;u++){const f=m[u];f.el&&f.el instanceof Element&&(d.push(f),Wt(f,Es(f,s,h,i)),Vo.set(f,f.el.getBoundingClientRect()))}m=t.default?fr(t.default()):[];for(let u=0;u<m.length;u++){const f=m[u];f.key!=null&&Wt(f,Es(f,s,h,i))}return de(n,null,m)}}}),Oc=Tc;function Bc(e){const t=e.el;t[Ys]&&t[Ys](),t[en]&&t[en]()}function Mc(e){qo.set(e,e.el.getBoundingClientRect())}function Pc(e){const t=Vo.get(e),i=qo.get(e),h=t.left-i.left,d=t.top-i.top;if(h||d){const m=e.el.style;return m.transform=m.webkitTransform=`translate(${h}px,${d}px)`,m.transitionDuration="0s",e}}function Ic(e,t,i){const h=e.cloneNode(),d=e[is];d&&d.forEach(s=>{s.split(/\s+/).forEach(n=>n&&h.classList.remove(n))}),i.split(/\s+/).forEach(s=>s&&h.classList.add(s)),h.style.display="none";const m=t.nodeType===1?t:t.parentNode;m.appendChild(h);const{hasTransform:b}=zo(h);return m.removeChild(h),b}const Zs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ce(t)?i=>Fs(t,i):t};function Hc(e){e.target.composing=!0}function tn(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qt=Symbol("_assign"),Ht={created(e,{modifiers:{lazy:t,trim:i,number:h}},d){e[Qt]=Zs(d);const m=h||d.props&&d.props.type==="number";It(e,t?"change":"input",b=>{if(b.target.composing)return;let s=e.value;i&&(s=s.trim()),m&&(s=Ws(s)),e[Qt](s)}),i&&It(e,"change",()=>{e.value=e.value.trim()}),t||(It(e,"compositionstart",Hc),It(e,"compositionend",tn),It(e,"change",tn))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:h,trim:d,number:m}},b){if(e[Qt]=Zs(b),e.composing)return;const s=(m||e.type==="number")&&!/^0\d/.test(e.value)?Ws(e.value):e.value,n=t??"";s!==n&&(document.activeElement===e&&e.type!=="range"&&(h&&t===i||d&&e.value.trim()===n)||(e.value=n))}},Fc={deep:!0,created(e,{value:t,modifiers:{number:i}},h){const d=si(t);It(e,"change",()=>{const m=Array.prototype.filter.call(e.options,b=>b.selected).map(b=>i?Ws(Qs(b)):Qs(b));e[Qt](e.multiple?d?new Set(m):m:m[0]),e._assigning=!0,hr(()=>{e._assigning=!1})}),e[Qt]=Zs(h)},mounted(e,{value:t}){sn(e,t)},beforeUpdate(e,t,i){e[Qt]=Zs(i)},updated(e,{value:t}){e._assigning||sn(e,t)}};function sn(e,t){const i=e.multiple,h=ce(t);if(!(i&&!h&&!si(t))){for(let d=0,m=e.options.length;d<m;d++){const b=e.options[d],s=Qs(b);if(i)if(h){const n=typeof s;n==="string"||n==="number"?b.selected=t.some(u=>String(u)===String(s)):b.selected=La(t,s)>-1}else b.selected=t.has(s);else if(oi(Qs(b),t)){e.selectedIndex!==d&&(e.selectedIndex=d);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Qs(e){return"_value"in e?e._value:e.value}const $c=["ctrl","shift","alt","meta"],Nc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>$c.some(i=>e[`${i}Key`]&&!t.includes(i))},es=(e,t)=>{const i=e._withMods||(e._withMods={}),h=t.join(".");return i[h]||(i[h]=(d,...m)=>{for(let b=0;b<t.length;b++){const s=Nc[t[b]];if(s&&s(d,t))return}return e(d,...m)})},Wc=Re({patchProp:Lc},uc);let rn;function Uc(){return rn||(rn=Il(Wc))}const jc=(...e)=>{const t=Uc().createApp(...e),{mount:i}=t;return t.mount=h=>{const d=Kc(h);if(!d)return;const m=t._component;!he(m)&&!m.render&&!m.template&&(m.template=d.innerHTML),d.nodeType===1&&(d.textContent="");const b=i(d,!1,zc(d));return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),b},t};function zc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kc(e){return ke(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Kt=typeof document<"u";function Go(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Vc(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Go(e.default)}const me=Object.assign;function Ai(e,t){const i={};for(const h in t){const d=t[h];i[h]=tt(d)?d.map(e):e(d)}return i}const ms=()=>{},tt=Array.isArray,Jo=/#/g,qc=/&/g,Gc=/\//g,Jc=/=/g,Xc=/\?/g,Xo=/\+/g,Yc=/%5B/g,Zc=/%5D/g,Yo=/%5E/g,Qc=/%60/g,Zo=/%7B/g,eh=/%7C/g,Qo=/%7D/g,th=/%20/g;function gr(e){return encodeURI(""+e).replace(eh,"|").replace(Yc,"[").replace(Zc,"]")}function sh(e){return gr(e).replace(Zo,"{").replace(Qo,"}").replace(Yo,"^")}function Xi(e){return gr(e).replace(Xo,"%2B").replace(th,"+").replace(Jo,"%23").replace(qc,"%26").replace(Qc,"`").replace(Zo,"{").replace(Qo,"}").replace(Yo,"^")}function ih(e){return Xi(e).replace(Jc,"%3D")}function rh(e){return gr(e).replace(Jo,"%23").replace(Xc,"%3F")}function nh(e){return e==null?"":rh(e).replace(Gc,"%2F")}function Rs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const oh=/\/$/,ah=e=>e.replace(oh,"");function Ti(e,t,i="/"){let h,d={},m="",b="";const s=t.indexOf("#");let n=t.indexOf("?");return s<n&&s>=0&&(n=-1),n>-1&&(h=t.slice(0,n),m=t.slice(n+1,s>-1?s:t.length),d=e(m)),s>-1&&(h=h||t.slice(0,s),b=t.slice(s,t.length)),h=uh(h??t,i),{fullPath:h+(m&&"?")+m+b,path:h,query:d,hash:Rs(b)}}function lh(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function nn(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ch(e,t,i){const h=t.matched.length-1,d=i.matched.length-1;return h>-1&&h===d&&rs(t.matched[h],i.matched[d])&&ea(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function rs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ea(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!hh(e[i],t[i]))return!1;return!0}function hh(e,t){return tt(e)?on(e,t):tt(t)?on(t,e):e===t}function on(e,t){return tt(t)?e.length===t.length&&e.every((i,h)=>i===t[h]):e.length===1&&e[0]===t}function uh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),h=e.split("/"),d=h[h.length-1];(d===".."||d===".")&&h.push("");let m=i.length-1,b,s;for(b=0;b<h.length;b++)if(s=h[b],s!==".")if(s==="..")m>1&&m--;else break;return i.slice(0,m).join("/")+"/"+h.slice(b).join("/")}const bt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ls;(function(e){e.pop="pop",e.push="push"})(Ls||(Ls={}));var Ss;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ss||(Ss={}));function fh(e){if(!e)if(Kt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ah(e)}const dh=/^[^#]+#/;function _h(e,t){return e.replace(dh,"#")+t}function ph(e,t){const i=document.documentElement.getBoundingClientRect(),h=e.getBoundingClientRect();return{behavior:t.behavior,left:h.left-i.left-(t.left||0),top:h.top-i.top-(t.top||0)}}const pi=()=>({left:window.scrollX,top:window.scrollY});function vh(e){let t;if("el"in e){const i=e.el,h=typeof i=="string"&&i.startsWith("#"),d=typeof i=="string"?h?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!d)return;t=ph(d,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function an(e,t){return(history.state?history.state.position-t:-1)+e}const Yi=new Map;function gh(e,t){Yi.set(e,t)}function mh(e){const t=Yi.get(e);return Yi.delete(e),t}let Sh=()=>location.protocol+"//"+location.host;function ta(e,t){const{pathname:i,search:h,hash:d}=t,m=e.indexOf("#");if(m>-1){let s=d.includes(e.slice(m))?e.slice(m).length:1,n=d.slice(s);return n[0]!=="/"&&(n="/"+n),nn(n,"")}return nn(i,e)+h+d}function bh(e,t,i,h){let d=[],m=[],b=null;const s=({state:_})=>{const g=ta(e,location),w=i.value,v=t.value;let a=0;if(_){if(i.value=g,t.value=_,b&&b===w){b=null;return}a=v?_.position-v.position:0}else h(g);d.forEach(c=>{c(i.value,w,{delta:a,type:Ls.pop,direction:a?a>0?Ss.forward:Ss.back:Ss.unknown})})};function n(){b=i.value}function u(_){d.push(_);const g=()=>{const w=d.indexOf(_);w>-1&&d.splice(w,1)};return m.push(g),g}function f(){const{history:_}=window;_.state&&_.replaceState(me({},_.state,{scroll:pi()}),"")}function l(){for(const _ of m)_();m=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:n,listen:u,destroy:l}}function ln(e,t,i,h=!1,d=!1){return{back:e,current:t,forward:i,replaced:h,position:window.history.length,scroll:d?pi():null}}function Ch(e){const{history:t,location:i}=window,h={value:ta(e,i)},d={value:t.state};d.value||m(h.value,{back:null,current:h.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function m(n,u,f){const l=e.indexOf("#"),_=l>-1?(i.host&&document.querySelector("base")?e:e.slice(l))+n:Sh()+e+n;try{t[f?"replaceState":"pushState"](u,"",_),d.value=u}catch(g){console.error(g),i[f?"replace":"assign"](_)}}function b(n,u){const f=me({},t.state,ln(d.value.back,n,d.value.forward,!0),u,{position:d.value.position});m(n,f,!0),h.value=n}function s(n,u){const f=me({},d.value,t.state,{forward:n,scroll:pi()});m(f.current,f,!0);const l=me({},ln(h.value,n,null),{position:f.position+1},u);m(n,l,!1),h.value=n}return{location:h,state:d,push:s,replace:b}}function yh(e){e=fh(e);const t=Ch(e),i=bh(e,t.state,t.location,t.replace);function h(m,b=!0){b||i.pauseListeners(),history.go(m)}const d=me({location:"",base:e,go:h,createHref:_h.bind(null,e)},t,i);return Object.defineProperty(d,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(d,"state",{enumerable:!0,get:()=>t.state.value}),d}function wh(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),yh(e)}function Eh(e){return typeof e=="string"||e&&typeof e=="object"}function sa(e){return typeof e=="string"||typeof e=="symbol"}const ia=Symbol("");var cn;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(cn||(cn={}));function ns(e,t){return me(new Error,{type:e,[ia]:!0},t)}function ht(e,t){return e instanceof Error&&ia in e&&(t==null||!!(e.type&t))}const hn="[^/]+?",xh={sensitive:!1,strict:!1,start:!0,end:!0},kh=/[.+*?^${}()[\]/\\]/g;function Rh(e,t){const i=me({},xh,t),h=[];let d=i.start?"^":"";const m=[];for(const u of e){const f=u.length?[]:[90];i.strict&&!u.length&&(d+="/");for(let l=0;l<u.length;l++){const _=u[l];let g=40+(i.sensitive?.25:0);if(_.type===0)l||(d+="/"),d+=_.value.replace(kh,"\\$&"),g+=40;else if(_.type===1){const{value:w,repeatable:v,optional:a,regexp:c}=_;m.push({name:w,repeatable:v,optional:a});const r=c||hn;if(r!==hn){g+=10;try{new RegExp(`(${r})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${w}" (${r}): `+p.message)}}let o=v?`((?:${r})(?:/(?:${r}))*)`:`(${r})`;l||(o=a&&u.length<2?`(?:/${o})`:"/"+o),a&&(o+="?"),d+=o,g+=20,a&&(g+=-8),v&&(g+=-20),r===".*"&&(g+=-50)}f.push(g)}h.push(f)}if(i.strict&&i.end){const u=h.length-1;h[u][h[u].length-1]+=.7000000000000001}i.strict||(d+="/?"),i.end?d+="$":i.strict&&!d.endsWith("/")&&(d+="(?:/|$)");const b=new RegExp(d,i.sensitive?"":"i");function s(u){const f=u.match(b),l={};if(!f)return null;for(let _=1;_<f.length;_++){const g=f[_]||"",w=m[_-1];l[w.name]=g&&w.repeatable?g.split("/"):g}return l}function n(u){let f="",l=!1;for(const _ of e){(!l||!f.endsWith("/"))&&(f+="/"),l=!1;for(const g of _)if(g.type===0)f+=g.value;else if(g.type===1){const{value:w,repeatable:v,optional:a}=g,c=w in u?u[w]:"";if(tt(c)&&!v)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const r=tt(c)?c.join("/"):c;if(!r)if(a)_.length<2&&(f.endsWith("/")?f=f.slice(0,-1):l=!0);else throw new Error(`Missing required param "${w}"`);f+=r}}return f||"/"}return{re:b,score:h,keys:m,parse:s,stringify:n}}function Lh(e,t){let i=0;for(;i<e.length&&i<t.length;){const h=t[i]-e[i];if(h)return h;i++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ra(e,t){let i=0;const h=e.score,d=t.score;for(;i<h.length&&i<d.length;){const m=Lh(h[i],d[i]);if(m)return m;i++}if(Math.abs(d.length-h.length)===1){if(un(h))return 1;if(un(d))return-1}return d.length-h.length}function un(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Dh={type:0,value:""},Ah=/[a-zA-Z0-9_]/;function Th(e){if(!e)return[[]];if(e==="/")return[[Dh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${i})/"${u}": ${g}`)}let i=0,h=i;const d=[];let m;function b(){m&&d.push(m),m=[]}let s=0,n,u="",f="";function l(){u&&(i===0?m.push({type:0,value:u}):i===1||i===2||i===3?(m.length>1&&(n==="*"||n==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),m.push({type:1,value:u,regexp:f,repeatable:n==="*"||n==="+",optional:n==="*"||n==="?"})):t("Invalid state to consume buffer"),u="")}function _(){u+=n}for(;s<e.length;){if(n=e[s++],n==="\\"&&i!==2){h=i,i=4;continue}switch(i){case 0:n==="/"?(u&&l(),b()):n===":"?(l(),i=1):_();break;case 4:_(),i=h;break;case 1:n==="("?i=2:Ah.test(n)?_():(l(),i=0,n!=="*"&&n!=="?"&&n!=="+"&&s--);break;case 2:n===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+n:i=3:f+=n;break;case 3:l(),i=0,n!=="*"&&n!=="?"&&n!=="+"&&s--,f="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${u}"`),l(),b(),d}function Oh(e,t,i){const h=Rh(Th(e.path),i),d=me(h,{record:e,parent:t,children:[],alias:[]});return t&&!d.record.aliasOf==!t.record.aliasOf&&t.children.push(d),d}function Bh(e,t){const i=[],h=new Map;t=pn({strict:!1,end:!0,sensitive:!1},t);function d(l){return h.get(l)}function m(l,_,g){const w=!g,v=dn(l);v.aliasOf=g&&g.record;const a=pn(t,l),c=[v];if("alias"in l){const p=typeof l.alias=="string"?[l.alias]:l.alias;for(const C of p)c.push(dn(me({},v,{components:g?g.record.components:v.components,path:C,aliasOf:g?g.record:v})))}let r,o;for(const p of c){const{path:C}=p;if(_&&C[0]!=="/"){const y=_.record.path,x=y[y.length-1]==="/"?"":"/";p.path=_.record.path+(C&&x+C)}if(r=Oh(p,_,a),g?g.alias.push(r):(o=o||r,o!==r&&o.alias.push(r),w&&l.name&&!_n(r)&&b(l.name)),na(r)&&n(r),v.children){const y=v.children;for(let x=0;x<y.length;x++)m(y[x],r,g&&g.children[x])}g=g||r}return o?()=>{b(o)}:ms}function b(l){if(sa(l)){const _=h.get(l);_&&(h.delete(l),i.splice(i.indexOf(_),1),_.children.forEach(b),_.alias.forEach(b))}else{const _=i.indexOf(l);_>-1&&(i.splice(_,1),l.record.name&&h.delete(l.record.name),l.children.forEach(b),l.alias.forEach(b))}}function s(){return i}function n(l){const _=Ih(l,i);i.splice(_,0,l),l.record.name&&!_n(l)&&h.set(l.record.name,l)}function u(l,_){let g,w={},v,a;if("name"in l&&l.name){if(g=h.get(l.name),!g)throw ns(1,{location:l});a=g.record.name,w=me(fn(_.params,g.keys.filter(o=>!o.optional).concat(g.parent?g.parent.keys.filter(o=>o.optional):[]).map(o=>o.name)),l.params&&fn(l.params,g.keys.map(o=>o.name))),v=g.stringify(w)}else if(l.path!=null)v=l.path,g=i.find(o=>o.re.test(v)),g&&(w=g.parse(v),a=g.record.name);else{if(g=_.name?h.get(_.name):i.find(o=>o.re.test(_.path)),!g)throw ns(1,{location:l,currentLocation:_});a=g.record.name,w=me({},_.params,l.params),v=g.stringify(w)}const c=[];let r=g;for(;r;)c.unshift(r.record),r=r.parent;return{name:a,path:v,params:w,matched:c,meta:Ph(c)}}e.forEach(l=>m(l));function f(){i.length=0,h.clear()}return{addRoute:m,resolve:u,removeRoute:b,clearRoutes:f,getRoutes:s,getRecordMatcher:d}}function fn(e,t){const i={};for(const h of t)h in e&&(i[h]=e[h]);return i}function dn(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Mh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Mh(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const h in e.components)t[h]=typeof i=="object"?i[h]:i;return t}function _n(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ph(e){return e.reduce((t,i)=>me(t,i.meta),{})}function pn(e,t){const i={};for(const h in e)i[h]=h in t?t[h]:e[h];return i}function Ih(e,t){let i=0,h=t.length;for(;i!==h;){const m=i+h>>1;ra(e,t[m])<0?h=m:i=m+1}const d=Hh(e);return d&&(h=t.lastIndexOf(d,h-1)),h}function Hh(e){let t=e;for(;t=t.parent;)if(na(t)&&ra(e,t)===0)return t}function na({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Fh(e){const t={};if(e===""||e==="?")return t;const h=(e[0]==="?"?e.slice(1):e).split("&");for(let d=0;d<h.length;++d){const m=h[d].replace(Xo," "),b=m.indexOf("="),s=Rs(b<0?m:m.slice(0,b)),n=b<0?null:Rs(m.slice(b+1));if(s in t){let u=t[s];tt(u)||(u=t[s]=[u]),u.push(n)}else t[s]=n}return t}function vn(e){let t="";for(let i in e){const h=e[i];if(i=ih(i),h==null){h!==void 0&&(t+=(t.length?"&":"")+i);continue}(tt(h)?h.map(m=>m&&Xi(m)):[h&&Xi(h)]).forEach(m=>{m!==void 0&&(t+=(t.length?"&":"")+i,m!=null&&(t+="="+m))})}return t}function $h(e){const t={};for(const i in e){const h=e[i];h!==void 0&&(t[i]=tt(h)?h.map(d=>d==null?null:""+d):h==null?h:""+h)}return t}const Nh=Symbol(""),gn=Symbol(""),vi=Symbol(""),oa=Symbol(""),Zi=Symbol("");function hs(){let e=[];function t(h){return e.push(h),()=>{const d=e.indexOf(h);d>-1&&e.splice(d,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function xt(e,t,i,h,d,m=b=>b()){const b=h&&(h.enterCallbacks[d]=h.enterCallbacks[d]||[]);return()=>new Promise((s,n)=>{const u=_=>{_===!1?n(ns(4,{from:i,to:t})):_ instanceof Error?n(_):Eh(_)?n(ns(2,{from:t,to:_})):(b&&h.enterCallbacks[d]===b&&typeof _=="function"&&b.push(_),s())},f=m(()=>e.call(h&&h.instances[d],t,i,u));let l=Promise.resolve(f);e.length<3&&(l=l.then(u)),l.catch(_=>n(_))})}function Oi(e,t,i,h,d=m=>m()){const m=[];for(const b of e)for(const s in b.components){let n=b.components[s];if(!(t!=="beforeRouteEnter"&&!b.instances[s]))if(Go(n)){const f=(n.__vccOpts||n)[t];f&&m.push(xt(f,i,h,b,s,d))}else{let u=n();m.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${s}" at "${b.path}"`);const l=Vc(f)?f.default:f;b.mods[s]=f,b.components[s]=l;const g=(l.__vccOpts||l)[t];return g&&xt(g,i,h,b,s,d)()}))}}return m}function mn(e){const t=We(vi),i=We(oa),h=De(()=>{const n=Fe(e.to);return t.resolve(n)}),d=De(()=>{const{matched:n}=h.value,{length:u}=n,f=n[u-1],l=i.matched;if(!f||!l.length)return-1;const _=l.findIndex(rs.bind(null,f));if(_>-1)return _;const g=Sn(n[u-2]);return u>1&&Sn(f)===g&&l[l.length-1].path!==g?l.findIndex(rs.bind(null,n[u-2])):_}),m=De(()=>d.value>-1&&Kh(i.params,h.value.params)),b=De(()=>d.value>-1&&d.value===i.matched.length-1&&ea(i.params,h.value.params));function s(n={}){if(zh(n)){const u=t[Fe(e.replace)?"replace":"push"](Fe(e.to)).catch(ms);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:h,href:De(()=>h.value.href),isActive:m,isExactActive:b,navigate:s}}function Wh(e){return e.length===1?e[0]:e}const Uh=Xe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mn,setup(e,{slots:t}){const i=li(mn(e)),{options:h}=We(vi),d=De(()=>({[bn(e.activeClass,h.linkActiveClass,"router-link-active")]:i.isActive,[bn(e.exactActiveClass,h.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const m=t.default&&Wh(t.default(i));return e.custom?m:vr("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:d.value},m)}}}),jh=Uh;function zh(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Kh(e,t){for(const i in t){const h=t[i],d=e[i];if(typeof h=="string"){if(h!==d)return!1}else if(!tt(d)||d.length!==h.length||h.some((m,b)=>m!==d[b]))return!1}return!0}function Sn(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bn=(e,t,i)=>e??t??i,Vh=Xe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const h=We(Zi),d=De(()=>e.route||h.value),m=We(gn,0),b=De(()=>{let u=Fe(m);const{matched:f}=d.value;let l;for(;(l=f[u])&&!l.components;)u++;return u}),s=De(()=>d.value.matched[b.value]);Zt(gn,De(()=>b.value+1)),Zt(Nh,s),Zt(Zi,d);const n=Te();return vs(()=>[n.value,s.value,e.name],([u,f,l],[_,g,w])=>{f&&(f.instances[l]=u,g&&g!==f&&u&&u===_&&(f.leaveGuards.size||(f.leaveGuards=g.leaveGuards),f.updateGuards.size||(f.updateGuards=g.updateGuards))),u&&f&&(!g||!rs(f,g)||!_)&&(f.enterCallbacks[l]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=d.value,f=e.name,l=s.value,_=l&&l.components[f];if(!_)return Cn(i.default,{Component:_,route:u});const g=l.props[f],w=g?g===!0?u.params:typeof g=="function"?g(u):g:null,a=vr(_,me({},w,t,{onVnodeUnmounted:c=>{c.component.isUnmounted&&(l.instances[f]=null)},ref:n}));return Cn(i.default,{Component:a,route:u})||a}}});function Cn(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const aa=Vh;function qh(e){const t=Bh(e.routes,e),i=e.parseQuery||Fh,h=e.stringifyQuery||vn,d=e.history,m=hs(),b=hs(),s=hs(),n=Xa(bt);let u=bt;Kt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ai.bind(null,A=>""+A),l=Ai.bind(null,nh),_=Ai.bind(null,Rs);function g(A,k){let N,$;return sa(A)?(N=t.getRecordMatcher(A),$=k):$=A,t.addRoute($,N)}function w(A){const k=t.getRecordMatcher(A);k&&t.removeRoute(k)}function v(){return t.getRoutes().map(A=>A.record)}function a(A){return!!t.getRecordMatcher(A)}function c(A,k){if(k=me({},k||n.value),typeof A=="string"){const F=Ti(i,A,k.path),j=t.resolve({path:F.path},k),K=d.createHref(F.fullPath);return me(F,j,{params:_(j.params),hash:Rs(F.hash),redirectedFrom:void 0,href:K})}let N;if(A.path!=null)N=me({},A,{path:Ti(i,A.path,k.path).path});else{const F=me({},A.params);for(const j in F)F[j]==null&&delete F[j];N=me({},A,{params:l(F)}),k.params=l(k.params)}const $=t.resolve(N,k),X=A.hash||"";$.params=f(_($.params));const L=lh(h,me({},A,{hash:sh(X),path:$.path})),O=d.createHref(L);return me({fullPath:L,hash:X,query:h===vn?$h(A.query):A.query||{}},$,{redirectedFrom:void 0,href:O})}function r(A){return typeof A=="string"?Ti(i,A,n.value.path):me({},A)}function o(A,k){if(u!==A)return ns(8,{from:k,to:A})}function p(A){return x(A)}function C(A){return p(me(r(A),{replace:!0}))}function y(A){const k=A.matched[A.matched.length-1];if(k&&k.redirect){const{redirect:N}=k;let $=typeof N=="function"?N(A):N;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=r($):{path:$},$.params={}),me({query:A.query,hash:A.hash,params:$.path!=null?{}:A.params},$)}}function x(A,k){const N=u=c(A),$=n.value,X=A.state,L=A.force,O=A.replace===!0,F=y(N);if(F)return x(me(r(F),{state:typeof F=="object"?me({},X,F.state):X,force:L,replace:O}),k||N);const j=N;j.redirectedFrom=k;let K;return!L&&ch(h,$,N)&&(K=ns(16,{to:j,from:$}),I($,$,!0,!1)),(K?Promise.resolve(K):D(j,$)).catch(W=>ht(W)?ht(W,2)?W:M(W):V(W,j,$)).then(W=>{if(W){if(ht(W,2))return x(me({replace:O},r(W.to),{state:typeof W.to=="object"?me({},X,W.to.state):X,force:L}),k||j)}else W=B(j,$,!0,O,X);return P(j,$,W),W})}function S(A,k){const N=o(A,k);return N?Promise.reject(N):Promise.resolve()}function E(A){const k=Q.values().next().value;return k&&typeof k.runWithContext=="function"?k.runWithContext(A):A()}function D(A,k){let N;const[$,X,L]=Gh(A,k);N=Oi($.reverse(),"beforeRouteLeave",A,k);for(const F of $)F.leaveGuards.forEach(j=>{N.push(xt(j,A,k))});const O=S.bind(null,A,k);return N.push(O),re(N).then(()=>{N=[];for(const F of m.list())N.push(xt(F,A,k));return N.push(O),re(N)}).then(()=>{N=Oi(X,"beforeRouteUpdate",A,k);for(const F of X)F.updateGuards.forEach(j=>{N.push(xt(j,A,k))});return N.push(O),re(N)}).then(()=>{N=[];for(const F of L)if(F.beforeEnter)if(tt(F.beforeEnter))for(const j of F.beforeEnter)N.push(xt(j,A,k));else N.push(xt(F.beforeEnter,A,k));return N.push(O),re(N)}).then(()=>(A.matched.forEach(F=>F.enterCallbacks={}),N=Oi(L,"beforeRouteEnter",A,k,E),N.push(O),re(N))).then(()=>{N=[];for(const F of b.list())N.push(xt(F,A,k));return N.push(O),re(N)}).catch(F=>ht(F,8)?F:Promise.reject(F))}function P(A,k,N){s.list().forEach($=>E(()=>$(A,k,N)))}function B(A,k,N,$,X){const L=o(A,k);if(L)return L;const O=k===bt,F=Kt?history.state:{};N&&($||O?d.replace(A.fullPath,me({scroll:O&&F&&F.scroll},X)):d.push(A.fullPath,X)),n.value=A,I(A,k,N,O),M()}let T;function U(){T||(T=d.listen((A,k,N)=>{if(!oe.listening)return;const $=c(A),X=y($);if(X){x(me(X,{replace:!0,force:!0}),$).catch(ms);return}u=$;const L=n.value;Kt&&gh(an(L.fullPath,N.delta),pi()),D($,L).catch(O=>ht(O,12)?O:ht(O,2)?(x(me(r(O.to),{force:!0}),$).then(F=>{ht(F,20)&&!N.delta&&N.type===Ls.pop&&d.go(-1,!1)}).catch(ms),Promise.reject()):(N.delta&&d.go(-N.delta,!1),V(O,$,L))).then(O=>{O=O||B($,L,!1),O&&(N.delta&&!ht(O,8)?d.go(-N.delta,!1):N.type===Ls.pop&&ht(O,20)&&d.go(-1,!1)),P($,L,O)}).catch(ms)}))}let z=hs(),G=hs(),J;function V(A,k,N){M(A);const $=G.list();return $.length?$.forEach(X=>X(A,k,N)):console.error(A),Promise.reject(A)}function R(){return J&&n.value!==bt?Promise.resolve():new Promise((A,k)=>{z.add([A,k])})}function M(A){return J||(J=!A,U(),z.list().forEach(([k,N])=>A?N(A):k()),z.reset()),A}function I(A,k,N,$){const{scrollBehavior:X}=e;if(!Kt||!X)return Promise.resolve();const L=!N&&mh(an(A.fullPath,0))||($||!N)&&history.state&&history.state.scroll||null;return hr().then(()=>X(A,k,L)).then(O=>O&&vh(O)).catch(O=>V(O,A,k))}const H=A=>d.go(A);let q;const Q=new Set,oe={currentRoute:n,listening:!0,addRoute:g,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:a,getRoutes:v,resolve:c,options:e,push:p,replace:C,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:m.add,beforeResolve:b.add,afterEach:s.add,onError:G.add,isReady:R,install(A){const k=this;A.component("RouterLink",jh),A.component("RouterView",aa),A.config.globalProperties.$router=k,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>Fe(n)}),Kt&&!q&&n.value===bt&&(q=!0,p(d.location).catch(X=>{}));const N={};for(const X in bt)Object.defineProperty(N,X,{get:()=>n.value[X],enumerable:!0});A.provide(vi,k),A.provide(oa,qn(N)),A.provide(Zi,n);const $=A.unmount;Q.add(A),A.unmount=function(){Q.delete(A),Q.size<1&&(u=bt,T&&T(),T=null,n.value=bt,q=!1,J=!1),$()}}};function re(A){return A.reduce((k,N)=>k.then(()=>E(N)),Promise.resolve())}return oe}function Gh(e,t){const i=[],h=[],d=[],m=Math.max(t.matched.length,e.matched.length);for(let b=0;b<m;b++){const s=t.matched[b];s&&(e.matched.find(u=>rs(u,s))?h.push(s):i.push(s));const n=e.matched[b];n&&(t.matched.find(u=>rs(u,n))||d.push(n))}return[i,h,d]}function la(){return We(vi)}const Ye=(e,t)=>{const i=e.__vccOpts||e;for(const[h,d]of t)i[h]=d;return i},Jh={};function Xh(e,t){return pe(),Ee("div",null,t[0]||(t[0]=[ie("div",{class:"wave"},null,-1),ie("div",{class:"wave"},null,-1),ie("div",{class:"wave"},null,-1)]))}const Yh=Ye(Jh,[["render",Xh]]),Zh=Xe({__name:"App",setup(e){return(t,i)=>{const h=Sl("notifications");return pe(),Ee(xe,null,[de(h,{position:"top right"}),de(Fe(aa)),de(Yh)],64)}}}),Qh=Xe({__name:"Spinner",props:{size:{type:Number,default:20},thicknesses:{type:Number,default:4}},setup(e){const t=e;return(i,h)=>(pe(),Ee("div",{class:"loading-container",style:bs({width:t.size+"px",height:t.size+"px"})},[ie("div",{class:"loading-spinner",style:bs({border:t.thicknesses+"px solid var(--color-loading-1)","border-top":t.thicknesses+"px solid var(--color-border-1)"})},null,4)],4))}}),eu=Ye(Qh,[["__scopeId","data-v-df891f94"]]);(function(){var e;try{if(typeof document<"u"){var t=document.createElement("style");t.nonce=(e=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:e.content,t.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:#fff;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44a4fc;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#e54d42;border-left-color:#b82e24}.vue-notification.success{background:#68cd86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(t)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();const ca=new Map;function tu(e){return{all:e=e||new Map,on:function(t,i){var h=e.get(t);h?h.push(i):e.set(t,[i])},off:function(t,i){var h=e.get(t);h&&(i?h.splice(h.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var h=e.get(t);h&&h.slice().map(function(d){d(i)}),(h=e.get("*"))&&h.slice().map(function(d){d(t,i)})}}}const ei=tu(),Bi="[-+]?[0-9]*.?[0-9]+",yn=[{name:"px",regexp:new RegExp(`^${Bi}px$`)},{name:"%",regexp:new RegExp(`^${Bi}%$`)},{name:"px",regexp:new RegExp(`^${Bi}$`)}],su=e=>{if(e==="auto")return{type:e,value:0};for(let t=0;t<yn.length;t++){const i=yn[t];if(i.regexp.test(e))return{type:i.name,value:parseFloat(e)}}return{type:"",value:e}},iu=e=>{switch(typeof e){case"number":return{type:"px",value:e};case"string":return su(e);default:return{type:"",value:e}}},wn={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},ru=(e=>()=>e++)(0),nu=e=>typeof e!="string"?[]:e.split(/\s+/gi).filter(Boolean),ou=e=>{typeof e=="string"&&(e=nu(e));let t=null,i=null;return e.forEach(h=>{wn.y.has(h)&&(i=h),wn.x.has(h)&&(t=h)}),{x:t,y:i}},Mi={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:e=>({height:[e.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},au=(e,t)=>{let i,h,d=t;const m=()=>{h=Date.now(),i=setTimeout(e,d)},b=()=>{clearTimeout(i),d-=Date.now()-h};return m(),{start:m,stop:b}};function lu(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ss(e)}const Hs={IDLE:0,DESTROYED:2},cu=Xe({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>Mi.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(e){return e==="css"||e==="velocity"}},animation:{type:Object,default(){return Mi.velocityAnimation}},animationName:{type:String,default:Mi.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:e=>!0,destroy:e=>!0,start:e=>!0},slots:Object,setup:(e,{emit:t,slots:i,expose:h})=>{const d=Te([]),m=ca.get("velocity"),b=De(()=>e.animationType==="velocity"),s=De(()=>d.value.filter(E=>E.state!==Hs.DESTROYED)),n=De(()=>iu(e.width)),u=De(()=>{const{x:E,y:D}=ou(e.position),P=n.value.value,B=n.value.type,T={width:P+B};return D&&(T[D]="0px"),E&&(E==="center"?T.left=`calc(50% - ${+P/2}${B})`:T[E]="0px"),T}),f=De(()=>b.value?{onEnter:y,onLeave:x,onAfterLeave:S}:{}),l=E=>{t("click",E),e.closeOnClick&&r(E)},_=E=>{var D;e.pauseOnHover&&((D=E.timer)==null||D.stop())},g=E=>{var D;e.pauseOnHover&&((D=E.timer)==null||D.start())},w=(E={})=>{if(E.group||(E.group=""),E.data||(E.data={}),e.group!==E.group)return;if(E.clean||E.clear){p();return}const D=typeof E.duration=="number"?E.duration:e.duration,P=typeof E.speed=="number"?E.speed:e.speed,B=typeof E.ignoreDuplicates=="boolean"?E.ignoreDuplicates:e.ignoreDuplicates,{title:T,text:U,type:z,data:G,id:J}=E,V={id:J||ru(),title:T,text:U,type:z,state:Hs.IDLE,speed:P,length:D+2*P,data:G,duplicates:0};D>=0&&(V.timer=au(()=>r(V),V.length));const R="bottom"in u.value,M=e.reverse?!R:R;let I=-1;const H=s.value.find(q=>q.title===E.title&&q.text===E.text);if(B&&H){H.duplicates++;return}M?(d.value.push(V),t("start",V),s.value.length>e.max&&(I=0)):(d.value.unshift(V),t("start",V),s.value.length>e.max&&(I=s.value.length-1)),I!==-1&&r(s.value[I])},v=E=>{o(E)},a=E=>["vue-notification-template",e.classes,E.type||""],c=E=>b.value?void 0:{transition:`all ${E.speed}ms`},r=E=>{var D;(D=E.timer)==null||D.stop(),E.state=Hs.DESTROYED,S(),t("destroy",E)},o=E=>{const D=d.value.find(P=>P.id===E);D&&r(D)},p=()=>{s.value.forEach(r)},C=(E,D)=>{var P;const B=(P=e.animation)==null?void 0:P[E];return typeof B=="function"?B(D):B},y=(E,D)=>{const P=C("enter",E);m(E,P,{duration:e.speed,complete:D})},x=(E,D)=>{const P=C("leave",E);m(E,P,{duration:e.speed,complete:D})};function S(){d.value=d.value.filter(E=>E.state!==Hs.DESTROYED)}return Ts(()=>{ei.on("add",w),ei.on("close",v)}),()=>{let E;return de("div",{class:"vue-notification-group",style:u.value},[de(Oc,Io(f.value,{tag:"div",css:!b.value,name:e.animationName}),lu(E=s.value.map(D=>de("div",{key:D.id,class:"vue-notification-wrapper",style:c(D),"data-id":D.id,onMouseenter:()=>_(D),onMouseleave:()=>g(D)},[i.body?i.body({item:D,class:[e.classes,D.type],close:()=>r(D)}):de("div",{class:a(D),onClick:()=>l(D)},[e.dangerouslySetInnerHtml?de(xe,null,[D.title?de("div",{class:"notification-title",innerHTML:D.title},null):null,de("div",{class:"notification-content",innerHTML:D.text},null)]):de(xe,null,[D.title?de("div",{class:"notification-title"},[D.title]):null,de("div",{class:"notification-content"},[D.text])])])])))?E:{default:()=>[E]})])}}}),mr=e=>{typeof e=="string"&&(e={title:"",text:e}),typeof e=="object"&&ei.emit("add",e)};mr.close=e=>{ei.emit("close",e)};const hu=()=>({notify:mr}),uu="Notifications";function fu(e,t={}){Object.entries(t).forEach(h=>ca.set(...h));const i=t.name||"notify";e.config.globalProperties["$"+i]=mr,e.component(t.componentName||uu,cu)}const du={install:fu},{notify:ha}=hu(),os=e=>{ha({type:"success",title:e})},gt=e=>{ha({type:"error",title:e})},_u=Xe({__name:"Modal",emits:["close"],setup(e,{emit:t}){const i=t;return(h,d)=>(pe(),Ee("div",{class:"modal-overlay",onClick:d[1]||(d[1]=m=>{i("close")})},[ie("div",{class:"modal",onClick:d[0]||(d[0]=es(()=>{},["stop"]))},[dr(h.$slots,"default",{},void 0)])]))}}),ua=Ye(_u,[["__scopeId","data-v-d30d0309"]]),pu=["placeholder"],vu=Xe({__name:"AddNode",props:{node:{type:Object,default:()=>({name:"",ip:"",port:22,ssh_username:"root",auth_type:"password",auth_value:""})}},emits:["addNode","close"],setup(e,{emit:t}){const i=t,d=Te(JSON.parse(JSON.stringify(e.node))),m=()=>{i("addNode",d.value)};return(b,s)=>(pe(),lt(ua,{onClose:s[7]||(s[7]=n=>i("close"))},{default:$t(()=>[s[16]||(s[16]=ie("h2",null,"",-1)),ie("form",{onSubmit:es(m,["prevent"])},[ie("label",null,[s[8]||(s[8]=ft(" : ")),qe(ie("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>d.value.name=n),placeholder:"",required:""},null,512),[[Ht,d.value.name]])]),ie("label",null,[s[9]||(s[9]=ft(" IP: ")),qe(ie("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>d.value.ip=n),placeholder:": IPV4/IPV6/DOMAIN",required:""},null,512),[[Ht,d.value.ip]])]),ie("label",null,[s[10]||(s[10]=ft(" SSH : ")),qe(ie("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>d.value.port=n),type:"number",placeholder:"SSH",required:""},null,512),[[Ht,d.value.port]])]),ie("label",null,[s[11]||(s[11]=ft(" SSH : ")),qe(ie("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>d.value.ssh_username=n),placeholder:"",required:""},null,512),[[Ht,d.value.ssh_username]])]),ie("label",null,[s[13]||(s[13]=ft(" : ")),qe(ie("select",{"onUpdate:modelValue":s[4]||(s[4]=n=>d.value.auth_type=n),required:""},s[12]||(s[12]=[ie("option",{value:"password"},"",-1),ie("option",{value:"key"},"",-1)]),512),[[Fc,d.value.auth_type]])]),ie("label",null,[s[14]||(s[14]=ft(" : ")),qe(ie("textarea",{"onUpdate:modelValue":s[5]||(s[5]=n=>d.value.auth_value=n),placeholder:d.value.auth_type==="password"?"":"",required:""},null,8,pu),[[Ht,d.value.auth_value]])]),s[15]||(s[15]=ie("button",{type:"submit"},"",-1)),ie("button",{type:"button",onClick:s[6]||(s[6]=n=>b.$emit("close"))},"")],32)]),_:1}))}}),gu=Ye(vu,[["__scopeId","data-v-9cf8577d"]]),mu={ping:"/api/ping",getNodes:"/api/nodes",addNode:"/api/node",sshTest:"/api/ssh/test"},Su=()=>{const e=localStorage.getItem("cached-nodes");return e?JSON.parse(e):{}},bu=e=>localStorage.setItem("cached-nodes",JSON.stringify(e)),Cu=location.host,yu=location.origin,wu=async(e,t)=>new Promise(async(i,h)=>{try{const d=await fetch(`${yu}${mu.sshTest}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({node:e,cmds:t})});d.ok?i(await d.json()):h(`  ${d.status}`)}catch{h(" ")}});var Pi={exports:{}},En;function Eu(){return En||(En=1,function(e,t){(function(i,h){e.exports=h()})(globalThis,()=>(()=>{var i={4567:function(b,s,n){var u=this&&this.__decorate||function(r,o,p,C){var y,x=arguments.length,S=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,o,p,C);else for(var E=r.length-1;E>=0;E--)(y=r[E])&&(S=(x<3?y(S):x>3?y(o,p,S):y(o,p))||S);return x>3&&S&&Object.defineProperty(o,p,S),S},f=this&&this.__param||function(r,o){return function(p,C){o(p,C,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const l=n(9042),_=n(9924),g=n(844),w=n(4725),v=n(2585),a=n(3656);let c=s.AccessibilityManager=class extends g.Disposable{constructor(r,o,p,C){super(),this._terminal=r,this._coreBrowserService=p,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(y=>this._handleResize(y.rows))),this.register(this._terminal.onRender(y=>this._refreshRows(y.start,y.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(y=>this._handleChar(y))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(y=>this._handleTab(y))),this.register(this._terminal.onKey(y=>this._handleKey(y.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,a.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,g.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(r){for(let o=0;o<r;o++)this._handleChar(" ")}_handleChar(r){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(r){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(r)||this._charsToConsume.push(r)}_refreshRows(r,o){this._liveRegionDebouncer.refresh(r,o,this._terminal.rows)}_renderRows(r,o){const p=this._terminal.buffer,C=p.lines.length.toString();for(let y=r;y<=o;y++){const x=p.lines.get(p.ydisp+y),S=[],E=(x==null?void 0:x.translateToString(!0,void 0,void 0,S))||"",D=(p.ydisp+y+1).toString(),P=this._rowElements[y];P&&(E.length===0?(P.innerText="",this._rowColumns.set(P,[0,1])):(P.textContent=E,this._rowColumns.set(P,S)),P.setAttribute("aria-posinset",D),P.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(r,o){const p=r.target,C=this._rowElements[o===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(o===0?"1":`${this._terminal.buffer.lines.length}`)||r.relatedTarget!==C)return;let y,x;if(o===0?(y=p,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(y=this._rowElements.shift(),x=p,this._rowContainer.removeChild(y)),y.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),o===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(o===0?-1:1),this._rowElements[o===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}_handleSelectionChange(){var E;if(this._rowElements.length===0)return;const r=document.getSelection();if(!r)return;if(r.isCollapsed)return void(this._rowContainer.contains(r.anchorNode)&&this._terminal.clearSelection());if(!r.anchorNode||!r.focusNode)return void console.error("anchorNode and/or focusNode are null");let o={node:r.anchorNode,offset:r.anchorOffset},p={node:r.focusNode,offset:r.focusOffset};if((o.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||o.node===p.node&&o.offset>p.offset)&&([o,p]=[p,o]),o.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(o={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(o.node))return;const C=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:C,offset:((E=C.textContent)==null?void 0:E.length)??0}),!this._rowContainer.contains(p.node))return;const y=({node:D,offset:P})=>{const B=D instanceof Text?D.parentNode:D;let T=parseInt(B==null?void 0:B.getAttribute("aria-posinset"),10)-1;if(isNaN(T))return console.warn("row is invalid. Race condition?"),null;const U=this._rowColumns.get(B);if(!U)return console.warn("columns is null. Race condition?"),null;let z=P<U.length?U[P]:U.slice(-1)[0]+1;return z>=this._terminal.cols&&(++T,z=0),{row:T,column:z}},x=y(o),S=y(p);if(x&&S){if(x.row>S.row||x.row===S.row&&x.column>=S.column)throw new Error("invalid range");this._terminal.select(x.column,x.row,(S.row-x.row)*this._terminal.cols-x.column+S.column)}}_handleResize(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let o=this._rowContainer.children.length;o<this._terminal.rows;o++)this._rowElements[o]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[o]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const r=this._coreBrowserService.mainDocument.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}}_refreshRowDimensions(r){r.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=c=u([f(1,v.IInstantiationService),f(2,w.ICoreBrowserService),f(3,w.IRenderService)],c)},3614:(b,s)=>{function n(_){return _.replace(/\r?\n/g,"\r")}function u(_,g){return g?"\x1B[200~"+_+"\x1B[201~":_}function f(_,g,w,v){_=u(_=n(_),w.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(_,!0),g.value=""}function l(_,g,w){const v=w.getBoundingClientRect(),a=_.clientX-v.left-10,c=_.clientY-v.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${a}px`,g.style.top=`${c}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=n,s.bracketTextForPaste=u,s.copyHandler=function(_,g){_.clipboardData&&_.clipboardData.setData("text/plain",g.selectionText),_.preventDefault()},s.handlePasteEvent=function(_,g,w,v){_.stopPropagation(),_.clipboardData&&f(_.clipboardData.getData("text/plain"),g,w,v)},s.paste=f,s.moveTextAreaUnderMouseCursor=l,s.rightClickHandler=function(_,g,w,v,a){l(_,g,w),a&&v.rightClickSelect(_),g.value=v.selectionText,g.select()}},7239:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const u=n(1505);s.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(f,l,_){this._css.set(f,l,_)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,_){this._color.set(f,l,_)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(n,u,f,l){n.addEventListener(u,f,l);let _=!1;return{dispose:()=>{_||(_=!0,n.removeEventListener(u,f,l))}}}},3551:function(b,s,n){var u=this&&this.__decorate||function(c,r,o,p){var C,y=arguments.length,x=y<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,r,o,p);else for(var S=c.length-1;S>=0;S--)(C=c[S])&&(x=(y<3?C(x):y>3?C(r,o,x):C(r,o))||x);return y>3&&x&&Object.defineProperty(r,o,x),x},f=this&&this.__param||function(c,r){return function(o,p){r(o,p,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const l=n(3656),_=n(8460),g=n(844),w=n(2585),v=n(4725);let a=s.Linkifier=class extends g.Disposable{get currentLink(){return this._currentLink}constructor(c,r,o,p,C){super(),this._element=c,this._mouseService=r,this._renderService=o,this._bufferService=p,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{var y;this._lastMouseEvent=void 0,(y=this._activeProviderReplies)==null||y.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){this._lastMouseEvent=c;const r=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const o=c.composedPath();for(let p=0;p<o.length;p++){const C=o[p];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,r){var p,C;this._activeProviderReplies&&r||((p=this._activeProviderReplies)==null||p.forEach(y=>{y==null||y.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let o=!1;for(const[y,x]of this._linkProviderService.linkProviders.entries())r?(C=this._activeProviderReplies)!=null&&C.get(y)&&(o=this._checkLinkProviderResult(y,c,o)):x.provideLinks(c.y,S=>{var D,P;if(this._isMouseOut)return;const E=S==null?void 0:S.map(B=>({link:B}));(D=this._activeProviderReplies)==null||D.set(y,E),o=this._checkLinkProviderResult(y,c,o),((P=this._activeProviderReplies)==null?void 0:P.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,r){const o=new Set;for(let p=0;p<r.size;p++){const C=r.get(p);if(C)for(let y=0;y<C.length;y++){const x=C[y],S=x.link.range.start.y<c?0:x.link.range.start.x,E=x.link.range.end.y>c?this._bufferService.cols:x.link.range.end.x;for(let D=S;D<=E;D++){if(o.has(D)){C.splice(y--,1);break}o.add(D)}}}}_checkLinkProviderResult(c,r,o){var y;if(!this._activeProviderReplies)return o;const p=this._activeProviderReplies.get(c);let C=!1;for(let x=0;x<c;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(C=!0);if(!C&&p){const x=p.find(S=>this._linkAtPosition(S.link,r));x&&(o=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!o)for(let x=0;x<this._activeProviderReplies.size;x++){const S=(y=this._activeProviderReplies.get(x))==null?void 0:y.find(E=>this._linkAtPosition(E.link,r));if(S){o=!0,this._handleNewLink(S);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._currentLink)return;const r=this._positionFromMouseEvent(c,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,r){this._currentLink&&this._lastMouseEvent&&(!c||!r||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._lastMouseEvent)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(c.link,r)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var o,p;return(p=(o=this._currentLink)==null?void 0:o.state)==null?void 0:p.decorations.pointerCursor},set:o=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",o))}},underline:{get:()=>{var o,p;return(p=(o=this._currentLink)==null?void 0:o.state)==null?void 0:p.decorations.underline},set:o=>{var p,C,y;(p=this._currentLink)!=null&&p.state&&((y=(C=this._currentLink)==null?void 0:C.state)==null?void 0:y.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,o))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const p=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(p,C),this._lastMouseEvent)){const y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}})))}_linkHover(c,r,o){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(o,r.text)}_fireUnderlineEvent(c,r){const o=c.range,p=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-p-1,o.end.x,o.end.y-p-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(c,r,o){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(o,r.text)}_linkAtPosition(c,r){const o=c.range.start.y*this._bufferService.cols+c.range.start.x,p=c.range.end.y*this._bufferService.cols+c.range.end.x,C=r.y*this._bufferService.cols+r.x;return o<=C&&C<=p}_positionFromMouseEvent(c,r,o){const p=o.getCoords(c,r,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,r,o,p,C){return{x1:c,y1:r,x2:o,y2:p,cols:this._bufferService.cols,fg:C}}};s.Linkifier=a=u([f(1,v.IMouseService),f(2,v.IRenderService),f(3,w.IBufferService),f(4,v.ILinkProviderService)],a)},9042:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,s,n){var u=this&&this.__decorate||function(v,a,c,r){var o,p=arguments.length,C=p<3?a:r===null?r=Object.getOwnPropertyDescriptor(a,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,a,c,r);else for(var y=v.length-1;y>=0;y--)(o=v[y])&&(C=(p<3?o(C):p>3?o(a,c,C):o(a,c))||C);return p>3&&C&&Object.defineProperty(a,c,C),C},f=this&&this.__param||function(v,a){return function(c,r){a(c,r,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const l=n(511),_=n(2585);let g=s.OscLinkProvider=class{constructor(v,a,c){this._bufferService=v,this._optionsService=a,this._oscLinkService=c}provideLinks(v,a){var E;const c=this._bufferService.buffer.lines.get(v-1);if(!c)return void a(void 0);const r=[],o=this._optionsService.rawOptions.linkHandler,p=new l.CellData,C=c.getTrimmedLength();let y=-1,x=-1,S=!1;for(let D=0;D<C;D++)if(x!==-1||c.hasContent(D)){if(c.loadCell(D,p),p.hasExtendedAttrs()&&p.extended.urlId){if(x===-1){x=D,y=p.extended.urlId;continue}S=p.extended.urlId!==y}else x!==-1&&(S=!0);if(S||x!==-1&&D===C-1){const P=(E=this._oscLinkService.getLinkData(y))==null?void 0:E.uri;if(P){const B={start:{x:x+1,y:v},end:{x:D+(S||D!==C-1?0:1),y:v}};let T=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{const U=new URL(P);["http:","https:"].includes(U.protocol)||(T=!0)}catch{T=!0}T||r.push({text:P,range:B,activate:(U,z)=>o?o.activate(U,z,B):w(0,z),hover:(U,z)=>{var G;return(G=o==null?void 0:o.hover)==null?void 0:G.call(o,U,z,B)},leave:(U,z)=>{var G;return(G=o==null?void 0:o.leave)==null?void 0:G.call(o,U,z,B)}})}S=!1,p.hasExtendedAttrs()&&p.extended.urlId?(x=D,y=p.extended.urlId):(x=-1,y=-1)}}a(r)}};function w(v,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=g=u([f(0,_.IBufferService),f(1,_.IOptionsService),f(2,_.IOscLinkService)],g)},6193:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(n,u){this._renderCallback=n,this._coreBrowserService=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,u,f){this._rowCount=f,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const u=n(3614),f=n(3656),l=n(3551),_=n(9042),g=n(3730),w=n(1680),v=n(3107),a=n(5744),c=n(2950),r=n(1296),o=n(428),p=n(4269),C=n(5114),y=n(8934),x=n(3230),S=n(9312),E=n(4725),D=n(6731),P=n(8055),B=n(8969),T=n(8460),U=n(844),z=n(6114),G=n(8437),J=n(2584),V=n(7399),R=n(5941),M=n(9074),I=n(2585),H=n(5435),q=n(4567),Q=n(779);class oe extends B.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(A={}){super(A),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new U.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Q.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(g.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,N)=>this.refresh(k,N))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,U.toDisposable)(()=>{var k,N;this._customKeyEventHandler=void 0,(N=(k=this.element)==null?void 0:k.parentNode)==null||N.removeChild(this.element)}))}_handleColorEvent(A){if(this._themeService)for(const k of A){let N,$="";switch(k.index){case 256:N="foreground",$="10";break;case 257:N="background",$="11";break;case 258:N="cursor",$="12";break;default:N="ansi",$="4;"+k.index}switch(k.type){case 0:const X=P.color.toColorRGB(N==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[N]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${$};${(0,R.toRgbString)(X)}${J.C1_ESCAPED.ST}`);break;case 1:if(N==="ansi")this._themeService.modifyColors(L=>L.ansi[k.index]=P.channels.toColor(...k.color));else{const L=N;this._themeService.modifyColors(O=>O[L]=P.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(A){A?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var A;return(A=this.textarea)==null?void 0:A.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const A=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(A);if(!k)return;const N=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,X=k.getWidth(N),L=this._renderService.dimensions.css.cell.width*X,O=this.buffer.y*this._renderService.dimensions.css.cell.height,F=N*this._renderService.dimensions.css.cell.width;this.textarea.style.left=F+"px",this.textarea.style.top=O+"px",this.textarea.style.width=L+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,u.copyHandler)(k,this._selectionService)}));const A=k=>(0,u.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,f.addDisposableDomListener)(this.element,"paste",A)),z.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,u.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,u.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),z.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,u.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",A=>this._keyUp(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",A=>this._keyDown(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",A=>this._keyPress(A),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",A=>this._compositionHelper.compositionupdate(A))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",A=>this._inputEvent(A),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(A){var N;if(!A)throw new Error("Terminal requires a parent element.");if(A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((N=this.element)==null?void 0:N.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=A.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),A.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,f.addDisposableDomListener)(this.screenElement,"mousemove",$=>this.updateCursorStyle($))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,A.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(y.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(l.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const A=this,k=this.element;function N(L){const O=A._mouseService.getMouseReportCoords(L,A.screenElement);if(!O)return!1;let F,j;switch(L.overrideType||L.type){case"mousemove":j=32,L.buttons===void 0?(F=3,L.button!==void 0&&(F=L.button<3?L.button:3)):F=1&L.buttons?0:4&L.buttons?1:2&L.buttons?2:3;break;case"mouseup":j=0,F=L.button<3?L.button:3;break;case"mousedown":j=1,F=L.button<3?L.button:3;break;case"wheel":if(A._customWheelEventHandler&&A._customWheelEventHandler(L)===!1||A.viewport.getLinesScrolled(L)===0)return!1;j=L.deltaY<0?0:1,F=4;break;default:return!1}return!(j===void 0||F===void 0||F>4)&&A.coreMouseService.triggerMouseEvent({col:O.col,row:O.row,x:O.x,y:O.y,button:F,action:j,ctrl:L.ctrlKey,alt:L.altKey,shift:L.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:L=>(N(L),L.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(L)),wheel:L=>(N(L),this.cancel(L,!0)),mousedrag:L=>{L.buttons&&N(L)},mousemove:L=>{L.buttons||N(L)}};this.register(this.coreMouseService.onProtocolChange(L=>{L?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(L)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&L?$.mousemove||(k.addEventListener("mousemove",X.mousemove),$.mousemove=X.mousemove):(k.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&L?$.wheel||(k.addEventListener("wheel",X.wheel,{passive:!1}),$.wheel=X.wheel):(k.removeEventListener("wheel",$.wheel),$.wheel=null),2&L?$.mouseup||($.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&L?$.mousedrag||($.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(k,"mousedown",L=>{if(L.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(L))return N(L),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(L)})),this.register((0,f.addDisposableDomListener)(k,"wheel",L=>{if(!$.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(L)===!1)return!1;if(!this.buffer.hasScrollback){const O=this.viewport.getLinesScrolled(L);if(O===0)return;const F=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(L.deltaY<0?"A":"B");let j="";for(let K=0;K<Math.abs(O);K++)j+=F;return this.coreService.triggerDataEvent(j,!0),this.cancel(L,!0)}return this.viewport.handleWheel(L)?this.cancel(L):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(k,"touchstart",L=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(L),this.cancel(L)},{passive:!0})),this.register((0,f.addDisposableDomListener)(k,"touchmove",L=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(L)?void 0:this.cancel(L)},{passive:!1}))}refresh(A,k){var N;(N=this._renderService)==null||N.refreshRows(A,k)}updateCursorStyle(A){var k;(k=this._selectionService)!=null&&k.shouldColumnSelect(A)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(A,k,N=0){var $;N===1?(super.scrollLines(A,k,N),this.refresh(0,this.rows-1)):($=this.viewport)==null||$.scrollLines(A)}paste(A){(0,u.paste)(A,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(A){this._customKeyEventHandler=A}attachCustomWheelEventHandler(A){this._customWheelEventHandler=A}registerLinkProvider(A){return this._linkProviderService.registerLinkProvider(A)}registerCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(A){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)}registerDecoration(A){return this._decorationService.registerDecoration(A)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(A,k,N){this._selectionService.setSelection(A,k,N)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var A;(A=this._selectionService)==null||A.clearSelection()}selectAll(){var A;(A=this._selectionService)==null||A.selectAll()}selectLines(A,k){var N;(N=this._selectionService)==null||N.selectLines(A,k)}_keyDown(A){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&A.altKey;if(!k&&!this._compositionHelper.keydown(A))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const N=(0,V.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),N.type===3||N.type===2){const $=this.rows-1;return this.scrollLines(N.type===2?-$:$),this.cancel(A,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(N.cancel&&this.cancel(A,!0),!N.key||!!(A.key&&!A.ctrlKey&&!A.altKey&&!A.metaKey&&A.key.length===1&&A.key.charCodeAt(0)>=65&&A.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==J.C0.ETX&&N.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),!this.optionsService.rawOptions.screenReaderMode||A.altKey||A.ctrlKey?this.cancel(A,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(A,k){const N=A.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||A.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||A.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?N:N&&(!k.keyCode||k.keyCode>47)}_keyUp(A){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)}_keyPress(A){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)k=A.charCode;else if(A.which===null||A.which===void 0)k=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;k=A.which}return!(!k||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(A){if(A.data&&A.inputType==="insertText"&&(!A.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=A.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(A),!0}return!1}resize(A,k){A!==this.cols||k!==this.rows?super.resize(A,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(A,k){var N,$;(N=this._charSizeService)==null||N.measure(),($=this.viewport)==null||$.syncScrollArea(!0)}clear(){var A;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(G.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(A=this.viewport)==null||A.reset(),this.refresh(0,this.rows-1)}}reset(){var k,N;this.options.rows=this.rows,this.options.cols=this.cols;const A=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)==null||k.reset(),this._decorationService.reset(),(N=this.viewport)==null||N.reset(),this._customKeyEventHandler=A,this.refresh(0,this.rows-1)}clearTextureAtlas(){var A;(A=this._renderService)==null||A.clearTextureAtlas()}_reportFocus(){var A;(A=this.element)!=null&&A.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(A){if(this._renderService)switch(A){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),N=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${N};${k}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${X};${$}t`)}}cancel(A,k){if(this.options.cancelEvents||k)return A.preventDefault(),A.stopPropagation(),!1}}s.Terminal=oe},9924:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(n,u=1e3){this._renderCallback=n,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,u,f){this._rowCount=f,n=n!==void 0?n:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=l-this._lastRefreshMs,g=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,u)}}},1680:function(b,s,n){var u=this&&this.__decorate||function(c,r,o,p){var C,y=arguments.length,x=y<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,r,o,p);else for(var S=c.length-1;S>=0;S--)(C=c[S])&&(x=(y<3?C(x):y>3?C(r,o,x):C(r,o))||x);return y>3&&x&&Object.defineProperty(r,o,x),x},f=this&&this.__param||function(c,r){return function(o,p){r(o,p,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const l=n(3656),_=n(4725),g=n(8460),w=n(844),v=n(2585);let a=s.Viewport=class extends w.Disposable{constructor(c,r,o,p,C,y,x,S){super(),this._viewportElement=c,this._scrollArea=r,this._bufferService=o,this._optionsService=p,this._charSizeService=C,this._renderService=y,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const r=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==r&&(this._lastRecordedBufferHeight=r,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,r){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&o<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const r=this._getPixelsScrolled(c);return r!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+r:this._smoothScrollState.target+=r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=r,this._bubbleScroll(c,r))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const r=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let r=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r}getBufferElements(c,r){var S;let o,p="";const C=[],y=r??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let E=c;E<y;E++){const D=x.get(E);if(!D)continue;const P=(S=x.get(E+1))==null?void 0:S.isWrapped;if(p+=D.translateToString(!P),!P||E===x.length-1){const B=document.createElement("div");B.textContent=p,C.push(B),p.length>0&&(o=B),p=""}}return{bufferElements:C,cursorElement:o}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let r=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(c,r){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&r.altKey||o==="ctrl"&&r.ctrlKey||o==="shift"&&r.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const r=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(c,r))}};s.Viewport=a=u([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,_.ICharSizeService),f(5,_.IRenderService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],a)},3107:function(b,s,n){var u=this&&this.__decorate||function(v,a,c,r){var o,p=arguments.length,C=p<3?a:r===null?r=Object.getOwnPropertyDescriptor(a,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,a,c,r);else for(var y=v.length-1;y>=0;y--)(o=v[y])&&(C=(p<3?o(C):p>3?o(a,c,C):o(a,c))||C);return p>3&&C&&Object.defineProperty(a,c,C),C},f=this&&this.__param||function(v,a){return function(c,r){a(c,r,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const l=n(4725),_=n(844),g=n(2585);let w=s.BufferDecorationRenderer=class extends _.Disposable{constructor(v,a,c,r,o){super(),this._screenElement=v,this._bufferService=a,this._coreBrowserService=c,this._decorationService=r,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const v of this._decorationService.decorations)this._renderDecoration(v);this._dimensionsChanged=!1}_renderDecoration(v){this._refreshStyle(v),this._dimensionsChanged&&this._refreshXPosition(v)}_createElement(v){var r;const a=this._coreBrowserService.mainDocument.createElement("div");a.classList.add("xterm-decoration"),a.classList.toggle("xterm-decoration-top-layer",((r=v==null?void 0:v.options)==null?void 0:r.layer)==="top"),a.style.width=`${Math.round((v.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,a.style.height=(v.options.height||1)*this._renderService.dimensions.css.cell.height+"px",a.style.top=(v.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",a.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=v.options.x??0;return c&&c>this._bufferService.cols&&(a.style.display="none"),this._refreshXPosition(v,a),a}_refreshStyle(v){const a=v.marker.line-this._bufferService.buffers.active.ydisp;if(a<0||a>=this._bufferService.rows)v.element&&(v.element.style.display="none",v.onRenderEmitter.fire(v.element));else{let c=this._decorationElements.get(v);c||(c=this._createElement(v),v.element=c,this._decorationElements.set(v,c),this._container.appendChild(c),v.onDispose(()=>{this._decorationElements.delete(v),c.remove()})),c.style.top=a*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",v.onRenderEmitter.fire(c)}}_refreshXPosition(v,a=v.element){if(!a)return;const c=v.options.x??0;(v.options.anchor||"left")==="right"?a.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":a.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(v){var a;(a=this._decorationElements.get(v))==null||a.remove(),this._decorationElements.delete(v),v.dispose()}};s.BufferDecorationRenderer=w=u([f(1,g.IBufferService),f(2,l.ICoreBrowserService),f(3,g.IDecorationService),f(4,l.IRenderService)],w)},5871:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const u of this._zones)if(u.color===n.options.overviewRulerOptions.color&&u.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,n.marker.line))return;if(this._lineAdjacentToZone(u,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(u,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,u){return u>=n.startBufferLine&&u<=n.endBufferLine}_lineAdjacentToZone(n,u,f){return u>=n.startBufferLine-this._linePadding[f||"full"]&&u<=n.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(n,u){n.startBufferLine=Math.min(n.startBufferLine,u),n.endBufferLine=Math.max(n.endBufferLine,u)}}},5744:function(b,s,n){var u=this&&this.__decorate||function(o,p,C,y){var x,S=arguments.length,E=S<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,C):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,p,C,y);else for(var D=o.length-1;D>=0;D--)(x=o[D])&&(E=(S<3?x(E):S>3?x(p,C,E):x(p,C))||E);return S>3&&E&&Object.defineProperty(p,C,E),E},f=this&&this.__param||function(o,p){return function(C,y){p(C,y,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const l=n(5871),_=n(4725),g=n(844),w=n(2585),v={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let r=s.OverviewRulerRenderer=class extends g.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(o,p,C,y,x,S,E){var P;super(),this._viewportElement=o,this._screenElement=p,this._bufferService=C,this._decorationService=y,this._renderService=x,this._optionsService=S,this._coreBrowserService=E,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(P=this._viewportElement.parentElement)==null||P.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,g.toDisposable)(()=>{var B;(B=this._canvas)==null||B.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const o=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);a.full=this._canvas.width,a.left=o,a.center=p,a.right=o,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=a.left,c.right=a.left+a.center}_refreshDrawHeightConstants(){v.full=Math.round(2*this._coreBrowserService.dpr);const o=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(o,12),6)*this._coreBrowserService.dpr);v.left=p,v.center=p,v.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*v.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const o=this._colorZoneStore.zones;for(const p of o)p.position!=="full"&&this._renderColorZone(p);for(const p of o)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(o){this._ctx.fillStyle=o.color,this._ctx.fillRect(c[o.position||"full"],Math.round((this._canvas.height-1)*(o.startBufferLine/this._bufferService.buffers.active.lines.length)-v[o.position||"full"]/2),a[o.position||"full"],Math.round((this._canvas.height-1)*((o.endBufferLine-o.startBufferLine)/this._bufferService.buffers.active.lines.length)+v[o.position||"full"]))}_queueRefresh(o,p){this._shouldUpdateDimensions=o||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=r=u([f(2,w.IBufferService),f(3,w.IDecorationService),f(4,_.IRenderService),f(5,w.IOptionsService),f(6,_.ICoreBrowserService)],r)},2950:function(b,s,n){var u=this&&this.__decorate||function(v,a,c,r){var o,p=arguments.length,C=p<3?a:r===null?r=Object.getOwnPropertyDescriptor(a,c):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(v,a,c,r);else for(var y=v.length-1;y>=0;y--)(o=v[y])&&(C=(p<3?o(C):p>3?o(a,c,C):o(a,c))||C);return p>3&&C&&Object.defineProperty(a,c,C),C},f=this&&this.__param||function(v,a){return function(c,r){a(c,r,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const l=n(4725),_=n(2585),g=n(2584);let w=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,a,c,r,o,p){this._textarea=v,this._compositionView=a,this._bufferService=c,this._optionsService=r,this._coreService=o,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const a=this._textarea.value,c=a.replace(v,"");this._dataAlreadySent=c,a.length>v.length?this._coreService.triggerDataEvent(c,!0):a.length<v.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):a.length===v.length&&a!==v&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=w=u([f(2,_.IBufferService),f(3,_.IOptionsService),f(4,_.ICoreService),f(5,l.IRenderService)],w)},9806:(b,s)=>{function n(u,f,l){const _=l.getBoundingClientRect(),g=u.getComputedStyle(l),w=parseInt(g.getPropertyValue("padding-left")),v=parseInt(g.getPropertyValue("padding-top"));return[f.clientX-_.left-w,f.clientY-_.top-v]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=n,s.getCoords=function(u,f,l,_,g,w,v,a,c){if(!w)return;const r=n(u,f,l);return r?(r[0]=Math.ceil((r[0]+(c?v/2:0))/v),r[1]=Math.ceil(r[1]/a),r[0]=Math.min(Math.max(r[0],1),_+(c?1:0)),r[1]=Math.min(Math.max(r[1],1),g),r):void 0}},9504:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const u=n(2584);function f(a,c,r,o){const p=a-l(a,r),C=c-l(c,r),y=Math.abs(p-C)-function(x,S,E){let D=0;const P=x-l(x,E),B=S-l(S,E);for(let T=0;T<Math.abs(P-B);T++){const U=_(x,S)==="A"?-1:1,z=E.buffer.lines.get(P+U*T);z!=null&&z.isWrapped&&D++}return D}(a,c,r);return v(y,w(_(a,c),o))}function l(a,c){let r=0,o=c.buffer.lines.get(a),p=o==null?void 0:o.isWrapped;for(;p&&a>=0&&a<c.rows;)r++,o=c.buffer.lines.get(--a),p=o==null?void 0:o.isWrapped;return r}function _(a,c){return a>c?"A":"B"}function g(a,c,r,o,p,C){let y=a,x=c,S="";for(;y!==r||x!==o;)y+=p?1:-1,p&&y>C.cols-1?(S+=C.buffer.translateBufferLineToString(x,!1,a,y),y=0,a=0,x++):!p&&y<0&&(S+=C.buffer.translateBufferLineToString(x,!1,0,a+1),y=C.cols-1,a=y,x--);return S+C.buffer.translateBufferLineToString(x,!1,a,y)}function w(a,c){const r=c?"O":"[";return u.C0.ESC+r+a}function v(a,c){a=Math.floor(a);let r="";for(let o=0;o<a;o++)r+=c;return r}s.moveToCellSequence=function(a,c,r,o){const p=r.buffer.x,C=r.buffer.y;if(!r.buffer.hasScrollback)return function(S,E,D,P,B,T){return f(E,P,B,T).length===0?"":v(g(S,E,S,E-l(E,B),!1,B).length,w("D",T))}(p,C,0,c,r,o)+f(C,c,r,o)+function(S,E,D,P,B,T){let U;U=f(E,P,B,T).length>0?P-l(P,B):E;const z=P,G=function(J,V,R,M,I,H){let q;return q=f(R,M,I,H).length>0?M-l(M,I):V,J<R&&q<=M||J>=R&&q<M?"C":"D"}(S,E,D,P,B,T);return v(g(S,U,D,z,G==="C",B).length,w(G,T))}(p,C,a,c,r,o);let y;if(C===c)return y=p>a?"D":"C",v(Math.abs(p-a),w(y,o));y=C>c?"D":"C";const x=Math.abs(C-c);return v(function(S,E){return E.cols-S}(C>c?a:p,r)+(x-1)*r.cols+1+((C>c?p:a)-1),w(y,o))}},1296:function(b,s,n){var u=this&&this.__decorate||function(T,U,z,G){var J,V=arguments.length,R=V<3?U:G===null?G=Object.getOwnPropertyDescriptor(U,z):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(T,U,z,G);else for(var M=T.length-1;M>=0;M--)(J=T[M])&&(R=(V<3?J(R):V>3?J(U,z,R):J(U,z))||R);return V>3&&R&&Object.defineProperty(U,z,R),R},f=this&&this.__param||function(T,U){return function(z,G){U(z,G,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const l=n(3787),_=n(2550),g=n(2223),w=n(6171),v=n(6052),a=n(4725),c=n(8055),r=n(8460),o=n(844),p=n(2585),C="xterm-dom-renderer-owner-",y="xterm-rows",x="xterm-fg-",S="xterm-bg-",E="xterm-focus",D="xterm-selection";let P=1,B=s.DomRenderer=class extends o.Disposable{constructor(T,U,z,G,J,V,R,M,I,H,q,Q,oe){super(),this._terminal=T,this._document=U,this._element=z,this._screenElement=G,this._viewportElement=J,this._helperContainer=V,this._linkifier2=R,this._charSizeService=I,this._optionsService=H,this._bufferService=q,this._coreBrowserService=Q,this._themeService=oe,this._terminalClass=P++,this._rowElements=[],this._selectionRenderModel=(0,v.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=M.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const U=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=U,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let U=`${this._terminalSelector} .${y} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;U+=`${this._terminalSelector} .${y} .xterm-dim { color: ${c.color.multiplyOpacity(T.foreground,.5).css};}`,U+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const z=`blink_underline_${this._terminalClass}`,G=`blink_bar_${this._terminalClass}`,J=`blink_block_${this._terminalClass}`;U+=`@keyframes ${z} { 50% {  border-bottom-style: hidden; }}`,U+=`@keyframes ${G} { 50% {  box-shadow: none; }}`,U+=`@keyframes ${J} { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,U+=`${this._terminalSelector} .${y}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${y}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${G} 1s step-end infinite;}${this._terminalSelector} .${y}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${T.cursor.css} !important; color: ${T.cursorAccent.css} !important;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,U+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[V,R]of T.ansi.entries())U+=`${this._terminalSelector} .${x}${V} { color: ${R.css}; }${this._terminalSelector} .${x}${V}.xterm-dim { color: ${c.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${S}${V} { background-color: ${R.css}; }`;U+=`${this._terminalSelector} .${x}${g.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(T.background).css}; }${this._terminalSelector} .${x}${g.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${S}${g.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=U}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,U){for(let z=this._rowElements.length;z<=U;z++){const G=this._document.createElement("div");this._rowContainer.appendChild(G),this._rowElements.push(G)}for(;this._rowElements.length>U;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,U){this._refreshRowElements(T,U),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,U,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,U,z),this.renderRows(0,this._bufferService.rows-1),!T||!U)return;this._selectionRenderModel.update(this._terminal,T,U,z);const G=this._selectionRenderModel.viewportStartRow,J=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,R=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||R<0)return;const M=this._document.createDocumentFragment();if(z){const I=T[0]>U[0];M.appendChild(this._createSelectionElement(V,I?U[0]:T[0],I?T[0]:U[0],R-V+1))}else{const I=G===V?T[0]:0,H=V===J?U[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(V,I,H));const q=R-V-1;if(M.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,q)),V!==R){const Q=J===R?U[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(R,0,Q))}}this._selectionContainer.appendChild(M)}_createSelectionElement(T,U,z,G=1){const J=this._document.createElement("div"),V=U*this.dimensions.css.cell.width;let R=this.dimensions.css.cell.width*(z-U);return V+R>this.dimensions.css.canvas.width&&(R=this.dimensions.css.canvas.width-V),J.style.height=G*this.dimensions.css.cell.height+"px",J.style.top=T*this.dimensions.css.cell.height+"px",J.style.left=`${V}px`,J.style.width=`${R}px`,J}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,U){const z=this._bufferService.buffer,G=z.ybase+z.y,J=Math.min(z.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let I=T;I<=U;I++){const H=I+z.ydisp,q=this._rowElements[I],Q=z.lines.get(H);if(!q||!Q)break;q.replaceChildren(...this._rowFactory.createRow(Q,H,H===G,R,M,J,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,U,z,G,J,V){z<0&&(T=0),G<0&&(U=0);const R=this._bufferService.rows-1;z=Math.max(Math.min(z,R),0),G=Math.max(Math.min(G,R),0),J=Math.min(J,this._bufferService.cols);const M=this._bufferService.buffer,I=M.ybase+M.y,H=Math.min(M.x,J-1),q=this._optionsService.rawOptions.cursorBlink,Q=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=z;re<=G;++re){const A=re+M.ydisp,k=this._rowElements[re],N=M.lines.get(A);if(!k||!N)break;k.replaceChildren(...this._rowFactory.createRow(N,A,A===I,Q,oe,H,q,this.dimensions.css.cell.width,this._widthCache,V?re===z?T:0:-1,V?(re===G?U:J)-1:-1))}}};s.DomRenderer=B=u([f(7,p.IInstantiationService),f(8,a.ICharSizeService),f(9,p.IOptionsService),f(10,p.IBufferService),f(11,a.ICoreBrowserService),f(12,a.IThemeService)],B)},3787:function(b,s,n){var u=this&&this.__decorate||function(y,x,S,E){var D,P=arguments.length,B=P<3?x:E===null?E=Object.getOwnPropertyDescriptor(x,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,x,S,E);else for(var T=y.length-1;T>=0;T--)(D=y[T])&&(B=(P<3?D(B):P>3?D(x,S,B):D(x,S))||B);return P>3&&B&&Object.defineProperty(x,S,B),B},f=this&&this.__param||function(y,x){return function(S,E){x(S,E,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const l=n(2223),_=n(643),g=n(511),w=n(2585),v=n(8055),a=n(4725),c=n(4269),r=n(6171),o=n(3734);let p=s.DomRendererRowFactory=class{constructor(y,x,S,E,D,P,B){this._document=y,this._characterJoinerService=x,this._optionsService=S,this._coreBrowserService=E,this._coreService=D,this._decorationService=P,this._themeService=B,this._workCell=new g.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(y,x,S){this._selectionStart=y,this._selectionEnd=x,this._columnSelectMode=S}createRow(y,x,S,E,D,P,B,T,U,z,G){const J=[],V=this._characterJoinerService.getJoinedCharacters(x),R=this._themeService.colors;let M,I=y.getNoBgTrimmedLength();S&&I<P+1&&(I=P+1);let H=0,q="",Q=0,oe=0,re=0,A=!1,k=0,N=!1,$=0;const X=[],L=z!==-1&&G!==-1;for(let O=0;O<I;O++){y.loadCell(O,this._workCell);let F=this._workCell.getWidth();if(F===0)continue;let j=!1,K=O,W=this._workCell;if(V.length>0&&O===V[0][0]){j=!0;const _e=V.shift();W=new c.JoinedCellData(this._workCell,y.translateToString(!0,_e[0],_e[1]),_e[1]-_e[0]),K=_e[1]-1,F=W.getWidth()}const se=this._isCellInSelection(O,x),ee=S&&O===P,Z=L&&O>=z&&O<=G;let Y=!1;this._decorationService.forEachDecorationAtCell(O,x,void 0,_e=>{Y=!0});let le=W.getChars()||_.WHITESPACE_CELL_CHAR;if(le===" "&&(W.isUnderline()||W.isOverline())&&(le=""),$=F*T-U.get(le,W.isBold(),W.isItalic()),M){if(H&&(se&&N||!se&&!N&&W.bg===Q)&&(se&&N&&R.selectionForeground||W.fg===oe)&&W.extended.ext===re&&Z===A&&$===k&&!ee&&!j&&!Y){W.isInvisible()?q+=_.WHITESPACE_CELL_CHAR:q+=le,H++;continue}H&&(M.textContent=q),M=this._document.createElement("span"),H=0,q=""}else M=this._document.createElement("span");if(Q=W.bg,oe=W.fg,re=W.extended.ext,A=Z,k=$,N=se,j&&P>=O&&P<=K&&(P=O),!this._coreService.isCursorHidden&&ee&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)B&&X.push("xterm-cursor-blink"),X.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(W.isBold()&&X.push("xterm-bold"),W.isItalic()&&X.push("xterm-italic"),W.isDim()&&X.push("xterm-dim"),q=W.isInvisible()?_.WHITESPACE_CELL_CHAR:W.getChars()||_.WHITESPACE_CELL_CHAR,W.isUnderline()&&(X.push(`xterm-underline-${W.extended.underlineStyle}`),q===" "&&(q=""),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let _e=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&_e<8&&(_e+=8),M.style.textDecorationColor=R.ansi[_e].css}W.isOverline()&&(X.push("xterm-overline"),q===" "&&(q="")),W.isStrikethrough()&&X.push("xterm-strikethrough"),Z&&(M.style.textDecoration="underline");let te=W.getFgColor(),ne=W.getFgColorMode(),ae=W.getBgColor(),ue=W.getBgColorMode();const ge=!!W.isInverse();if(ge){const _e=te;te=ae,ae=_e;const At=ne;ne=ue,ue=At}let fe,Le,we,Be=!1;switch(this._decorationService.forEachDecorationAtCell(O,x,void 0,_e=>{_e.options.layer!=="top"&&Be||(_e.backgroundColorRGB&&(ue=50331648,ae=_e.backgroundColorRGB.rgba>>8&16777215,fe=_e.backgroundColorRGB),_e.foregroundColorRGB&&(ne=50331648,te=_e.foregroundColorRGB.rgba>>8&16777215,Le=_e.foregroundColorRGB),Be=_e.options.layer==="top")}),!Be&&se&&(fe=this._coreBrowserService.isFocused?R.selectionBackgroundOpaque:R.selectionInactiveBackgroundOpaque,ae=fe.rgba>>8&16777215,ue=50331648,Be=!0,R.selectionForeground&&(ne=50331648,te=R.selectionForeground.rgba>>8&16777215,Le=R.selectionForeground)),Be&&X.push("xterm-decoration-top"),ue){case 16777216:case 33554432:we=R.ansi[ae],X.push(`xterm-bg-${ae}`);break;case 50331648:we=v.channels.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle(M,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ge?(we=R.foreground,X.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):we=R.background}switch(fe||W.isDim()&&(fe=v.color.multiplyOpacity(we,.5)),ne){case 16777216:case 33554432:W.isBold()&&te<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(te+=8),this._applyMinimumContrast(M,we,R.ansi[te],W,fe,void 0)||X.push(`xterm-fg-${te}`);break;case 50331648:const _e=v.channels.toColor(te>>16&255,te>>8&255,255&te);this._applyMinimumContrast(M,we,_e,W,fe,Le)||this._addStyle(M,`color:#${C(te.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,we,R.foreground,W,fe,Le)||ge&&X.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}X.length&&(M.className=X.join(" "),X.length=0),ee||j||Y?M.textContent=q:H++,$!==this.defaultSpacing&&(M.style.letterSpacing=`${$}px`),J.push(M),O=K}return M&&H&&(M.textContent=q),J}_applyMinimumContrast(y,x,S,E,D,P){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,r.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const B=this._getContrastCache(E);let T;if(D||P||(T=B.getColor(x.rgba,S.rgba)),T===void 0){const U=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);T=v.color.ensureContrastRatio(D||x,P||S,U),B.setColor((D||x).rgba,(P||S).rgba,T??null)}return!!T&&(this._addStyle(y,`color:${T.css}`),!0)}_getContrastCache(y){return y.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(y,x){y.setAttribute("style",`${y.getAttribute("style")||""}${x};`)}_isCellInSelection(y,x){const S=this._selectionStart,E=this._selectionEnd;return!(!S||!E)&&(this._columnSelectMode?S[0]<=E[0]?y>=S[0]&&x>=S[1]&&y<E[0]&&x<=E[1]:y<S[0]&&x>=S[1]&&y>=E[0]&&x<=E[1]:x>S[1]&&x<E[1]||S[1]===E[1]&&x===S[1]&&y>=S[0]&&y<E[0]||S[1]<E[1]&&x===E[1]&&y<E[0]||S[1]<E[1]&&x===S[1]&&y>=S[0])}};function C(y,x,S){for(;y.length<S;)y=x+y;return y}s.DomRendererRowFactory=p=u([f(1,a.ICharacterJoinerService),f(2,w.IOptionsService),f(3,a.ICoreBrowserService),f(4,w.ICoreService),f(5,w.IDecorationService),f(6,a.IThemeService)],p)},2550:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(n,u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=n.createElement("span");f.classList.add("xterm-char-measure-element");const l=n.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";const _=n.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const g=n.createElement("span");g.classList.add("xterm-char-measure-element"),g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[f,l,_,g],this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(_),this._container.appendChild(g),u.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,u,f,l){n===this._font&&u===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=n,this._fontSize=u,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(n,u,f){let l=0;if(!u&&!f&&n.length===1&&(l=n.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];const w=this._measure(n,0);return w>0&&(this._flat[l]=w),w}let _=n;u&&(_+="B"),f&&(_+="I");let g=this._holey.get(_);if(g===void 0){let w=0;u&&(w|=1),f&&(w|=2),g=this._measure(n,w),g>0&&this._holey.set(_,g)}return g}_measure(n,u){const f=this._measureElements[u];return f.textContent=n.repeat(32),f.offsetWidth/32}}},2223:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const u=n(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(b,s)=>{function n(f){return 57508<=f&&f<=57558}function u(f){return f>=128512&&f<=128591||f>=127744&&f<=128511||f>=128640&&f<=128767||f>=9728&&f<=9983||f>=9984&&f<=10175||f>=65024&&f<=65039||f>=129280&&f<=129535||f>=127462&&f<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},s.isPowerlineGlyph=n,s.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},s.isEmoji=u,s.allowRescaling=function(f,l,_,g){return l===1&&_>Math.ceil(1.5*g)&&f!==void 0&&f>255&&!u(f)&&!n(f)&&!function(w){return 57344<=w&&w<=63743}(f)},s.treatGlyphAsBackgroundColor=function(f){return n(f)||function(l){return 9472<=l&&l<=9631}(f)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(f,l,_=0){return(f-(2*Math.round(l)-_))%(2*Math.round(l))}},6052:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,l,_,g=!1){if(this.selectionStart=l,this.selectionEnd=_,!l||!_||l[0]===_[0]&&l[1]===_[1])return void this.clear();const w=f.buffers.active.ydisp,v=l[1]-w,a=_[1]-w,c=Math.max(v,0),r=Math.min(a,f.rows-1);c>=f.rows||r<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=g,this.viewportStartRow=v,this.viewportEndRow=a,this.viewportCappedStartRow=c,this.viewportCappedEndRow=r,this.startCol=l[0],this.endCol=_[0])}isCellSelected(f,l,_){return!!this.hasSelection&&(_-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&_>=this.viewportCappedStartRow&&l<this.endCol&&_<=this.viewportCappedEndRow:l<this.startCol&&_>=this.viewportCappedStartRow&&l>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&l>=this.startCol)}}s.createSelectionRenderModel=function(){return new n}},456:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,u=this.selectionEnd;return!(!n||!u)&&(n[1]>u[1]||n[1]===u[1]&&n[0]>u[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,s,n){var u=this&&this.__decorate||function(r,o,p,C){var y,x=arguments.length,S=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,o,p,C);else for(var E=r.length-1;E>=0;E--)(y=r[E])&&(S=(x<3?y(S):x>3?y(o,p,S):y(o,p))||S);return x>3&&S&&Object.defineProperty(o,p,S),S},f=this&&this.__param||function(r,o){return function(p,C){o(p,C,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const l=n(2585),_=n(8460),g=n(844);let w=s.CharSizeService=class extends g.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(r,o,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new c(this._optionsService))}catch{this._measureStrategy=this.register(new a(r,o,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())}};s.CharSizeService=w=u([f(2,l.IOptionsService)],w);class v extends g.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(o,p){o!==void 0&&o>0&&p!==void 0&&p>0&&(this._result.width=o,this._result.height=p)}}class a extends v{constructor(o,p,C){super(),this._document=o,this._parentElement=p,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class c extends v{constructor(o){super(),this._optionsService=o,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const o=this._ctx.measureText("W");return this._validateAndSet(o.width,o.fontBoundingBoxAscent+o.fontBoundingBoxDescent),this._result}}},4269:function(b,s,n){var u=this&&this.__decorate||function(c,r,o,p){var C,y=arguments.length,x=y<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,r,o,p);else for(var S=c.length-1;S>=0;S--)(C=c[S])&&(x=(y<3?C(x):y>3?C(r,o,x):C(r,o))||x);return y>3&&x&&Object.defineProperty(r,o,x),x},f=this&&this.__param||function(c,r){return function(o,p){r(o,p,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const l=n(3734),_=n(643),g=n(511),w=n(2585);class v extends l.AttributeData{constructor(r,o,p){super(),this.content=0,this.combinedData="",this.fg=r.fg,this.bg=r.bg,this.combinedData=o,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(r){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=v;let a=s.CharacterJoinerService=class fa{constructor(r){this._bufferService=r,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(r){const o={id:this._nextCharacterJoinerId++,handler:r};return this._characterJoiners.push(o),o.id}deregister(r){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===r)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(r){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(r);if(!o||o.length===0)return[];const p=[],C=o.translateToString(!0);let y=0,x=0,S=0,E=o.getFg(0),D=o.getBg(0);for(let P=0;P<o.getTrimmedLength();P++)if(o.loadCell(P,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==D){if(P-y>1){const B=this._getJoinedRanges(C,S,x,o,y);for(let T=0;T<B.length;T++)p.push(B[T])}y=P,S=x,E=this._workCell.fg,D=this._workCell.bg}x+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1){const P=this._getJoinedRanges(C,S,x,o,y);for(let B=0;B<P.length;B++)p.push(P[B])}return p}_getJoinedRanges(r,o,p,C,y){const x=r.substring(o,p);let S=[];try{S=this._characterJoiners[0].handler(x)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const D=this._characterJoiners[E].handler(x);for(let P=0;P<D.length;P++)fa._mergeRanges(S,D[P])}catch(D){console.error(D)}return this._stringRangesToCellRanges(S,C,y),S}_stringRangesToCellRanges(r,o,p){let C=0,y=!1,x=0,S=r[C];if(S){for(let E=p;E<this._bufferService.cols;E++){const D=o.getWidth(E),P=o.getString(E).length||_.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!y&&S[0]<=x&&(S[0]=E,y=!0),S[1]<=x){if(S[1]=E,S=r[++C],!S)break;S[0]<=x?(S[0]=E,y=!0):y=!1}x+=P}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(r,o){let p=!1;for(let C=0;C<r.length;C++){const y=r[C];if(p){if(o[1]<=y[0])return r[C-1][1]=o[1],r;if(o[1]<=y[1])return r[C-1][1]=Math.max(o[1],y[1]),r.splice(C,1),r;r.splice(C,1),C--}else{if(o[1]<=y[0])return r.splice(C,0,o),r;if(o[1]<=y[1])return y[0]=Math.min(o[0],y[0]),r;o[0]<y[1]&&(y[0]=Math.min(o[0],y[0]),p=!0)}}return p?r[r.length-1][1]=o[1]:r.push(o),r}};s.CharacterJoinerService=a=u([f(0,w.IBufferService)],a)},5114:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const u=n(844),f=n(8460),l=n(3656);class _ extends u.Disposable{constructor(v,a,c){super(),this._textarea=v,this._window=a,this.mainDocument=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new g(this._window),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new f.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(r=>this._screenDprMonitor.setWindow(r))),this.register((0,f.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(v){this._window!==v&&(this._window=v,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=_;class g extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._windowResizeListener=this.register(new u.MutableDisposable),this._onDprChange=this.register(new f.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,u.toDisposable)(()=>this.clearListener()))}setWindow(v){this._parentWindow=v,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,l.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)==null||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const u=n(844);class f extends u.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,u.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const g=this.linkProviders.indexOf(_);g!==-1&&this.linkProviders.splice(g,1)}}}}s.LinkProviderService=f},8934:function(b,s,n){var u=this&&this.__decorate||function(w,v,a,c){var r,o=arguments.length,p=o<3?v:c===null?c=Object.getOwnPropertyDescriptor(v,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(w,v,a,c);else for(var C=w.length-1;C>=0;C--)(r=w[C])&&(p=(o<3?r(p):o>3?r(v,a,p):r(v,a))||p);return o>3&&p&&Object.defineProperty(v,a,p),p},f=this&&this.__param||function(w,v){return function(a,c){v(a,c,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const l=n(4725),_=n(9806);let g=s.MouseService=class{constructor(w,v){this._renderService=w,this._charSizeService=v}getCoords(w,v,a,c,r){return(0,_.getCoords)(window,w,v,a,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(w,v){const a=(0,_.getCoordsRelativeToElement)(window,w,v);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};s.MouseService=g=u([f(0,l.IRenderService),f(1,l.ICharSizeService)],g)},3230:function(b,s,n){var u=this&&this.__decorate||function(r,o,p,C){var y,x=arguments.length,S=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,o,p,C);else for(var E=r.length-1;E>=0;E--)(y=r[E])&&(S=(x<3?y(S):x>3?y(o,p,S):y(o,p))||S);return x>3&&S&&Object.defineProperty(o,p,S),S},f=this&&this.__param||function(r,o){return function(p,C){o(p,C,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const l=n(6193),_=n(4725),g=n(8460),w=n(844),v=n(7226),a=n(2585);let c=s.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(r,o,p,C,y,x,S,E){super(),this._rowCount=r,this._charSizeService=C,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new l.RenderDebouncer((D,P)=>this._renderRows(D,P),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(x.onResize(()=>this._fullRefresh())),this.register(x.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)==null?void 0:D.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(y.onDecorationRegistered(()=>this._fullRefresh())),this.register(y.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(x.cols,x.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(x.buffer.y,x.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,o),this.register(S.onWindowChange(D=>this._registerIntersectionObserver(D,o)))}_registerIntersectionObserver(r,o){if("IntersectionObserver"in r){const p=new r.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});p.observe(o),this._observerDisposable.value=(0,w.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(r){this._isPaused=r.isIntersecting===void 0?r.intersectionRatio===0:!r.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(r,o,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(r,o,this._rowCount))}_renderRows(r,o){this._renderer.value&&(r=Math.min(r,this._rowCount-1),o=Math.min(o,this._rowCount-1),this._renderer.value.renderRows(r,o),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:r,end:o}),this._onRender.fire({start:r,end:o}),this._isNextRenderRedrawOnly=!0)}resize(r,o){this._rowCount=o,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(r){this._renderer.value=r,this._renderer.value&&(this._renderer.value.onRequestRedraw(o=>this.refreshRows(o.start,o.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(r){return this._renderDebouncer.addRefreshCallback(r)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var r,o;this._renderer.value&&((o=(r=this._renderer.value).clearTextureAtlas)==null||o.call(r),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(r,o){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(r,o)}):this._renderer.value.handleResize(r,o),this._fullRefresh())}handleCharSizeChanged(){var r;(r=this._renderer.value)==null||r.handleCharSizeChanged()}handleBlur(){var r;(r=this._renderer.value)==null||r.handleBlur()}handleFocus(){var r;(r=this._renderer.value)==null||r.handleFocus()}handleSelectionChanged(r,o,p){var C;this._selectionState.start=r,this._selectionState.end=o,this._selectionState.columnSelectMode=p,(C=this._renderer.value)==null||C.handleSelectionChanged(r,o,p)}handleCursorMove(){var r;(r=this._renderer.value)==null||r.handleCursorMove()}clear(){var r;(r=this._renderer.value)==null||r.clear()}};s.RenderService=c=u([f(2,a.IOptionsService),f(3,_.ICharSizeService),f(4,a.IDecorationService),f(5,a.IBufferService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],c)},9312:function(b,s,n){var u=this&&this.__decorate||function(S,E,D,P){var B,T=arguments.length,U=T<3?E:P===null?P=Object.getOwnPropertyDescriptor(E,D):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(S,E,D,P);else for(var z=S.length-1;z>=0;z--)(B=S[z])&&(U=(T<3?B(U):T>3?B(E,D,U):B(E,D))||U);return T>3&&U&&Object.defineProperty(E,D,U),U},f=this&&this.__param||function(S,E){return function(D,P){E(D,P,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const l=n(9806),_=n(9504),g=n(456),w=n(4725),v=n(8460),a=n(844),c=n(6114),r=n(4841),o=n(511),p=n(2585),C="",y=new RegExp(C,"g");let x=s.SelectionService=class extends a.Disposable{constructor(S,E,D,P,B,T,U,z,G){super(),this._element=S,this._screenElement=E,this._linkifier=D,this._bufferService=P,this._coreService=B,this._mouseService=T,this._optionsService=U,this._renderService=z,this._coreBrowserService=G,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(J=>this._handleTrim(J)),this.register(this._bufferService.buffers.onBufferActivate(J=>this._handleBufferActivate(J))),this.enable(),this._model=new g.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!S||!E||S[0]===E[0]&&S[1]===E[1])}get selectionText(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!S||!E)return"";const D=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(S[0]===E[0])return"";const B=S[0]<E[0]?S[0]:E[0],T=S[0]<E[0]?E[0]:S[0];for(let U=S[1];U<=E[1];U++){const z=D.translateBufferLineToString(U,!0,B,T);P.push(z)}}else{const B=S[1]===E[1]?E[0]:void 0;P.push(D.translateBufferLineToString(S[1],!0,S[0],B));for(let T=S[1]+1;T<=E[1]-1;T++){const U=D.lines.get(T),z=D.translateBufferLineToString(T,!0);U!=null&&U.isWrapped?P[P.length-1]+=z:P.push(z)}if(S[1]!==E[1]){const T=D.lines.get(E[1]),U=D.translateBufferLineToString(E[1],!0,0,E[0]);T&&T.isWrapped?P[P.length-1]+=U:P.push(U)}}return P.map(B=>B.replace(y," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const E=this._getMouseBufferCoords(S),D=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(D&&P&&E)&&this._areCoordsInSelection(E,D,P)}isCellInSelection(S,E){const D=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!D||!P)&&this._areCoordsInSelection([S,E],D,P)}_areCoordsInSelection(S,E,D){return S[1]>E[1]&&S[1]<D[1]||E[1]===D[1]&&S[1]===E[1]&&S[0]>=E[0]&&S[0]<D[0]||E[1]<D[1]&&S[1]===D[1]&&S[0]<D[0]||E[1]<D[1]&&S[1]===E[1]&&S[0]>=E[0]}_selectWordAtCursor(S,E){var B,T;const D=(T=(B=this._linkifier.currentLink)==null?void 0:B.link)==null?void 0:T.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,r.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const P=this._getMouseBufferCoords(S);return!!P&&(this._selectWordAt(P,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,E){this._model.clearSelection(),S=Math.max(S,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const E=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(S){let E=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=D?0:(E>D&&(E-=D),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(S){return c.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const E=this._getMouseBufferCoords(S);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(S){return S.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const P=D.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const E=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const P=(0,_.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,D=!(!S||!E||S[0]===E[0]&&S[1]===E[1]);D?S&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,E,D)):this._oldHasSelection&&this._fireOnSelectionChange(S,E,D)}_fireOnSelectionChange(S,E,D){this._oldSelectionStart=S,this._oldSelectionEnd=E,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(S,E){let D=E;for(let P=0;E>=P;P++){const B=S.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:B>1&&E!==P&&(D+=B-1)}return D}setSelection(S,E,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,E],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,E,D=!0,P=!0){if(S[0]>=this._bufferService.cols)return;const B=this._bufferService.buffer,T=B.lines.get(S[1]);if(!T)return;const U=B.translateBufferLineToString(S[1],!1);let z=this._convertViewportColToCharacterIndex(T,S[0]),G=z;const J=S[0]-z;let V=0,R=0,M=0,I=0;if(U.charAt(z)===" "){for(;z>0&&U.charAt(z-1)===" ";)z--;for(;G<U.length&&U.charAt(G+1)===" ";)G++}else{let Q=S[0],oe=S[0];T.getWidth(Q)===0&&(V++,Q--),T.getWidth(oe)===2&&(R++,oe++);const re=T.getString(oe).length;for(re>1&&(I+=re-1,G+=re-1);Q>0&&z>0&&!this._isCharWordSeparator(T.loadCell(Q-1,this._workCell));){T.loadCell(Q-1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,Q--):A>1&&(M+=A-1,z-=A-1),z--,Q--}for(;oe<T.length&&G+1<U.length&&!this._isCharWordSeparator(T.loadCell(oe+1,this._workCell));){T.loadCell(oe+1,this._workCell);const A=this._workCell.getChars().length;this._workCell.getWidth()===2?(R++,oe++):A>1&&(I+=A-1,G+=A-1),G++,oe++}}G++;let H=z+J-V+M,q=Math.min(this._bufferService.cols,G-z+V+R-M-I);if(E||U.slice(z,G).trim()!==""){if(D&&H===0&&T.getCodePoint(0)!==32){const Q=B.lines.get(S[1]-1);if(Q&&T.isWrapped&&Q.getCodePoint(this._bufferService.cols-1)!==32){const oe=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(oe){const re=this._bufferService.cols-oe.start;H-=re,q+=re}}}if(P&&H+q===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const Q=B.lines.get(S[1]+1);if(Q!=null&&Q.isWrapped&&Q.getCodePoint(0)!==32){const oe=this._getWordAt([0,S[1]+1],!1,!1,!0);oe&&(q+=oe.length)}}return{start:H,length:q}}}_selectWordAt(S,E){const D=this._getWordAt(S,E);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[D.start,S[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(S){const E=this._getWordAt(S,!0);if(E){let D=S[1];for(;E.start<0;)E.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,D]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const E=this._bufferService.buffer.getWrappedRangeForLine(S),D={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,r.getRangeLength)(D,this._bufferService.cols)}};s.SelectionService=x=u([f(3,p.IBufferService),f(4,p.ICoreService),f(5,w.IMouseService),f(6,p.IOptionsService),f(7,w.IRenderService),f(8,w.ICoreBrowserService)],x)},4725:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const u=n(8343);s.ICharSizeService=(0,u.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),s.IMouseService=(0,u.createDecorator)("MouseService"),s.IRenderService=(0,u.createDecorator)("RenderService"),s.ISelectionService=(0,u.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,u.createDecorator)("ThemeService"),s.ILinkProviderService=(0,u.createDecorator)("LinkProviderService")},6731:function(b,s,n){var u=this&&this.__decorate||function(x,S,E,D){var P,B=arguments.length,T=B<3?S:D===null?D=Object.getOwnPropertyDescriptor(S,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(x,S,E,D);else for(var U=x.length-1;U>=0;U--)(P=x[U])&&(T=(B<3?P(T):B>3?P(S,E,T):P(S,E))||T);return B>3&&T&&Object.defineProperty(S,E,T),T},f=this&&this.__param||function(x,S){return function(E,D){S(E,D,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const l=n(7239),_=n(8055),g=n(8460),w=n(844),v=n(2585),a=_.css.toColor("#ffffff"),c=_.css.toColor("#000000"),r=_.css.toColor("#ffffff"),o=_.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let E=0;E<216;E++){const D=S[E/36%6|0],P=S[E/6%6|0],B=S[E%6];x.push({css:_.channels.toCss(D,P,B),rgba:_.channels.toRgba(D,P,B)})}for(let E=0;E<24;E++){const D=8+10*E;x.push({css:_.channels.toCss(D,D,D),rgba:_.channels.toRgba(D,D,D)})}return x})());let C=s.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:c,cursor:r,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:_.color.blend(c,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:_.color.blend(c,p),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const S=this._colors;if(S.foreground=y(x.foreground,a),S.background=y(x.background,c),S.cursor=y(x.cursor,r),S.cursorAccent=y(x.cursorAccent,o),S.selectionBackgroundTransparent=y(x.selectionBackground,p),S.selectionBackgroundOpaque=_.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=y(x.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=_.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=x.selectionForeground?y(x.selectionForeground,_.NULL_COLOR):void 0,S.selectionForeground===_.NULL_COLOR&&(S.selectionForeground=void 0),_.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=_.color.opacity(S.selectionBackgroundTransparent,.3)),_.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=_.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=s.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=y(x.black,s.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=y(x.red,s.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=y(x.green,s.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=y(x.yellow,s.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=y(x.blue,s.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=y(x.magenta,s.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=y(x.cyan,s.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=y(x.white,s.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=y(x.brightBlack,s.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=y(x.brightRed,s.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=y(x.brightGreen,s.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=y(x.brightYellow,s.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=y(x.brightBlue,s.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=y(x.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=y(x.brightCyan,s.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=y(x.brightWhite,s.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const E=Math.min(S.ansi.length-16,x.extendedAnsi.length);for(let D=0;D<E;D++)S.ansi[D+16]=y(x.extendedAnsi[D],s.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function y(x,S){if(x!==void 0)try{return _.css.toColor(x)}catch{}return S}s.ThemeService=C=u([f(0,v.IOptionsService)],C)},6349:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const u=n(8460),f=n(844);class l extends f.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;const w=new Array(g);for(let v=0;v<Math.min(g,this.length);v++)w[v]=this._array[this._getCyclicIndex(v)];this._array=w,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let w=this._length;w<g;w++)this._array[w]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,w){this._array[this._getCyclicIndex(g)]=w}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,w,...v){if(w){for(let a=g;a<this._length-w;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+w)];this._length-=w,this.onDeleteEmitter.fire({index:g,amount:w})}for(let a=this._length-1;a>=g;a--)this._array[this._getCyclicIndex(a+v.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<v.length;a++)this._array[this._getCyclicIndex(g+a)]=v[a];if(v.length&&this.onInsertEmitter.fire({index:g,amount:v.length}),this._length+v.length>this._maxLength){const a=this._length+v.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=v.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,w,v){if(!(w<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let c=w-1;c>=0;c--)this.set(g+c+v,this.get(g+c));const a=g+w+v-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<w;a++)this.set(g+a+v,this.get(g+a))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}s.CircularList=l},1439:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function n(u,f=5){if(typeof u!="object")return u;const l=Array.isArray(u)?[]:{};for(const _ in u)l[_]=f<=1?u[_]:u[_]&&n(u[_],f-1);return l}},8055:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let n=0,u=0,f=0,l=0;var _,g,w,v,a;function c(o){const p=o.toString(16);return p.length<2?"0"+p:p}function r(o,p){return o<p?(p+.05)/(o+.05):(o+.05)/(p+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(o){o.toCss=function(p,C,y,x){return x!==void 0?`#${c(p)}${c(C)}${c(y)}${c(x)}`:`#${c(p)}${c(C)}${c(y)}`},o.toRgba=function(p,C,y,x=255){return(p<<24|C<<16|y<<8|x)>>>0},o.toColor=function(p,C,y,x){return{css:o.toCss(p,C,y,x),rgba:o.toRgba(p,C,y,x)}}}(_||(s.channels=_={})),function(o){function p(C,y){return l=Math.round(255*y),[n,u,f]=a.toChannels(C.rgba),{css:_.toCss(n,u,f,l),rgba:_.toRgba(n,u,f,l)}}o.blend=function(C,y){if(l=(255&y.rgba)/255,l===1)return{css:y.css,rgba:y.rgba};const x=y.rgba>>24&255,S=y.rgba>>16&255,E=y.rgba>>8&255,D=C.rgba>>24&255,P=C.rgba>>16&255,B=C.rgba>>8&255;return n=D+Math.round((x-D)*l),u=P+Math.round((S-P)*l),f=B+Math.round((E-B)*l),{css:_.toCss(n,u,f),rgba:_.toRgba(n,u,f)}},o.isOpaque=function(C){return(255&C.rgba)==255},o.ensureContrastRatio=function(C,y,x){const S=a.ensureContrastRatio(C.rgba,y.rgba,x);if(S)return _.toColor(S>>24&255,S>>16&255,S>>8&255)},o.opaque=function(C){const y=(255|C.rgba)>>>0;return[n,u,f]=a.toChannels(y),{css:_.toCss(n,u,f),rgba:y}},o.opacity=p,o.multiplyOpacity=function(C,y){return l=255&C.rgba,p(C,l*y/255)},o.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(g||(s.color=g={})),function(o){let p,C;try{const y=document.createElement("canvas");y.width=1,y.height=1;const x=y.getContext("2d",{willReadFrequently:!0});x&&(p=x,p.globalCompositeOperation="copy",C=p.createLinearGradient(0,0,1,1))}catch{}o.toColor=function(y){if(y.match(/#[\da-f]{3,8}/i))switch(y.length){case 4:return n=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),f=parseInt(y.slice(3,4).repeat(2),16),_.toColor(n,u,f);case 5:return n=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),f=parseInt(y.slice(3,4).repeat(2),16),l=parseInt(y.slice(4,5).repeat(2),16),_.toColor(n,u,f,l);case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}const x=y.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return n=parseInt(x[1]),u=parseInt(x[2]),f=parseInt(x[3]),l=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),_.toColor(n,u,f,l);if(!p||!C)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=C,p.fillStyle=y,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[n,u,f,l]=p.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(n,u,f,l),css:y}}}(w||(s.css=w={})),function(o){function p(C,y,x){const S=C/255,E=y/255,D=x/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}o.relativeLuminance=function(C){return p(C>>16&255,C>>8&255,255&C)},o.relativeLuminance2=p}(v||(s.rgb=v={})),function(o){function p(y,x,S){const E=y>>24&255,D=y>>16&255,P=y>>8&255;let B=x>>24&255,T=x>>16&255,U=x>>8&255,z=r(v.relativeLuminance2(B,T,U),v.relativeLuminance2(E,D,P));for(;z<S&&(B>0||T>0||U>0);)B-=Math.max(0,Math.ceil(.1*B)),T-=Math.max(0,Math.ceil(.1*T)),U-=Math.max(0,Math.ceil(.1*U)),z=r(v.relativeLuminance2(B,T,U),v.relativeLuminance2(E,D,P));return(B<<24|T<<16|U<<8|255)>>>0}function C(y,x,S){const E=y>>24&255,D=y>>16&255,P=y>>8&255;let B=x>>24&255,T=x>>16&255,U=x>>8&255,z=r(v.relativeLuminance2(B,T,U),v.relativeLuminance2(E,D,P));for(;z<S&&(B<255||T<255||U<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),T=Math.min(255,T+Math.ceil(.1*(255-T))),U=Math.min(255,U+Math.ceil(.1*(255-U))),z=r(v.relativeLuminance2(B,T,U),v.relativeLuminance2(E,D,P));return(B<<24|T<<16|U<<8|255)>>>0}o.blend=function(y,x){if(l=(255&x)/255,l===1)return x;const S=x>>24&255,E=x>>16&255,D=x>>8&255,P=y>>24&255,B=y>>16&255,T=y>>8&255;return n=P+Math.round((S-P)*l),u=B+Math.round((E-B)*l),f=T+Math.round((D-T)*l),_.toRgba(n,u,f)},o.ensureContrastRatio=function(y,x,S){const E=v.relativeLuminance(y>>8),D=v.relativeLuminance(x>>8);if(r(E,D)<S){if(D<E){const T=p(y,x,S),U=r(E,v.relativeLuminance(T>>8));if(U<S){const z=C(y,x,S);return U>r(E,v.relativeLuminance(z>>8))?T:z}return T}const P=C(y,x,S),B=r(E,v.relativeLuminance(P>>8));if(B<S){const T=p(y,x,S);return B>r(E,v.relativeLuminance(T>>8))?P:T}return P}},o.reduceLuminance=p,o.increaseLuminance=C,o.toChannels=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]}}(a||(s.rgba=a={})),s.toPaddedHex=c,s.contrastRatio=r},8969:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const u=n(844),f=n(2585),l=n(4348),_=n(7866),g=n(744),w=n(7302),v=n(6975),a=n(8460),c=n(1753),r=n(1480),o=n(7994),p=n(9282),C=n(5435),y=n(5981),x=n(2660);let S=!1;class E extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event(P=>{var B;(B=this._onScrollApi)==null||B.fire(P.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(P){for(const B in P)this.optionsService.options[B]=P[B]}constructor(P){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new w.OptionsService(P)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(r.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new y.WriteBuffer((B,T)=>this._inputHandler.parse(B,T))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(P,B){this._writeBuffer.write(P,B)}writeSync(P,B){this._logService.logLevel<=f.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(P,B)}input(P,B=!0){this.coreService.triggerDataEvent(P,B)}resize(P,B){isNaN(P)||isNaN(B)||(P=Math.max(P,g.MINIMUM_COLS),B=Math.max(B,g.MINIMUM_ROWS),this._bufferService.resize(P,B))}scroll(P,B=!1){this._bufferService.scroll(P,B)}scrollLines(P,B,T){this._bufferService.scrollLines(P,B,T)}scrollPages(P){this.scrollLines(P*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(P){const B=P-this._bufferService.buffer.ydisp;B!==0&&this.scrollLines(B)}registerEscHandler(P,B){return this._inputHandler.registerEscHandler(P,B)}registerDcsHandler(P,B){return this._inputHandler.registerDcsHandler(P,B)}registerCsiHandler(P,B){return this._inputHandler.registerCsiHandler(P,B)}registerOscHandler(P,B){return this._inputHandler.registerOscHandler(P,B)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let P=!1;const B=this.optionsService.rawOptions.windowsPty;B&&B.buildNumber!==void 0&&B.buildNumber!==void 0?P=B.backend==="conpty"&&B.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(P=!0),P?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const P=[];P.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const B of P)B.dispose()})}}}s.CoreTerminal=E},8460:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===n)return void this._listeners.splice(u,1)}}})),this._event}fire(n,u){const f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,n,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(n,u){return n(f=>u.fire(f))},s.runAndSubscribe=function(n,u){return u(void 0),n(f=>u(f))}},5435:function(b,s,n){var u=this&&this.__decorate||function(V,R,M,I){var H,q=arguments.length,Q=q<3?R:I===null?I=Object.getOwnPropertyDescriptor(R,M):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(V,R,M,I);else for(var oe=V.length-1;oe>=0;oe--)(H=V[oe])&&(Q=(q<3?H(Q):q>3?H(R,M,Q):H(R,M))||Q);return q>3&&Q&&Object.defineProperty(R,M,Q),Q},f=this&&this.__param||function(V,R){return function(M,I){R(M,I,V)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const l=n(2584),_=n(7116),g=n(2015),w=n(844),v=n(482),a=n(8437),c=n(8460),r=n(643),o=n(511),p=n(3734),C=n(2585),y=n(1480),x=n(6242),S=n(6351),E=n(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},P=131072;function B(V,R){if(V>24)return R.setWinLines||!1;switch(V){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var T;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let U=0;class z extends w.Disposable{getAttrData(){return this._curAttrData}constructor(R,M,I,H,q,Q,oe,re,A=new g.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=M,this._coreService=I,this._logService=H,this._optionsService=q,this._oscLinkService=Q,this._coreMouseService=oe,this._unicodeService=re,this._parser=A,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new G(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:N.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,N,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:N,data:$})}),this._parser.setDcsHandlerFallback((k,N,$)=>{N==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:N,payload:$})}),this._parser.setPrintHandler((k,N,$)=>this.print(k,N,$)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new x.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new x.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new x.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new x.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new x.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new x.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new x.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new x.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new x.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new x.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new x.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((k,N)=>this.requestStatusString(k,N)))}_preserveStack(R,M,I,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=I,this._parseStack.position=H}_logSlowResolvingAsync(R){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([R,new Promise((M,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,M){let I,H=this._activeBuffer.x,q=this._activeBuffer.y,Q=0;const oe=this._parseStack.paused;if(oe){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(I),I;H=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>P&&(Q=this._parseStack.position+P)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,k=>String.fromCharCode(k)).join("")}"`),typeof R=="string"?R.split("").map(k=>k.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<P&&(this._parseBuffer=new Uint32Array(Math.min(R.length,P))),oe||this._dirtyRowTracker.clearRange(),R.length>P)for(let k=Q;k<R.length;k+=P){const N=k+P<R.length?k+P:R.length,$=typeof R=="string"?this._stringDecoder.decode(R.substring(k,N),this._parseBuffer):this._utf8Decoder.decode(R.subarray(k,N),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,$))return this._preserveStack(H,q,$,k),this._logSlowResolvingAsync(I),I}else if(!oe){const k=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,k))return this._preserveStack(H,q,k,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===H&&this._activeBuffer.y===q||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),A=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);A<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(A,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(R,M,I){let H,q;const Q=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,A=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,N=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-M>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodepoint(this._activeBuffer.x-1,0,1,N);let X=this._parser.precedingJoinState;for(let L=M;L<I;++L){if(H=R[L],H<127&&Q){const K=Q[String.fromCharCode(H)];K&&(H=K.charCodeAt(0))}const O=this._unicodeService.charProperties(H,X);q=y.UnicodeService.extractWidth(O);const F=y.UnicodeService.extractShouldJoin(O),j=F?y.UnicodeService.extractWidth(X):0;if(X=O,oe&&this._onA11yChar.fire((0,v.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+q-j>re){if(A){const K=$;let W=this._activeBuffer.x-j;for(this._activeBuffer.x=j,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),j>0&&$ instanceof a.BufferLine&&$.copyCellsFrom(K,W,0,j,!1);W<re;)K.setCellFromCodepoint(W++,0,1,N)}else if(this._activeBuffer.x=re-1,q===2)continue}if(F&&this._activeBuffer.x){const K=$.getWidth(this._activeBuffer.x-1)?1:2;$.addCodepointToCell(this._activeBuffer.x-K,H,q);for(let W=q-j;--W>=0;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}else if(k&&($.insertCells(this._activeBuffer.x,q-j,this._activeBuffer.getNullCell(N)),$.getWidth(re-1)===2&&$.setCellFromCodepoint(re-1,r.NULL_CELL_CODE,r.NULL_CELL_WIDTH,N)),$.setCellFromCodepoint(this._activeBuffer.x++,H,q,N),q>0)for(;--q;)$.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}this._parser.precedingJoinState=X,this._activeBuffer.x<re&&I-M>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodepoint(this._activeBuffer.x,0,1,N),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,M){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,M):this._parser.registerCsiHandler(R,I=>!B(I.params[0],this._optionsService.rawOptions.windowOptions)||M(I))}registerDcsHandler(R,M){return this._parser.registerDcsHandler(R,new S.DcsHandler(M))}registerEscHandler(R,M){return this._parser.registerEscHandler(R,M)}registerOscHandler(R,M){return this._parser.registerOscHandler(R,new x.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=R,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+M)}cursorUp(R){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const M=R.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=R.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=R.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const M=R.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,M,I,H=!1,q=!1){const Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);Q.replaceCells(M,I,this._activeBuffer.getNullCell(this._eraseAttrData()),q),H&&(Q.isWrapped=!1)}_resetBufferLine(R,M=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);I&&(I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),I.isWrapped=!1)}eraseInDisplay(R,M=!1){let I;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);I<this._bufferService.rows;I++)this._resetBufferLine(I,M);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,M);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(R,M=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let M=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;M--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let M=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;M--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let M=R.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let M=R.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=R.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);H.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=R.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);H.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=R.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);H.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=R.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);H.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){const M=this._parser.precedingJoinState;if(!M)return!0;const I=R.params[0]||1,H=y.UnicodeService.extractWidth(M),q=this._activeBuffer.x-H,Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(q),oe=new Uint32Array(Q.length*I);let re=0;for(let k=0;k<Q.length;){const N=Q.codePointAt(k)||0;oe[re++]=N,k+=N>65535?2:1}let A=re;for(let k=1;k<I;++k)oe.copyWithin(A,0,re),A+=re;return this.print(oe,0,A),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let M=0;M<R.length;M++)switch(R.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let M=0;M<R.length;M++)switch(R.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let M=0;M<R.length;M++)switch(R.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let M=0;M<R.length;M++)switch(R.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,M){const I=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:q}=this._coreMouseService,Q=this._coreService,{buffers:oe,cols:re}=this._bufferService,{active:A,alt:k}=oe,N=this._optionsService.rawOptions,$=F=>F?1:2,X=R.params[0];return L=X,O=M?X===2?4:X===4?$(Q.modes.insertMode):X===12?3:X===20?$(N.convertEol):0:X===1?$(I.applicationCursorKeys):X===3?N.windowOptions.setWinLines?re===80?2:re===132?1:0:0:X===6?$(I.origin):X===7?$(I.wraparound):X===8?3:X===9?$(H==="X10"):X===12?$(N.cursorBlink):X===25?$(!Q.isCursorHidden):X===45?$(I.reverseWraparound):X===66?$(I.applicationKeypad):X===67?4:X===1e3?$(H==="VT200"):X===1002?$(H==="DRAG"):X===1003?$(H==="ANY"):X===1004?$(I.sendFocus):X===1005?4:X===1006?$(q==="SGR"):X===1015?4:X===1016?$(q==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?$(A===k):X===2004?$(I.bracketedPasteMode):0,Q.triggerDataEvent(`${l.C0.ESC}[${M?"":"?"}${L};${O}$y`),!0;var L,O}_updateAttrColor(R,M,I,H,q){return M===2?(R|=50331648,R&=-16777216,R|=p.AttributeData.fromColorRGB([I,H,q])):M===5&&(R&=-50331904,R|=33554432|255&I),R}_extractColor(R,M,I){const H=[0,0,-1,0,0,0];let q=0,Q=0;do{if(H[Q+q]=R.params[M+Q],R.hasSubParams(M+Q)){const oe=R.getSubParams(M+Q);let re=0;do H[1]===5&&(q=1),H[Q+re+1+q]=oe[re];while(++re<oe.length&&re+Q+1+q<H.length);break}if(H[1]===5&&Q+q>=2||H[1]===2&&Q+q>=5)break;H[1]&&(q=1)}while(++Q+M<R.length&&Q+q<H.length);for(let oe=2;oe<H.length;++oe)H[oe]===-1&&(H[oe]=0);switch(H[0]){case 38:I.fg=this._updateAttrColor(I.fg,H[1],H[3],H[4],H[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,H[1],H[3],H[4],H[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,H[1],H[3],H[4],H[5])}return Q}_processUnderline(R,M){M.extended=M.extended.clone(),(!~R||R>5)&&(R=1),M.extended.underlineStyle=R,M.fg|=268435456,R===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(R){R.fg=a.DEFAULT_ATTR_DATA.fg,R.bg=a.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=R.length;let I;const H=this._curAttrData;for(let q=0;q<M;q++)I=R.params[q],I>=30&&I<=37?(H.fg&=-50331904,H.fg|=16777216|I-30):I>=40&&I<=47?(H.bg&=-50331904,H.bg|=16777216|I-40):I>=90&&I<=97?(H.fg&=-50331904,H.fg|=16777224|I-90):I>=100&&I<=107?(H.bg&=-50331904,H.bg|=16777224|I-100):I===0?this._processSGR0(H):I===1?H.fg|=134217728:I===3?H.bg|=67108864:I===4?(H.fg|=268435456,this._processUnderline(R.hasSubParams(q)?R.getSubParams(q)[0]:1,H)):I===5?H.fg|=536870912:I===7?H.fg|=67108864:I===8?H.fg|=1073741824:I===9?H.fg|=2147483648:I===2?H.bg|=134217728:I===21?this._processUnderline(2,H):I===22?(H.fg&=-134217729,H.bg&=-134217729):I===23?H.bg&=-67108865:I===24?(H.fg&=-268435457,this._processUnderline(0,H)):I===25?H.fg&=-536870913:I===27?H.fg&=-67108865:I===28?H.fg&=-1073741825:I===29?H.fg&=2147483647:I===39?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):I===49?(H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?q+=this._extractColor(R,q,H):I===53?H.bg|=1073741824:I===55?H.bg&=-1073741825:I===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):I===100?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${M};${I}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const M=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${M};${I}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const M=R.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=M%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(R){const M=R.params[0]||1;let I;return(R.length<2||(I=R.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(R){if(!B(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const M=[],I=R.split(";");for(;I.length>1;){const H=I.shift(),q=I.shift();if(/^\d+$/.exec(H)){const Q=parseInt(H);if(J(Q))if(q==="?")M.push({type:0,index:Q});else{const oe=(0,E.parseColor)(q);oe&&M.push({type:1,index:Q,color:oe})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(R){const M=R.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(R,M){this._getCurrentLinkId()&&this._finishHyperlink();const I=R.split(":");let H;const q=I.findIndex(Q=>Q.startsWith("id="));return q!==-1&&(H=I[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,M){const I=R.split(";");for(let H=0;H<I.length&&!(M>=this._specialColors.length);++H,++M)if(I[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const q=(0,E.parseColor)(I[H]);q&&this._onColor.fire([{type:1,index:this._specialColors[M],color:q}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const M=[],I=R.split(";");for(let H=0;H<I.length;++H)if(/^\d+$/.exec(I[H])){const q=parseInt(I[H]);J(q)&&M.push({type:2,index:q})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(D[R[0]],_.CHARSETS[R[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new o.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const I=this._activeBuffer.ybase+this._activeBuffer.y+M,H=this._activeBuffer.lines.get(I);H&&(H.fill(R),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,M){const I=this._bufferService.buffer,H=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${q}${l.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,M){this._dirtyRowTracker.markRangeDirty(R,M)}}s.InputHandler=z;let G=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,R){V>R&&(U=V,V=R,R=U),V<this.start&&(this.start=V),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function J(V){return 0<=V&&V<256}G=u([f(0,C.IBufferService)],G)},844:(b,s)=>{function n(u){for(const f of u)f.dispose();u.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const f=this._disposables.indexOf(u);f!==-1&&this._disposables.splice(f,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var f;this._isDisposed||u===this._value||((f=this._value)==null||f.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},s.toDisposable=function(u){return{dispose:u}},s.disposeArray=n,s.getDisposeArrayDisposable=function(u){return{dispose:()=>n(u)}}},1505:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(f,l,_){this._data[f]||(this._data[f]={}),this._data[f][l]=_}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}s.TwoKeyMap=n,s.FourKeyMap=class{constructor(){this._data=new n}set(u,f,l,_,g){this._data.get(u,f)||this._data.set(u,f,new n),this._data.get(u,f).set(l,_,g)}get(u,f,l,_){var g;return(g=this._data.get(u,f))==null?void 0:g.get(l,_)}clear(){this._data.clear()}}},6114:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const n=s.isNode?"node":navigator.userAgent,u=s.isNode?"node":navigator.platform;s.isFirefox=n.includes("Firefox"),s.isLegacyEdge=n.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(n),s.getSafariVersion=function(){if(!s.isSafari)return 0;const f=n.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),s.isIpad=u==="iPad",s.isIphone=u==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),s.isLinux=u.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(n)},6106:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let n=0;s.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(n=this._search(this._getKey(u)),this._array.splice(n,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const f=this._getKey(u);if(f===void 0||(n=this._search(f),n===-1)||this._getKey(this._array[n])!==f)return!1;do if(this._array[n]===u)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===f);return!1}*getKeyIterator(u){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===u)}forEachByKey(u,f){if(this._array.length!==0&&(n=this._search(u),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===u))do f(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===u)}values(){return[...this._array].values()}_search(u){let f=0,l=this._array.length-1;for(;l>=f;){let _=f+l>>1;const g=this._getKey(this._array[_]);if(g>u)l=_-1;else{if(!(g<u)){for(;_>0&&this._getKey(this._array[_-1])===u;)_--;return _}f=_+1}}return f}}},7226:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const u=n(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let w=0,v=0,a=g.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),v=Math.max(w,v),c=g.timeRemaining(),1.5*v>c)return a-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-w))}ms`),void this._start();a=c}this.clear()}}class l extends f{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){const w=Date.now()+g;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}s.PriorityTaskQueue=l,s.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:l,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const u=n(643);s.updateWindowsModeWrappedState=function(f){const l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),_=l==null?void 0:l.get(f.cols-1),g=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);g&&_&&(g.isWrapped=_[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&_[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new n;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=n;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}get underlineVariantOffset(){const l=(3758096384&this._ext)>>29;return l<0?4294967288^l:l}set underlineVariantOffset(l){this._ext&=536870911,this._ext|=l<<29&3758096384}constructor(l=0,_=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=_}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=u},9092:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const u=n(6349),f=n(7226),l=n(3734),_=n(8437),g=n(4634),w=n(511),v=n(643),a=n(4863),c=n(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(r,o,p){this._hasScrollback=r,this._optionsService=o,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,o){return new _.BufferLine(this._bufferService.cols,this.getNullCell(r),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;const o=r+this._optionsService.rawOptions.scrollback;return o>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:o}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=_.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,o){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let C=0;const y=this._getCorrectBufferLength(o);if(y>this.lines.maxLength&&(this.lines.maxLength=y),this.lines.length>0){if(this._cols<r)for(let S=0;S<this.lines.length;S++)C+=+this.lines.get(S).resize(r,p);let x=0;if(this._rows<o)for(let S=this._rows;S<o;S++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(r,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(r,p)));else for(let S=this._rows;S>o;S--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(y<this.lines.maxLength){const S=this.lines.length-y;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=y}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,o-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(r,o),this._cols>r))for(let x=0;x<this.lines.length;x++)C+=+this.lines.get(x).resize(r,p);this._cols=r,this._rows=o,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return r}get _isReflowEnabled(){const r=this._optionsService.rawOptions.windowsPty;return r&&r.buildNumber?this._hasScrollback&&r.backend==="conpty"&&r.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,o){this._cols!==r&&(r>this._cols?this._reflowLarger(r,o):this._reflowSmaller(r,o))}_reflowLarger(r,o){const p=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(p.length>0){const C=(0,g.reflowLargerCreateNewLayout)(this.lines,p);(0,g.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(r,o,C.countRemoved)}}_reflowLargerAdjustViewport(r,o,p){const C=this.getNullCell(_.DEFAULT_ATTR_DATA);let y=p;for(;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new _.BufferLine(r,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(r,o){const p=this.getNullCell(_.DEFAULT_ATTR_DATA),C=[];let y=0;for(let x=this.lines.length-1;x>=0;x--){let S=this.lines.get(x);if(!S||!S.isWrapped&&S.getTrimmedLength()<=r)continue;const E=[S];for(;S.isWrapped&&x>0;)S=this.lines.get(--x),E.unshift(S);const D=this.ybase+this.y;if(D>=x&&D<x+E.length)continue;const P=E[E.length-1].getTrimmedLength(),B=(0,g.reflowSmallerGetNewLineLengths)(E,this._cols,r),T=B.length-E.length;let U;U=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const z=[];for(let I=0;I<T;I++){const H=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);z.push(H)}z.length>0&&(C.push({start:x+E.length+y,newLines:z}),y+=z.length),E.push(...z);let G=B.length-1,J=B[G];J===0&&(G--,J=B[G]);let V=E.length-T-1,R=P;for(;V>=0;){const I=Math.min(R,J);if(E[G]===void 0)break;if(E[G].copyCellsFrom(E[V],R-I,J-I,I,!0),J-=I,J===0&&(G--,J=B[G]),R-=I,R===0){V--;const H=Math.max(V,0);R=(0,g.getWrappedLineTrimmedLength)(E,H,this._cols)}}for(let I=0;I<E.length;I++)B[I]<r&&E[I].setCell(B[I],p);let M=T-U;for(;M-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+o-1)}if(C.length>0){const x=[],S=[];for(let G=0;G<this.lines.length;G++)S.push(this.lines.get(G));const E=this.lines.length;let D=E-1,P=0,B=C[P];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);let T=0;for(let G=Math.min(this.lines.maxLength-1,E+y-1);G>=0;G--)if(B&&B.start>D+T){for(let J=B.newLines.length-1;J>=0;J--)this.lines.set(G--,B.newLines[J]);G++,x.push({index:D+1,amount:B.newLines.length}),T+=B.newLines.length,B=C[++P]}else this.lines.set(G,S[D--]);let U=0;for(let G=x.length-1;G>=0;G--)x[G].index+=U,this.lines.onInsertEmitter.fire(x[G]),U+=x[G].amount;const z=Math.max(0,E+y-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(r,o,p=0,C){const y=this.lines.get(r);return y?y.translateToString(o,p,C):""}getWrappedRangeForLine(r){let o=r,p=r;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:o,last:p}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===r&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){const o=new a.Marker(r);return this.markers.push(o),o.register(this.lines.onTrim(p=>{o.line-=p,o.line<0&&o.dispose()})),o.register(this.lines.onInsert(p=>{o.line>=p.index&&(o.line+=p.amount)})),o.register(this.lines.onDelete(p=>{o.line>=p.index&&o.line<p.index+p.amount&&o.dispose(),o.line>p.index&&(o.line-=p.amount)})),o.register(o.onDispose(()=>this._removeMarker(o))),o}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}}},8437:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const u=n(3734),f=n(511),l=n(643),_=n(482);s.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let g=0;class w{constructor(a,c,r=!1){this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);const o=c||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let p=0;p<a;++p)this.setCell(p,o);this.length=a}get(a){const c=this._data[3*a+0],r=2097151&c;return[this._data[3*a+1],2097152&c?this._combined[a]:r?(0,_.stringFromCodePoint)(r):"",c>>22,2097152&c?this._combined[a].charCodeAt(this._combined[a].length-1):r]}set(a,c){this._data[3*a+1]=c[l.CHAR_DATA_ATTR_INDEX],c[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=c[1],this._data[3*a+0]=2097152|a|c[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=c[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){const c=this._data[3*a+0];return 2097152&c?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&c}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){const c=this._data[3*a+0];return 2097152&c?this._combined[a]:2097151&c?(0,_.stringFromCodePoint)(2097151&c):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,c){return g=3*a,c.content=this._data[g+0],c.fg=this._data[g+1],c.bg=this._data[g+2],2097152&c.content&&(c.combinedData=this._combined[a]),268435456&c.bg&&(c.extended=this._extendedAttrs[a]),c}setCell(a,c){2097152&c.content&&(this._combined[a]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[a]=c.extended),this._data[3*a+0]=c.content,this._data[3*a+1]=c.fg,this._data[3*a+2]=c.bg}setCellFromCodepoint(a,c,r,o){268435456&o.bg&&(this._extendedAttrs[a]=o.extended),this._data[3*a+0]=c|r<<22,this._data[3*a+1]=o.fg,this._data[3*a+2]=o.bg}addCodepointToCell(a,c,r){let o=this._data[3*a+0];2097152&o?this._combined[a]+=(0,_.stringFromCodePoint)(c):2097151&o?(this._combined[a]=(0,_.stringFromCodePoint)(2097151&o)+(0,_.stringFromCodePoint)(c),o&=-2097152,o|=2097152):o=c|4194304,r&&(o&=-12582913,o|=r<<22),this._data[3*a+0]=o}insertCells(a,c,r){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a-1,0,1,r),c<this.length-a){const o=new f.CellData;for(let p=this.length-a-c-1;p>=0;--p)this.setCell(a+c+p,this.loadCell(a+p,o));for(let p=0;p<c;++p)this.setCell(a+p,r)}else for(let o=a;o<this.length;++o)this.setCell(o,r);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,r)}deleteCells(a,c,r){if(a%=this.length,c<this.length-a){const o=new f.CellData;for(let p=0;p<this.length-a-c;++p)this.setCell(a+p,this.loadCell(a+c+p,o));for(let p=this.length-c;p<this.length;++p)this.setCell(p,r)}else for(let o=a;o<this.length;++o)this.setCell(o,r);a&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a-1,0,1,r),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodepoint(a,0,1,r)}replaceCells(a,c,r,o=!1){if(o)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodepoint(a-1,0,1,r),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodepoint(c,0,1,r);a<c&&a<this.length;)this.isProtected(a)||this.setCell(a,r),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodepoint(a-1,0,1,r),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c,0,1,r);a<c&&a<this.length;)this.setCell(a++,r)}resize(a,c){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const r=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*r)this._data=new Uint32Array(this._data.buffer,0,r);else{const o=new Uint32Array(r);o.set(this._data),this._data=o}for(let o=this.length;o<a;++o)this.setCell(o,c)}else{this._data=this._data.subarray(0,r);const o=Object.keys(this._combined);for(let C=0;C<o.length;C++){const y=parseInt(o[C],10);y>=a&&delete this._combined[y]}const p=Object.keys(this._extendedAttrs);for(let C=0;C<p.length;C++){const y=parseInt(p[C],10);y>=a&&delete this._extendedAttrs[y]}}return this.length=a,4*r*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,c=!1){if(c)for(let r=0;r<this.length;++r)this.isProtected(r)||this.setCell(r,a);else{this._combined={},this._extendedAttrs={};for(let r=0;r<this.length;++r)this.setCell(r,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(const c in a._combined)this._combined[c]=a._combined[c];this._extendedAttrs={};for(const c in a._extendedAttrs)this._extendedAttrs[c]=a._extendedAttrs[c];this.isWrapped=a.isWrapped}clone(){const a=new w(0);a._data=new Uint32Array(this._data),a.length=this.length;for(const c in this._combined)a._combined[c]=this._combined[c];for(const c in this._extendedAttrs)a._extendedAttrs[c]=this._extendedAttrs[c];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,c,r,o,p){const C=a._data;if(p)for(let x=o-1;x>=0;x--){for(let S=0;S<3;S++)this._data[3*(r+x)+S]=C[3*(c+x)+S];268435456&C[3*(c+x)+2]&&(this._extendedAttrs[r+x]=a._extendedAttrs[c+x])}else for(let x=0;x<o;x++){for(let S=0;S<3;S++)this._data[3*(r+x)+S]=C[3*(c+x)+S];268435456&C[3*(c+x)+2]&&(this._extendedAttrs[r+x]=a._extendedAttrs[c+x])}const y=Object.keys(a._combined);for(let x=0;x<y.length;x++){const S=parseInt(y[x],10);S>=c&&(this._combined[S-c+r]=a._combined[S])}}translateToString(a,c,r,o){c=c??0,r=r??this.length,a&&(r=Math.min(r,this.getTrimmedLength())),o&&(o.length=0);let p="";for(;c<r;){const C=this._data[3*c+0],y=2097151&C,x=2097152&C?this._combined[c]:y?(0,_.stringFromCodePoint)(y):l.WHITESPACE_CELL_CHAR;if(p+=x,o)for(let S=0;S<x.length;++S)o.push(c);c+=C>>22||1}return o&&o.push(c),p}}s.BufferLine=w},4841:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(n,u){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return u*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(b,s)=>{function n(u,f,l){if(f===u.length-1)return u[f].getTrimmedLength();const _=!u[f].hasContent(l-1)&&u[f].getWidth(l-1)===1,g=u[f+1].getWidth(0)===2;return _&&g?l-1:l}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(u,f,l,_,g){const w=[];for(let v=0;v<u.length-1;v++){let a=v,c=u.get(++a);if(!c.isWrapped)continue;const r=[u.get(v)];for(;a<u.length&&c.isWrapped;)r.push(c),c=u.get(++a);if(_>=v&&_<a){v+=r.length-1;continue}let o=0,p=n(r,o,f),C=1,y=0;for(;C<r.length;){const S=n(r,C,f),E=S-y,D=l-p,P=Math.min(E,D);r[o].copyCellsFrom(r[C],y,p,P,!1),p+=P,p===l&&(o++,p=0),y+=P,y===S&&(C++,y=0),p===0&&o!==0&&r[o-1].getWidth(l-1)===2&&(r[o].copyCellsFrom(r[o-1],l-1,p++,1,!1),r[o-1].setCell(l-1,g))}r[o].replaceCells(p,l,g);let x=0;for(let S=r.length-1;S>0&&(S>o||r[S].getTrimmedLength()===0);S--)x++;x>0&&(w.push(v+r.length-x),w.push(x)),v+=r.length-1}return w},s.reflowLargerCreateNewLayout=function(u,f){const l=[];let _=0,g=f[_],w=0;for(let v=0;v<u.length;v++)if(g===v){const a=f[++_];u.onDeleteEmitter.fire({index:v-w,amount:a}),v+=a-1,w+=a,g=f[++_]}else l.push(v);return{layout:l,countRemoved:w}},s.reflowLargerApplyNewLayout=function(u,f){const l=[];for(let _=0;_<f.length;_++)l.push(u.get(f[_]));for(let _=0;_<l.length;_++)u.set(_,l[_]);u.length=f.length},s.reflowSmallerGetNewLineLengths=function(u,f,l){const _=[],g=u.map((c,r)=>n(u,r,f)).reduce((c,r)=>c+r);let w=0,v=0,a=0;for(;a<g;){if(g-a<l){_.push(g-a);break}w+=l;const c=n(u,v,f);w>c&&(w-=c,v++);const r=u[v].getWidth(w-1)===2;r&&w--;const o=r?l-1:l;_.push(o),a+=o}return _},s.getWrappedLineTrimmedLength=n},5295:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const u=n(8460),f=n(844),l=n(9092);class _ extends f.Disposable{constructor(w,v){super(),this._optionsService=w,this._bufferService=v,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,v){this._normal.resize(w,v),this._alt.resize(w,v),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}s.BufferSet=_},511:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const u=n(482),f=n(643),l=n(3734);class _ extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const v=new _;return v.setFromCharData(w),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(w[f.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(w[f.CHAR_DATA_CHAR_INDEX].length===2){const a=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){const c=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(a-55296)+c-56320+65536|w[f.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[f.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=w[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=_},643:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const u=n(8460),f=n(844);class l{get id(){return this._id}constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}s.Marker=l,l._nextId=1},7116:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(b,s)=>{var n,u,f;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(n||(s.C0=n={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(u||(s.C1=u={})),function(l){l.ST=`${n.ESC}\\`}(f||(s.C1_ESCAPED=f={}))},7399:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const u=n(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(l,_,g,w){const v={type:0,cancel:!1,key:void 0},a=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?v.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?v.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?v.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(v.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:v.key=l.ctrlKey?"\b":u.C0.DEL,l.altKey&&(v.key=u.C0.ESC+v.key);break;case 9:if(l.shiftKey){v.key=u.C0.ESC+"[Z";break}v.key=u.C0.HT,v.cancel=!0;break;case 13:v.key=l.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,v.cancel=!0;break;case 27:v.key=u.C0.ESC,l.altKey&&(v.key=u.C0.ESC+u.C0.ESC),v.cancel=!0;break;case 37:if(l.metaKey)break;a?(v.key=u.C0.ESC+"[1;"+(a+1)+"D",v.key===u.C0.ESC+"[1;3D"&&(v.key=u.C0.ESC+(g?"b":"[1;5D"))):v.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(l.metaKey)break;a?(v.key=u.C0.ESC+"[1;"+(a+1)+"C",v.key===u.C0.ESC+"[1;3C"&&(v.key=u.C0.ESC+(g?"f":"[1;5C"))):v.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(l.metaKey)break;a?(v.key=u.C0.ESC+"[1;"+(a+1)+"A",g||v.key!==u.C0.ESC+"[1;3A"||(v.key=u.C0.ESC+"[1;5A")):v.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(l.metaKey)break;a?(v.key=u.C0.ESC+"[1;"+(a+1)+"B",g||v.key!==u.C0.ESC+"[1;3B"||(v.key=u.C0.ESC+"[1;5B")):v.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(v.key=u.C0.ESC+"[2~");break;case 46:v.key=a?u.C0.ESC+"[3;"+(a+1)+"~":u.C0.ESC+"[3~";break;case 36:v.key=a?u.C0.ESC+"[1;"+(a+1)+"H":_?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:v.key=a?u.C0.ESC+"[1;"+(a+1)+"F":_?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:l.shiftKey?v.type=2:l.ctrlKey?v.key=u.C0.ESC+"[5;"+(a+1)+"~":v.key=u.C0.ESC+"[5~";break;case 34:l.shiftKey?v.type=3:l.ctrlKey?v.key=u.C0.ESC+"[6;"+(a+1)+"~":v.key=u.C0.ESC+"[6~";break;case 112:v.key=a?u.C0.ESC+"[1;"+(a+1)+"P":u.C0.ESC+"OP";break;case 113:v.key=a?u.C0.ESC+"[1;"+(a+1)+"Q":u.C0.ESC+"OQ";break;case 114:v.key=a?u.C0.ESC+"[1;"+(a+1)+"R":u.C0.ESC+"OR";break;case 115:v.key=a?u.C0.ESC+"[1;"+(a+1)+"S":u.C0.ESC+"OS";break;case 116:v.key=a?u.C0.ESC+"[15;"+(a+1)+"~":u.C0.ESC+"[15~";break;case 117:v.key=a?u.C0.ESC+"[17;"+(a+1)+"~":u.C0.ESC+"[17~";break;case 118:v.key=a?u.C0.ESC+"[18;"+(a+1)+"~":u.C0.ESC+"[18~";break;case 119:v.key=a?u.C0.ESC+"[19;"+(a+1)+"~":u.C0.ESC+"[19~";break;case 120:v.key=a?u.C0.ESC+"[20;"+(a+1)+"~":u.C0.ESC+"[20~";break;case 121:v.key=a?u.C0.ESC+"[21;"+(a+1)+"~":u.C0.ESC+"[21~";break;case 122:v.key=a?u.C0.ESC+"[23;"+(a+1)+"~":u.C0.ESC+"[23~";break;case 123:v.key=a?u.C0.ESC+"[24;"+(a+1)+"~":u.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(g&&!w||!l.altKey||l.metaKey)!g||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?v.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(v.key=u.C0.US),l.key==="@"&&(v.key=u.C0.NUL)):l.keyCode===65&&(v.type=1);else{const c=f[l.keyCode],r=c==null?void 0:c[l.shiftKey?1:0];if(r)v.key=u.C0.ESC+r;else if(l.keyCode>=65&&l.keyCode<=90){const o=l.ctrlKey?l.keyCode-64:l.keyCode+32;let p=String.fromCharCode(o);l.shiftKey&&(p=p.toUpperCase()),v.key=u.C0.ESC+p}else if(l.keyCode===32)v.key=u.C0.ESC+(l.ctrlKey?u.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let o=l.code.slice(3,4);l.shiftKey||(o=o.toLowerCase()),v.key=u.C0.ESC+o,v.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?v.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?v.key=u.C0.NUL:l.keyCode>=51&&l.keyCode<=55?v.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?v.key=u.C0.DEL:l.keyCode===219?v.key=u.C0.ESC:l.keyCode===220?v.key=u.C0.FS:l.keyCode===221&&(v.key=u.C0.GS)}return v}},482:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},s.utf32ToString=function(n,u=0,f=n.length){let l="";for(let _=u;_<f;++_){let g=n[_];g>65535?(g-=65536,l+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):l+=String.fromCharCode(g)}return l},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,u){const f=n.length;if(!f)return 0;let l=0,_=0;if(this._interim){const g=n.charCodeAt(_++);56320<=g&&g<=57343?u[l++]=1024*(this._interim-55296)+g-56320+65536:(u[l++]=this._interim,u[l++]=g),this._interim=0}for(let g=_;g<f;++g){const w=n.charCodeAt(g);if(55296<=w&&w<=56319){if(++g>=f)return this._interim=w,l;const v=n.charCodeAt(g);56320<=v&&v<=57343?u[l++]=1024*(w-55296)+v-56320+65536:(u[l++]=w,u[l++]=v)}else w!==65279&&(u[l++]=w)}return l}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,u){const f=n.length;if(!f)return 0;let l,_,g,w,v=0,a=0,c=0;if(this.interim[0]){let p=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let y,x=0;for(;(y=63&this.interim[++x])&&x<4;)C<<=6,C|=y;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=S-x;for(;c<E;){if(c>=f)return 0;if(y=n[c++],(192&y)!=128){c--,p=!0;break}this.interim[x++]=y,C<<=6,C|=63&y}p||(S===2?C<128?c--:u[v++]=C:S===3?C<2048||C>=55296&&C<=57343||C===65279||(u[v++]=C):C<65536||C>1114111||(u[v++]=C)),this.interim.fill(0)}const r=f-4;let o=c;for(;o<f;){for(;!(!(o<r)||128&(l=n[o])||128&(_=n[o+1])||128&(g=n[o+2])||128&(w=n[o+3]));)u[v++]=l,u[v++]=_,u[v++]=g,u[v++]=w,o+=4;if(l=n[o++],l<128)u[v++]=l;else if((224&l)==192){if(o>=f)return this.interim[0]=l,v;if(_=n[o++],(192&_)!=128){o--;continue}if(a=(31&l)<<6|63&_,a<128){o--;continue}u[v++]=a}else if((240&l)==224){if(o>=f)return this.interim[0]=l,v;if(_=n[o++],(192&_)!=128){o--;continue}if(o>=f)return this.interim[0]=l,this.interim[1]=_,v;if(g=n[o++],(192&g)!=128){o--;continue}if(a=(15&l)<<12|(63&_)<<6|63&g,a<2048||a>=55296&&a<=57343||a===65279)continue;u[v++]=a}else if((248&l)==240){if(o>=f)return this.interim[0]=l,v;if(_=n[o++],(192&_)!=128){o--;continue}if(o>=f)return this.interim[0]=l,this.interim[1]=_,v;if(g=n[o++],(192&g)!=128){o--;continue}if(o>=f)return this.interim[0]=l,this.interim[1]=_,this.interim[2]=g,v;if(w=n[o++],(192&w)!=128){o--;continue}if(a=(7&l)<<18|(63&_)<<12|(63&g)<<6|63&w,a<65536||a>1114111)continue;u[v++]=a}}return v}}},225:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const u=n(1480),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;s.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let g=0;g<f.length;++g)_.fill(0,f[g][0],f[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?_[g]:function(w,v){let a,c=0,r=v.length-1;if(w<v[0][0]||w>v[r][1])return!1;for(;r>=c;)if(a=c+r>>1,w>v[a][1])c=a+1;else{if(!(w<v[a][0]))return!0;r=a-1}return!1}(g,l)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}charProperties(g,w){let v=this.wcwidth(g),a=v===0&&w!==0;if(a){const c=u.UnicodeService.extractWidth(w);c===0?a=!1:c>v&&(v=c)}return u.UnicodeService.createPropertyValue(0,v,a)}}},5981:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const u=n(8460),f=n(844);class l extends f.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(w)}_innerWrite(g=0,w=!0){const v=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const a=this._writeBuffer[this._bufferOffset],c=this._action(a,w);if(c){const o=p=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(v,p);return void c.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(o)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=l},5941:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function f(l,_){const g=l.toString(16),w=g.length<2?"0"+g:g;switch(_){case 4:return g[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}s.parseColor=function(l){if(!l)return;let _=l.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const g=n.exec(_);if(g){const w=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/w*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/w*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/w*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),u.exec(_)&&[3,6,9,12].includes(_.length))){const g=_.length/3,w=[0,0,0];for(let v=0;v<3;++v){const a=parseInt(_.slice(g*v,g*v+g),16);w[v]=g===1?a<<4:g===2?a:g===3?a>>4:a>>8}return w}},s.toRgbString=function(l,_=16){const[g,w,v]=l;return`rgb:${f(g,_)}/${f(w,_)}/${f(v,_)}`}},5770:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const u=n(482),f=n(8742),l=n(5770),_=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(w,v){this._handlers[w]===void 0&&(this._handlers[w]=[]);const a=this._handlers[w];return a.push(v),{dispose:()=>{const c=a.indexOf(v);c!==-1&&a.splice(c,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(w,v){if(this.reset(),this._ident=w,this._active=this._handlers[w]||_,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(w,v,a){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(w,v,a);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(w,v,a))}unhook(w,v=!0){if(this._active.length){let a=!1,c=this._active.length-1,r=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,a=v,r=this._stack.fallThrough,this._stack.paused=!1),!r&&a===!1){for(;c>=0&&(a=this._active[c].unhook(w),a!==!0);c--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,a;c--}for(;c>=0;c--)if(a=this._active[c].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",w);this._active=_,this._ident=0}};const g=new f.Params;g.addParam(0),s.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=g,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():g,this._data="",this._hitLimit=!1}put(w,v,a){this._hitLimit||(this._data+=(0,u.utf32ToString)(w,v,a),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let v=!1;if(this._hitLimit)v=!1;else if(w&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(a=>(this._params=g,this._data="",this._hitLimit=!1,a));return this._params=g,this._data="",this._hitLimit=!1,v}}},2015:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const u=n(844),f=n(8742),l=n(6242),_=n(6351);class g{constructor(c){this.table=new Uint8Array(c)}setDefault(c,r){this.table.fill(c<<4|r)}add(c,r,o,p){this.table[r<<8|c]=o<<4|p}addMany(c,r,o,p){for(let C=0;C<c.length;C++)this.table[r<<8|c[C]]=o<<4|p}}s.TransitionTable=g;const w=160;s.VT500_TRANSITION_TABLE=function(){const a=new g(4095),c=Array.apply(null,Array(256)).map((x,S)=>S),r=(x,S)=>c.slice(x,S),o=r(32,127),p=r(0,24);p.push(25),p.push.apply(p,r(28,32));const C=r(0,14);let y;for(y in a.setDefault(1,0),a.addMany(o,0,2,0),C)a.addMany([24,26,153,154],y,3,0),a.addMany(r(128,144),y,3,0),a.addMany(r(144,152),y,3,0),a.add(156,y,0,0),a.add(27,y,11,1),a.add(157,y,4,8),a.addMany([152,158,159],y,0,7),a.add(155,y,11,3),a.add(144,y,11,9);return a.addMany(p,0,3,0),a.addMany(p,1,3,1),a.add(127,1,0,1),a.addMany(p,8,0,8),a.addMany(p,3,3,3),a.add(127,3,0,3),a.addMany(p,4,3,4),a.add(127,4,0,4),a.addMany(p,6,3,6),a.addMany(p,5,3,5),a.add(127,5,0,5),a.addMany(p,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(o,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(r(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(o,7,0,7),a.addMany(p,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(r(64,127),3,7,0),a.addMany(r(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(r(48,60),4,8,4),a.addMany(r(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(r(32,64),6,0,6),a.add(127,6,0,6),a.addMany(r(64,127),6,0,0),a.addMany(r(32,48),3,9,5),a.addMany(r(32,48),5,9,5),a.addMany(r(48,64),5,0,6),a.addMany(r(64,127),5,7,0),a.addMany(r(32,48),4,9,5),a.addMany(r(32,48),1,9,2),a.addMany(r(32,48),2,9,2),a.addMany(r(48,127),2,10,0),a.addMany(r(48,80),1,10,0),a.addMany(r(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(r(96,127),1,10,0),a.add(80,1,11,9),a.addMany(p,9,0,9),a.add(127,9,0,9),a.addMany(r(28,32),9,0,9),a.addMany(r(32,48),9,9,12),a.addMany(r(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(p,11,0,11),a.addMany(r(32,128),11,0,11),a.addMany(r(28,32),11,0,11),a.addMany(p,10,0,10),a.add(127,10,0,10),a.addMany(r(28,32),10,0,10),a.addMany(r(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(r(32,48),10,9,12),a.addMany(p,12,0,12),a.add(127,12,0,12),a.addMany(r(28,32),12,0,12),a.addMany(r(32,48),12,9,12),a.addMany(r(48,64),12,0,11),a.addMany(r(64,127),12,12,13),a.addMany(r(64,127),10,12,13),a.addMany(r(64,127),9,12,13),a.addMany(p,13,13,13),a.addMany(o,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(w,0,2,0),a.add(w,8,5,8),a.add(w,6,0,6),a.add(w,11,0,11),a.add(w,13,13,13),a}();class v extends u.Disposable{constructor(c=s.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(r,o,p)=>{},this._executeHandlerFb=r=>{},this._csiHandlerFb=(r,o)=>{},this._escHandlerFb=r=>{},this._errorHandlerFb=r=>r,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,r=[64,126]){let o=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=c.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<c.intermediates.length;++C){const y=c.intermediates.charCodeAt(C);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=y}}if(c.final.length!==1)throw new Error("final must be a single byte");const p=c.final.charCodeAt(0);if(r[0]>p||p>r[1])throw new Error(`final must be in range ${r[0]} .. ${r[1]}`);return o<<=8,o|=p,o}identToString(c){const r=[];for(;c;)r.push(String.fromCharCode(255&c)),c>>=8;return r.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,r){const o=this._identifier(c,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const p=this._escHandlers[o];return p.push(r),{dispose:()=>{const C=p.indexOf(r);C!==-1&&p.splice(C,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,r){this._executeHandlers[c.charCodeAt(0)]=r}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,r){const o=this._identifier(c);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const p=this._csiHandlers[o];return p.push(r),{dispose:()=>{const C=p.indexOf(r);C!==-1&&p.splice(C,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,r){return this._dcsParser.registerHandler(this._identifier(c),r)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,r){return this._oscParser.registerHandler(c,r)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,r,o,p,C){this._parseStack.state=c,this._parseStack.handlers=r,this._parseStack.handlerPos=o,this._parseStack.transition=p,this._parseStack.chunkPos=C}parse(c,r,o){let p,C=0,y=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&E>-1){for(;E>=0&&(p=S[E](this._params),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 4:if(o===!1&&E>-1){for(;E>=0&&(p=S[E](),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 6:if(C=c[this._parseStack.chunkPos],p=this._dcsParser.unhook(C!==24&&C!==26,o),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=c[this._parseStack.chunkPos],p=this._oscParser.end(C!==24&&C!==26,o),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=x;S<r;++S){switch(C=c[S],y=this._transitions.table[this.currentState<<8|(C<160?C:w)],y>>4){case 2:for(let T=S+1;;++T){if(T>=r||(C=c[T])<32||C>126&&C<w){this._printHandler(c,S,T),S=T-1;break}if(++T>=r||(C=c[T])<32||C>126&&C<w){this._printHandler(c,S,T),S=T-1;break}if(++T>=r||(C=c[T])<32||C>126&&C<w){this._printHandler(c,S,T),S=T-1;break}if(++T>=r||(C=c[T])<32||C>126&&C<w){this._printHandler(c,S,T),S=T-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|C];let D=E?E.length-1:-1;for(;D>=0&&(p=E[D](this._params),p!==!0);D--)if(p instanceof Promise)return this._preserveStack(3,E,D,y,S),p;D<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++S<r&&(C=c[S])>47&&C<60);S--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const P=this._escHandlers[this._collect<<8|C];let B=P?P.length-1:-1;for(;B>=0&&(p=P[B](),p!==!0);B--)if(p instanceof Promise)return this._preserveStack(4,P,B,y,S),p;B<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let T=S+1;;++T)if(T>=r||(C=c[T])===24||C===26||C===27||C>127&&C<w){this._dcsParser.put(c,S,T),S=T-1;break}break;case 14:if(p=this._dcsParser.unhook(C!==24&&C!==26),p)return this._preserveStack(6,[],0,y,S),p;C===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let T=S+1;;T++)if(T>=r||(C=c[T])<32||C>127&&C<w){this._oscParser.put(c,S,T),S=T-1;break}break;case 6:if(p=this._oscParser.end(C!==24&&C!==26),p)return this._preserveStack(5,[],0,y,S),p;C===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&y}}}s.EscapeSequenceParser=v},6242:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const u=n(5770),f=n(482),l=[];s.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,g){this._handlers[_]===void 0&&(this._handlers[_]=[]);const w=this._handlers[_];return w.push(g),{dispose:()=>{const v=w.indexOf(g);v!==-1&&w.splice(v,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,g,w){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(_,g,w);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(_,g,w))}start(){this.reset(),this._state=1}put(_,g,w){if(this._state!==3){if(this._state===1)for(;g<w;){const v=_[g++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&w-g>0&&this._put(_,g,w)}}end(_,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,v=this._active.length-1,a=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,w=g,a=this._stack.fallThrough,this._stack.paused=!1),!a&&w===!1){for(;v>=0&&(w=this._active[v].end(_),w!==!0);v--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,w;v--}for(;v>=0;v--)if(w=this._active[v].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",_);this._active=l,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,g,w){this._hitLimit||(this._data+=(0,f.utf32ToString)(_,g,w),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let g=!1;if(this._hitLimit)g=!1;else if(_&&(g=this._handler(this._data),g instanceof Promise))return g.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,g}}},8742:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const n=2147483647;class u{static fromArray(l){const _=new u;if(!l.length)return _;for(let g=Array.isArray(l[0])?1:0;g<l.length;++g){const w=l[g];if(Array.isArray(w))for(let v=0;v<w.length;++v)_.addSubParam(w[v]);else _.addParam(w)}return _}constructor(l=32,_=32){if(this.maxLength=l,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new u(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let _=0;_<this.length;++_){l.push(this.params[_]);const g=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-g>0&&l.push(Array.prototype.slice.call(this._subParams,g,w))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>n?n:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>n?n:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const _=this._subParamsIdx[l]>>8,g=255&this._subParamsIdx[l];return g-_>0?this._subParams.subarray(_,g):null}getSubParamsAll(){const l={};for(let _=0;_<this.length;++_){const g=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-g>0&&(l[_]=this._subParams.slice(g,w))}return l}addDigit(l){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const g=this._digitIsSub?this._subParams:this.params,w=g[_-1];g[_-1]=~w?Math.min(10*w+l,n):l}}s.Params=u},5741:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,u){const f={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(f),u.dispose=()=>this._wrappedAddonDispose(f),u.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let u=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===n){u=f;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(u,1)}}},8771:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const u=n(3785),f=n(511);s.BufferApiView=class{constructor(l,_){this._buffer=l,this.type=_}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const _=this._buffer.lines.get(l);if(_)return new u.BufferLineApiView(_)}getNullCell(){return new f.CellData}}},3785:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const u=n(511);s.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new u.CellData)}translateToString(f,l,_){return this._line.translateToString(f,l,_)}}},8285:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const u=n(8771),f=n(8460),l=n(844);class _ extends l.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=_},7975:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,u){return this._core.registerCsiHandler(n,f=>u(f.toArray()))}addCsiHandler(n,u){return this.registerCsiHandler(n,u)}registerDcsHandler(n,u){return this._core.registerDcsHandler(n,(f,l)=>u(f,l.toArray()))}addDcsHandler(n,u){return this.registerDcsHandler(n,u)}registerEscHandler(n,u){return this._core.registerEscHandler(n,u)}addEscHandler(n,u){return this.registerEscHandler(n,u)}registerOscHandler(n,u){return this._core.registerOscHandler(n,u)}addOscHandler(n,u){return this.registerOscHandler(n,u)}}},7090:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(b,s,n){var u=this&&this.__decorate||function(a,c,r,o){var p,C=arguments.length,y=C<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,c,r,o);else for(var x=a.length-1;x>=0;x--)(p=a[x])&&(y=(C<3?p(y):C>3?p(c,r,y):p(c,r))||y);return C>3&&y&&Object.defineProperty(c,r,y),y},f=this&&this.__param||function(a,c){return function(r,o){c(r,o,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const l=n(8460),_=n(844),g=n(5295),w=n(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let v=s.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new g.BufferSet(a,this))}resize(a,c){this.cols=a,this.rows=c,this.buffers.resize(a,c),this._onResize.fire({cols:a,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,c=!1){const r=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===a.fg&&o.getBg(0)===a.bg||(o=r.getBlankLine(a,c),this._cachedBlankLine=o),o.isWrapped=c;const p=r.ybase+r.scrollTop,C=r.ybase+r.scrollBottom;if(r.scrollTop===0){const y=r.lines.isFull;C===r.lines.length-1?y?r.lines.recycle().copyFrom(o):r.lines.push(o.clone()):r.lines.splice(C+1,0,o.clone()),y?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{const y=C-p+1;r.lines.shiftElements(p+1,y-1,-1),r.lines.set(C,o.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(a,c,r){const o=this.buffer;if(a<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else a+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const p=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+a,o.ybase),0),p!==o.ydisp&&(c||this._onScroll.fire(o.ydisp))}};s.BufferService=v=u([f(0,w.IOptionsService)],v)},7994:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,u){this._charsets[n]=u,this.glevel===n&&(this.charset=u)}}},1753:function(b,s,n){var u=this&&this.__decorate||function(o,p,C,y){var x,S=arguments.length,E=S<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,C):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,p,C,y);else for(var D=o.length-1;D>=0;D--)(x=o[D])&&(E=(S<3?x(E):S>3?x(p,C,E):x(p,C))||E);return S>3&&E&&Object.defineProperty(p,C,E),E},f=this&&this.__param||function(o,p){return function(C,y){p(C,y,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const l=n(2585),_=n(8460),g=n(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function v(o,p){let C=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(C|=64,C|=o.action):(C|=3&o.button,4&o.button&&(C|=64),8&o.button&&(C|=128),o.action===32?C|=32:o.action!==0||p||(C|=3)),C}const a=String.fromCharCode,c={DEFAULT:o=>{const p=[v(o,!1)+32,o.col+32,o.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${a(p[0])}${a(p[1])}${a(p[2])}`},SGR:o=>{const p=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.col};${o.row}${p}`},SGR_PIXELS:o=>{const p=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.x};${o.y}${p}`}};let r=s.CoreMouseService=class extends g.Disposable{constructor(o,p){super(),this._bufferService=o,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(w))this.addProtocol(C,w[C]);for(const C of Object.keys(c))this.addEncoding(C,c[C]);this.reset()}addProtocol(o,p){this._protocols[o]=p}addEncoding(o,p){this._encodings[o]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const p=this._encodings[this._activeEncoding](o);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,p,C){if(C){if(o.x!==p.x||o.y!==p.y)return!1}else if(o.col!==p.col||o.row!==p.row)return!1;return o.button===p.button&&o.action===p.action&&o.ctrl===p.ctrl&&o.alt===p.alt&&o.shift===p.shift}};s.CoreMouseService=r=u([f(0,l.IBufferService),f(1,l.ICoreService)],r)},6975:function(b,s,n){var u=this&&this.__decorate||function(r,o,p,C){var y,x=arguments.length,S=x<3?o:C===null?C=Object.getOwnPropertyDescriptor(o,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,o,p,C);else for(var E=r.length-1;E>=0;E--)(y=r[E])&&(S=(x<3?y(S):x>3?y(o,p,S):y(o,p))||S);return x>3&&S&&Object.defineProperty(o,p,S),S},f=this&&this.__param||function(r,o){return function(p,C){o(p,C,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const l=n(1439),_=n(8460),g=n(844),w=n(2585),v=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=s.CoreService=class extends g.Disposable{constructor(r,o,p){super(),this._bufferService=r,this._logService=o,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(a)}reset(){this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(a)}triggerDataEvent(r,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${r}"`,()=>r.split("").map(C=>C.charCodeAt(0))),this._onData.fire(r)}triggerBinaryEvent(r){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${r}"`,()=>r.split("").map(o=>o.charCodeAt(0))),this._onBinary.fire(r))}};s.CoreService=c=u([f(0,w.IBufferService),f(1,w.ILogService),f(2,w.IOptionsService)],c)},9074:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const u=n(8055),f=n(8460),l=n(844),_=n(6106);let g=0,w=0;class v extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(r=>r==null?void 0:r.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(r){if(r.marker.isDisposed)return;const o=new a(r);if(o){const p=o.marker.onDispose(()=>o.dispose());o.onDispose(()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),p.dispose())}),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const r of this._decorations.values())r.dispose();this._decorations.clear()}*getDecorationsAtCell(r,o,p){let C=0,y=0;for(const x of this._decorations.getKeyIterator(o))C=x.options.x??0,y=C+(x.options.width??1),r>=C&&r<y&&(!p||(x.options.layer??"bottom")===p)&&(yield x)}forEachDecorationAtCell(r,o,p,C){this._decorations.forEachByKey(o,y=>{g=y.options.x??0,w=g+(y.options.width??1),r>=g&&r<w&&(!p||(y.options.layer??"bottom")===p)&&C(y)})}}s.DecorationService=v;class a extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(r){super(),this.options=r,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=r.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const u=n(2585),f=n(8343);class l{constructor(...g){this._entries=new Map;for(const[w,v]of g)this.set(w,v)}set(g,w){const v=this._entries.get(g);return this._entries.set(g,w),v}forEach(g){for(const[w,v]of this._entries.entries())g(w,v)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}s.ServiceCollection=l,s.InstantiationService=class{constructor(){this._services=new l,this._services.set(u.IInstantiationService,this)}setService(_,g){this._services.set(_,g)}getService(_){return this._services.get(_)}createInstance(_,...g){const w=(0,f.getServiceDependencies)(_).sort((c,r)=>c.index-r.index),v=[];for(const c of w){const r=this._services.get(c.id);if(!r)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${c.id}.`);v.push(r)}const a=w.length>0?w[0].index:g.length;if(g.length!==a)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${a+1} conflicts with ${g.length} static arguments`);return new _(...g,...v)}}},7866:function(b,s,n){var u=this&&this.__decorate||function(a,c,r,o){var p,C=arguments.length,y=C<3?c:o===null?o=Object.getOwnPropertyDescriptor(c,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,c,r,o);else for(var x=a.length-1;x>=0;x--)(p=a[x])&&(y=(C<3?p(y):C>3?p(c,r,y):p(c,r))||y);return C>3&&y&&Object.defineProperty(c,r,y),y},f=this&&this.__param||function(a,c){return function(r,o){c(r,o,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const l=n(844),_=n(2585),g={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let w,v=s.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let c=0;c<a.length;c++)typeof a[c]=="function"&&(a[c]=a[c]())}_log(a,c,r){this._evalLazyOptionalParams(r),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...r)}trace(a,...c){var r;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.trace.bind(this._optionsService.options.logger))??console.log,a,c)}debug(a,...c){var r;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.debug.bind(this._optionsService.options.logger))??console.log,a,c)}info(a,...c){var r;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.info.bind(this._optionsService.options.logger))??console.info,a,c)}warn(a,...c){var r;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.warn.bind(this._optionsService.options.logger))??console.warn,a,c)}error(a,...c){var r;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.error.bind(this._optionsService.options.logger))??console.error,a,c)}};s.LogService=v=u([f(0,_.IOptionsService)],v),s.setTraceLogger=function(a){w=a},s.traceCall=function(a,c,r){if(typeof r.value!="function")throw new Error("not supported");const o=r.value;r.value=function(...p){if(w.logLevel!==_.LogLevelEnum.TRACE)return o.apply(this,p);w.trace(`GlyphRenderer#${o.name}(${p.map(y=>JSON.stringify(y)).join(", ")})`);const C=o.apply(this,p);return w.trace(`GlyphRenderer#${o.name} return`,C),C}}},7302:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const u=n(8460),f=n(844),l=n(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends f.Disposable{constructor(v){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const a={...s.DEFAULT_OPTIONS};for(const c in v)if(c in a)try{const r=v[c];a[c]=this._sanitizeAndValidateOption(c,r)}catch(r){console.error(r)}this.rawOptions=a,this.options={...a},this._setupOptions(),this.register((0,f.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(v,a){return this.onOptionChange(c=>{c===v&&a(this.rawOptions[v])})}onMultipleOptionChange(v,a){return this.onOptionChange(c=>{v.indexOf(c)!==-1&&a()})}_setupOptions(){const v=c=>{if(!(c in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},a=(c,r)=>{if(!(c in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);r=this._sanitizeAndValidateOption(c,r),this.rawOptions[c]!==r&&(this.rawOptions[c]=r,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const r={get:v.bind(this,c),set:a.bind(this,c)};Object.defineProperty(this.options,c,r)}}_sanitizeAndValidateOption(v,a){switch(v){case"cursorStyle":if(a||(a=s.DEFAULT_OPTIONS[v]),!function(c){return c==="block"||c==="underline"||c==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${v}`);break;case"wordSeparator":a||(a=s.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=_.includes(a)?a:s.DEFAULT_OPTIONS[v];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${v} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${v} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}s.OptionsService=g},2660:function(b,s,n){var u=this&&this.__decorate||function(g,w,v,a){var c,r=arguments.length,o=r<3?w:a===null?a=Object.getOwnPropertyDescriptor(w,v):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(g,w,v,a);else for(var p=g.length-1;p>=0;p--)(c=g[p])&&(o=(r<3?c(o):r>3?c(w,v,o):c(w,v))||o);return r>3&&o&&Object.defineProperty(w,v,o),o},f=this&&this.__param||function(g,w){return function(v,a){w(v,a,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const l=n(2585);let _=s.OscLinkService=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){const w=this._bufferService.buffer;if(g.id===void 0){const p=w.addMarker(w.ybase+w.y),C={data:g,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(C,p)),this._dataByLinkId.set(C.id,C),C.id}const v=g,a=this._getEntryIdKey(v),c=this._entriesWithId.get(a);if(c)return this.addLineToLink(c.id,w.ybase+w.y),c.id;const r=w.addMarker(w.ybase+w.y),o={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[r]};return r.onDispose(()=>this._removeMarkerFromLink(o,r)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(g,w){const v=this._dataByLinkId.get(g);if(v&&v.lines.every(a=>a.line!==w)){const a=this._bufferService.buffer.addMarker(w);v.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(v,a))}}getLinkData(g){var w;return(w=this._dataByLinkId.get(g))==null?void 0:w.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,w){const v=g.lines.indexOf(w);v!==-1&&(g.lines.splice(v,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};s.OscLinkService=_=u([f(0,l.IBufferService)],_)},8343:(b,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const n="di$target",u="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(f){return f[u]||[]},s.createDecorator=function(f){if(s.serviceRegistry.has(f))return s.serviceRegistry.get(f);const l=function(_,g,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,a,c){a[n]===a?a[u].push({id:v,index:c}):(a[u]=[{id:v,index:c}],a[n]=a)})(l,_,w)};return l.toString=()=>f,s.serviceRegistry.set(f,l),l}},2585:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const u=n(8343);var f;s.IBufferService=(0,u.createDecorator)("BufferService"),s.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),s.ICoreService=(0,u.createDecorator)("CoreService"),s.ICharsetService=(0,u.createDecorator)("CharsetService"),s.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(s.LogLevelEnum=f={})),s.ILogService=(0,u.createDecorator)("LogService"),s.IOptionsService=(0,u.createDecorator)("OptionsService"),s.IOscLinkService=(0,u.createDecorator)("OscLinkService"),s.IUnicodeService=(0,u.createDecorator)("UnicodeService"),s.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(b,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const u=n(8460),f=n(225);class l{static extractShouldJoin(g){return(1&g)!=0}static extractWidth(g){return g>>1&3}static extractCharKind(g){return g>>3}static createPropertyValue(g,w,v=!1){return(16777215&g)<<3|(3&w)<<1|(v?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const g=new f.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let w=0,v=0;const a=g.length;for(let c=0;c<a;++c){let r=g.charCodeAt(c);if(55296<=r&&r<=56319){if(++c>=a)return w+this.wcwidth(r);const C=g.charCodeAt(c);56320<=C&&C<=57343?r=1024*(r-55296)+C-56320+65536:w+=this.wcwidth(C)}const o=this.charProperties(r,v);let p=l.extractWidth(o);l.extractShouldJoin(o)&&(p-=l.extractWidth(v)),w+=p,v=o}return w}charProperties(g,w){return this._activeProvider.charProperties(g,w)}}s.UnicodeService=l}},h={};function d(b){var s=h[b];if(s!==void 0)return s.exports;var n=h[b]={exports:{}};return i[b].call(n.exports,n,n.exports,d),n.exports}var m={};return(()=>{var b=m;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const s=d(9042),n=d(3236),u=d(844),f=d(5741),l=d(8285),_=d(7975),g=d(7090),w=["cols","rows"];class v extends u.Disposable{constructor(c){super(),this._core=this.register(new n.Terminal(c)),this._addonManager=this.register(new f.AddonManager),this._publicOptions={...this._core.options};const r=p=>this._core.options[p],o=(p,C)=>{this._checkReadonlyOptions(p),this._core.options[p]=C};for(const p in this._core.options){const C={get:r.bind(this,p),set:o.bind(this,p)};Object.defineProperty(this._publicOptions,p,C)}}_checkReadonlyOptions(c){if(w.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new g.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let r="none";switch(this._core.coreMouseService.activeProtocol){case"X10":r="x10";break;case"VT200":r="vt200";break;case"DRAG":r="drag";break;case"ANY":r="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:r,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const r in c)this._publicOptions[r]=c[r]}blur(){this._core.blur()}focus(){this._core.focus()}input(c,r=!0){this._core.input(c,r)}resize(c,r){this._verifyIntegers(c,r),this._core.resize(c,r)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}attachCustomWheelEventHandler(c){this._core.attachCustomWheelEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){return this._checkProposedApi(),this._verifyPositiveIntegers(c.x??0,c.width??0,c.height??0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,r,o){this._verifyIntegers(c,r,o),this._core.select(c,r,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,r){this._verifyIntegers(c,r),this._core.selectLines(c,r)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,r){this._core.write(c,r)}writeln(c,r){this._core.write(c),this._core.write(`\r
`,r)}paste(c){this._core.paste(c)}refresh(c,r){this._verifyIntegers(c,r),this._core.refresh(c,r)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return s}_verifyIntegers(...c){for(const r of c)if(r===1/0||isNaN(r)||r%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const r of c)if(r&&(r===1/0||isNaN(r)||r%1!=0||r<0))throw new Error("This API only accepts positive integers")}}b.Terminal=v})(),m})())}(Pi)),Pi.exports}var xu=Eu(),Ii={exports:{}},xn;function ku(){return xn||(xn=1,function(e,t){(function(i,h){e.exports=h()})(self,()=>(()=>{var i={};return(()=>{var h=i;Object.defineProperty(h,"__esModule",{value:!0}),h.FitAddon=void 0,h.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const m=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(m._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,m=d._renderService.dimensions;if(m.css.cell.width===0||m.css.cell.height===0)return;const b=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(s.getPropertyValue("height")),u=Math.max(0,parseInt(s.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),l=n-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),_=u-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(_/m.css.cell.width)),rows:Math.max(1,Math.floor(l/m.css.cell.height))}}}})(),i})())}(Ii)),Ii.exports}var Ru=ku();const Lu={class:"operation-panel"},Du=Xe({__name:"OperationXTerm",props:{node:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const i=e,h=t,d=()=>{h("close")},m=Te(i.node),b=new xu.Terminal({theme:{background:"#002b36",foreground:"#cce4f5",cursor:"#839496"}}),s=new Ru.FitAddon;b.loadAddon(s);const n=Te(null);let u=null;const f=()=>{if(!m.value)return;const _=m.value,g=window.location.protocol==="https:"?"wss:":"ws:";u=new WebSocket(`${g}//${Cu}/ws`),u.onopen=()=>{u==null||u.send(JSON.stringify({host:_.ip,port:_.port||22,username:_.ssh_username,password:_.auth_type==="password"?_.auth_value:null,privateKey:_.auth_type!=="password"?_.auth_value:null}))},u.onmessage=w=>{b.write(w.data)},u.onclose=()=>{b.writeln(`\r
WebSocket connection closed.\r
`)},u.onerror=w=>{b.writeln(`\r
WebSocket error: ${w}\r
`)}},l=()=>{n.value&&(b.open(n.value),b.focus(),s.fit(),b.onData(_=>{u&&u.readyState===WebSocket.OPEN&&u.send(_)}),b.onSelectionChange(()=>{const _=b.getSelection();_&&navigator.clipboard.writeText(_).then(()=>{os("")}).catch(g=>{console.error(":",g)})}),b.writeln("Connecting to SSH server..."))};return Ts(()=>{l(),f();const _=new ResizeObserver(()=>{n.value&&s.fit()});n.value&&_.observe(n.value),Vs(()=>{_.disconnect()})}),Vs(()=>{u&&u.close(),b.dispose()}),(_,g)=>(pe(),Ee("div",Lu,[ie("div",{class:"bar"},[ie("button",{class:"small-button",onClick:d},"")]),ie("div",{ref_key:"terminalContainer",ref:n,class:"terminal-container",contenteditable:"true"},null,512)]))}}),Au=Ye(Du,[["__scopeId","data-v-24ef52ce"]]),Tu={};function Ou(e,t){return pe(),lt(dc,{name:"fade-width"},{default:$t(()=>[dr(e.$slots,"default",{},void 0,!0)]),_:3})}const da=Ye(Tu,[["render",Ou],["__scopeId","data-v-79459acb"]]),Bu={},Mu={class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function Pu(e,t){return pe(),Ee("svg",Mu,t[0]||(t[0]=[ie("path",{d:"M317.732571 184.32h389.12V92.16h-389.12v92.16z m-92.16 0v-102.4c0-45.202286 36.790857-81.92 81.92-81.92h409.6c45.202286 0 81.92 36.717714 81.92 81.92v102.4h163.84c22.674286 0 40.96 18.285714 40.96 40.96v40.96a10.24 10.24 0 0 1-10.24 10.24h-77.312l-31.597714 669.403429A81.846857 81.846857 0 0 1 802.889143 1024H221.769143c-43.666286 0-79.725714-34.377143-81.773714-78.116571L108.251429 276.48H31.012571a10.24 10.24 0 0 1-10.24-10.24v-40.96c0-22.674286 18.285714-40.96 40.96-40.96h163.84z m567.442286 747.52l31.012572-655.36H200.630857l31.012572 655.36h561.371428z",fill:"#DE5347"},null,-1)]))}const _a=Ye(Bu,[["render",Pu]]),Iu={},Hu={class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function Fu(e,t){return pe(),Ee("svg",Hu,t[0]||(t[0]=[ie("path",{d:"M166.532384 1024a47.357783 47.357783 0 0 1-23.2146-6.19056 46.429199 46.429199 0 0 1-21.666959-28.786103L81.102658 827.449726a46.119671 46.119671 0 0 1 4.64292-34.357607l411.053172-711.91438a162.192667 162.192667 0 0 1 281.051416 162.192668l-411.053172 711.914379a44.572031 44.572031 0 0 1-27.547991 21.357431L179.223031 1021.523776a43.333919 43.333919 0 0 1-12.690647 2.476224z m160.025971-92.858397H327.177411zM175.508695 823.116334l24.452712 96.572733L296.224612 892.450604 698.611 196.941208a69.33427 69.33427 0 1 0-120.09686-69.33427z",fill:"#060404"},null,-1),ie("path",{d:"M691.491856 346.443228A49.214951 49.214951 0 0 1 667.658201 340.562196l-199.955082-116.072997A46.429199 46.429199 0 0 1 512.894205 144.011922l200.574139 115.763468a46.429199 46.429199 0 0 1-23.2146 86.667838z",fill:"#060404"},null,-1),ie("path",{d:"M897.947026 1024H574.799804a46.429199 46.429199 0 1 1 0-92.858397h323.147222a46.429199 46.429199 0 0 1 0 92.858397z",fill:"#2DAF62"},null,-1)]))}const $u=Ye(Iu,[["render",Fu]]),Nu={},Wu={class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function Uu(e,t){return pe(),Ee("svg",Wu,t[0]||(t[0]=[ie("path",{d:"M100.57142844 32h822.85714312a68.57142844 68.57142844 0 0 1 68.57142844 68.57142844v822.85714312a68.57142844 68.57142844 0 0 1-68.57142844 68.57142844H100.57142844a68.57142844 68.57142844 0 0 1-68.57142844-68.57142844V100.57142844a68.57142844 68.57142844 0 0 1 68.57142844-68.57142844z m334.90285687 345.29142844l116.36571469-116.36571375-58.18285687-58.18285782-116.36571469 116.36571469L260.92571469 202.74285688 202.74285688 260.92571469l116.36571468 116.36571375-116.36571468 116.36571469 58.18285781 58.18285687 116.36571375-116.36571469 116.36571469 116.36571469 58.18285687-58.18285687-116.36571469-116.36571469zM512 786.28571469v68.57142844h342.85714312v-68.57142844H512z"},null,-1)]))}const ju=Ye(Nu,[["render",Uu]]),zu={class:"node-list-container"},Ku={class:"node-list"},Vu={class:"bar"},qu={key:0,class:"header-title"},Gu={key:1,class:"header-title"},Ju={class:"buttons"},Xu={key:0,class:"nodes"},Yu=["onClick"],Zu={class:"node-info"},Qu=["checked"],ef=["title"],tf={class:"buttons node-actions"},sf=["onClick"],rf=["onClick"],nf=["onClick"],of=Xe({__name:"NodeList",setup(e){la();const t=We("nodes"),i=De(()=>Object.keys(t.value).length),h=We("selectedNodes"),d=Te(!1),m=Te({name:"",ip:"",port:22,ssh_username:"",auth_type:"password",auth_value:""}),b=De(()=>t.value?Object.keys(t.value).length===h.value.length:!1),s=()=>{h.value=Object.keys(t.value)},n=()=>{h.value=[]},u=c=>{const r=h.value.indexOf(c);r===-1?h.value.push(c):h.value.splice(r,1)},f=c=>{t.value[c.ip]=c,d.value=!1},l=c=>{m.value=c,d.value=!0},_=Te(null),g=c=>{_.value&&c.ip===_.value.ip||(_.value=null,setTimeout(()=>{_.value=c},50))},w=()=>{if(i.value===0){gt("");return}const c=new Blob([JSON.stringify(t.value)],{type:"application/json"}),r=URL.createObjectURL(c),o=document.createElement("a");o.href=r,o.download="nodes.json",o.click(),URL.revokeObjectURL(r),os("")},v=()=>{console.log("import start");const c=document.createElement("input");c.type="file",c.accept="application/json",c.click(),c.onchange=()=>{var o;const r=(o=c.files)==null?void 0:o[0];if(r){const p=new FileReader;p.onload=()=>{try{const C=JSON.parse(p.result);if(typeof C=="object"){console.log(C);for(const y in C){const x=["name","ip","port","ssh_username","auth_type","auth_value"];for(const S of x)if(!C[y].hasOwnProperty(S)){gt(` [${y}]  ${S} `);return}}t.value=C,os("")}}catch(C){gt(`${C}`)}},p.readAsText(r)}}},a=c=>{if(confirm("")){delete t.value[c];const r=h.value.indexOf(c);r!==-1&&h.value.splice(r,1)}};return(c,r)=>(pe(),Ee(xe,null,[d.value?(pe(),lt(gu,{key:0,node:m.value,onClose:r[0]||(r[0]=o=>d.value=!1),onAddNode:f},null,8,["node"])):vt("",!0),ie("div",zu,[ie("div",Ku,[ie("div",Vu,[Fe(h).length<=0?(pe(),Ee("span",qu,""+dt(i.value)+"",1)):vt("",!0),Fe(h).length>0?(pe(),Ee("span",Gu,""+dt(Fe(h).length)+"",1)):vt("",!0),ie("div",Ju,[qe(ie("button",{class:"small-button",onClick:s},"",512),[[Xs,!b.value&&i.value>0]]),qe(ie("button",{class:"small-button",onClick:n},"",512),[[Xs,b.value&&i.value>0]]),ie("button",{class:"small-button",onClick:r[1]||(r[1]=o=>d.value=!0)},"")])]),i.value>0?(pe(),Ee("ul",Xu,[(pe(!0),Ee(xe,null,Ui(Object.values(Fe(t)).sort((o,p)=>o.name>p.name?1:-1),o=>{var p;return pe(),Ee("li",{class:ts({node:1,"ssh-active":((p=_.value)==null?void 0:p.ip)==o.ip}),key:o.ip,onClick:C=>u(o.ip)},[ie("div",Zu,[ie("input",{type:"checkbox",checked:Fe(h).includes(o.ip)},null,8,Qu),ie("span",{class:ts(["node-info-name",{selected:Fe(h).includes(o.ip)}]),title:`${o.name}[${o.ip}:${o.port}]`},dt(o.name),11,ef)]),ie("div",tf,[ie("span",{class:"small-button",onClick:es(C=>g(o),["stop"])},[de(ju)],8,sf),ie("span",{class:"small-button",onClick:es(C=>l(o),["stop"])},[de($u)],8,rf),ie("span",{class:"small-button",onClick:es(C=>a(o.ip),["stop"])},[de(_a)],8,nf)])],10,Yu)}),128))])):vt("",!0),ie("div",{class:"bar"},[r[3]||(r[3]=ie("span",{class:"footer-title"}," @Managi ",-1)),ie("div",{class:"buttons"},[ie("button",{class:"small-button",onClick:w},""),ie("button",{class:"small-button",onClick:v},"")])])])]),de(da,null,{default:$t(()=>[_.value?(pe(),lt(Au,{key:0,onClose:r[2]||(r[2]=o=>_.value=null),node:_.value},null,8,["node"])):vt("",!0)]),_:1})],64))}}),af=Ye(of,[["__scopeId","data-v-0ecba4d7"]]),lf=["disabled"],cf=Xe({__name:"ButtonWithSpinner",props:{action:{type:Function,required:!0},size:{type:Number,default:20},thicknesses:{type:Number,default:4}},setup(e){const t=e,i=Te(!1),h=async()=>new Promise(async(d,m)=>{if(console.log("ButtonWithSpinner.handleClick"),typeof t.action!="function"){gt("props.action is not a function");return}i.value=!0;try{const b=await t.action();b&&os(b)}catch(b){gt(b)}finally{i.value=!1,d(null)}});return(d,m)=>(pe(),Ee("button",{onClick:h,disabled:i.value},[i.value?(pe(),lt(eu,{key:0,size:t.size,thicknesses:t.thicknesses},null,8,["size","thicknesses"])):dr(d.$slots,"default",{key:1},void 0)],8,lf))}}),hf=Ye(cf,[["__scopeId","data-v-c5f34feb"]]),uf={key:0,class:"operation-panel"},ff={class:"bar"},df={class:"buttons shortcuts"},_f=["onClick","onMouseover"],pf={class:"command-container"},vf={class:"buttons"},gf={class:"results"},mf={class:"output-block"},Sf=["onClick"],bf={class:"output-block error-block"},Cf=["onClick"],yf={key:1,class:"operation-panel full-center"},wf=Xe({__name:"OperationPanel",setup(e){const t=We("nodes"),i=We("selectedNodes"),h=Te(""),d=Te(),m=Te([]),b=Te(""),s=Te(!1),n=Te(-1);Ts(()=>{const v=localStorage.getItem("shortcuts");v?m.value=JSON.parse(v):(m.value=[{label:"",cmd:`# 
system_info=$(uname -a | awk '{print $1, $2, $3}')
cpu_info=$(grep -m 1 "model name" /proc/cpuinfo | cut -d ':' -f 2 | sed 's/^ *//')
cpu_cores=$(grep -c ^processor /proc/cpuinfo)
cpu_usage=$(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\\([0-9.]*\\)%* id.*/\\1/" | awk '{print 100 - $1"%"}')

#  /dev/ 
disk_info=$(df -h | awk '/^\\/dev\\// {print $1, $3"/"$2, "("$5")"}' | tr '\\n' ';' | sed 's/;$/ /')

# 
memory_total=$(free -m | awk '/Mem:/ {print $2}')
memory_used=$(free -m | awk '/Mem:/ {print $3}')
memory_percent=$(free -m | awk '/Mem:/ {printf "%.2f%%", ($3/$2)*100}')


# 
max_network_info=$(awk 'NR > 2 {rx+=$2; tx+=$10} END {printf "%.2fG|%.2fG", rx/1024/1024/1024, tx/1024/1024/1024}' /proc/net/dev)

# 
network_in=$(echo "$max_network_info" | cut -d '|' -f1)
network_out=$(echo "$max_network_info" | cut -d '|' -f2)

# 
load_info=$(awk '{printf "%.2f/%.2f/%.2f", $1, $2, $3}' /proc/loadavg)

# 
process_count=$(ps -e | wc -l)

# 
tcp_connections=$(ss -t | grep -c ESTAB)
udp_connections=$(ss -u | grep -c UNCONN)

# 
uptime_seconds=$(awk '{print int($1)}' /proc/uptime)
uptime_days=$((uptime_seconds / 86400))

# 
echo ": $system_info"
echo "CPU: $cpu_info $cpu_cores Virtual Core ($cpu_usage)"
echo ": $disk_info"
echo ": $memory_used"M"/$memory_total"M" ($memory_percent)"
echo ": IN $network_in OUT $network_out"
echo ": $load_info"
echo ": $process_count"
echo ": TCP $tcp_connections UDP $udp_connections"
echo ": $uptime_days "`},{label:"",cmd:`#  Aabbcc
echo "$(whoami):Aabbcc" | sudo chpasswd`}],localStorage.setItem("shortcuts",JSON.stringify(m.value)))});const u=(v,a)=>{h.value=a},f=()=>{h.value.length<2?gt(""):s.value=!0},l=()=>{if(b.value&&h.value){const v={label:b.value,cmd:h.value};m.value.push(v),localStorage.setItem("shortcuts",JSON.stringify(m.value)),b.value="",s.value=!1}else gt("")},_=v=>{confirm("")&&(m.value.splice(v,1),localStorage.setItem("shortcuts",JSON.stringify(m.value)))},g=async()=>{if(h.value.length<2)throw"";if(i.value.length===0)throw"1";d.value=[];for(const v of i.value)try{const a=t.value[v],c=await wu(a,h.value.split(`
`));d.value.push(c)}catch(a){console.log(a),gt(a)}},w=v=>{navigator.clipboard.writeText(v).then(()=>{os("")}).catch(a=>{gt(": "+a)})};return(v,a)=>{const c=Cl("focus");return pe(),Ee(xe,null,[Object.keys(Fe(t)).length>0?(pe(),Ee("div",uf,[ie("div",ff,[ie("div",df,[a[5]||(a[5]=ie("span",{class:"shortcuts-note shortcut"},"",-1)),(pe(!0),Ee(xe,null,Ui(m.value,(r,o)=>(pe(),Ee("button",{class:"small-button shortcut",key:o,onClick:p=>u(r.label,r.cmd),onMouseover:p=>n.value=o,onMouseleave:a[0]||(a[0]=p=>n.value=-1)},[ft(dt(r.label)+" ",1),de(da,null,{default:$t(()=>[n.value===o?(pe(),lt(_a,{key:0,class:"delete-icon",onClick:es(p=>_(o),["stop"])},null,8,["onClick"])):vt("",!0)]),_:2},1024)],40,_f))),128)),ie("button",{class:"small-button shortcut",onClick:f},"+")])]),ie("div",pf,[qe(ie("textarea",{"onUpdate:modelValue":a[1]||(a[1]=r=>h.value=r),placeholder:" Shell ",class:"command-input"},null,512),[[Ht,h.value]]),s.value?(pe(),lt(ua,{key:0,onClose:a[4]||(a[4]=r=>s.value=!1)},{default:$t(()=>[a[6]||(a[6]=ie("h2",null,"",-1)),qe(ie("input",{class:"shortcut-input","onUpdate:modelValue":a[2]||(a[2]=r=>b.value=r),placeholder:""},null,512),[[c],[Ht,b.value]]),ie("div",vf,[ie("button",{onClick:l},""),ie("button",{onClick:a[3]||(a[3]=r=>s.value=!1)},"")])]),_:1})):vt("",!0),de(hf,{class:"execute-button",action:g},{default:$t(()=>a[7]||(a[7]=[ft("  ")])),_:1}),ie("ul",gf,[(pe(!0),Ee(xe,null,Ui(d.value,r=>(pe(),Ee("li",{key:r.node.ip,class:"result"},[ie("strong",{class:ts({success:r.success,failed:!r.success})},dt(r.node.name)+"["+dt(r.node.ip)+"] ",3),qe(ie("div",mf,[ie("pre",null,[ie("code",null,dt(r.output.join("")),1),ie("button",{class:"copy-button",onClick:o=>w(r.output.join(""))},"Copy",8,Sf)])],512),[[Xs,r.output.join("").length>0]]),qe(ie("div",bf,[ie("pre",null,[ie("code",null,dt(r.error.join("")),1),ie("button",{class:"copy-button",onClick:o=>w(r.error.join(""))},"Copy",8,Cf)])],512),[[Xs,r.error.join("").length>0]])]))),128))])])])):vt("",!0),Object.keys(Fe(t)).length===0?(pe(),Ee("div",yf,a[8]||(a[8]=[ie("p",null,"",-1)]))):vt("",!0)],64)}}}),Ef=Ye(wf,[["__scopeId","data-v-8801a8b2"]]),xf={class:"container scroll"},kf=Xe({__name:"ManageView",setup(e){la();const t=Te(Su());vs(t,()=>{bu(t.value),os(" LocalStorage")},{deep:!0});const i=Te([]);return Zt("selectedNodes",i),Zt("nodes",t),(h,d)=>(pe(),Ee("main",null,[ie("div",xf,[de(af),de(Ef)])]))}}),Rf=qh({history:wh(),routes:[{path:"/",name:"manage",component:kf}]}),gi=jc(Zh);gi.directive("focus",{mounted(e){e.focus()}});gi.use(Rf);gi.use(du);gi.mount("#app");</script>
    <style rel="stylesheet" crossorigin>:root{--color-main: #9ec1eb;--color-sub: #d5e5f7;--color-bg: #e4f0ff79;--color-while: #f4f9ff;--color-green: #1cad70;--color-red: #eb4646;--color-orange: #f59b00;--color-bg-1: #333333;--color-font-1: #555555;--color-font-2: #555555;--color-font-3: #777777}*,*:before,*:after{margin:0;padding:0;box-sizing:border-box;font-weight:400;text-decoration:none}body{font-size:15px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{line-height:1.5;min-height:100vh;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}select,button,input,textarea{display:inline-block;line-height:1.2rem;font-size:1rem;text-align:center;color:var(--color-font-1);border-radius:.2rem;border:1.25px solid var(--color-main);padding:.25rem .5rem;min-width:5rem;width:100%;background-color:var(--color-bg);background-repeat:no-repeat;background-position:center;text-decoration:none;box-sizing:border-box;cursor:pointer;overflow:visible;outline:none}button:hover{color:var(--color-main);text-decoration:none}input,textarea{cursor:text}textarea{text-align:left}h2{font-size:1.25rem;color:var(--color-font-2);font-weight:700;text-align:center}.buttons{display:flex;align-items:center;justify-content:space-between;gap:.25rem}.bar{display:flex;justify-content:space-between;align-items:center;padding:1rem .5rem;height:3rem}.small-button{min-width:.5rem;width:auto;font-size:.8rem;line-height:1rem}.icon{width:1rem;height:1rem}::-webkit-scrollbar{display:none}*{scrollbar-width:none}*{overflow:scroll}@keyframes gradient{0%{background-position:0% 0%}50%{background-position:100% 100%}to{background-position:0% 0%}}.wave{background:#01010126;border-radius:500% 500% 0 0;position:fixed;width:200%;height:3rem;animation:wave 10s -3s linear infinite;transform:translateZ(0);bottom:0;left:0;z-index:-1;opacity:.5}.wave:nth-of-type(2){bottom:-1.25em;animation:wave 10s linear reverse infinite;opacity:.7}.wave:nth-of-type(3){bottom:-2em;animation:wave 30s -1s reverse infinite;opacity:.9}@keyframes wave{2%{transform:translate(1)}25%{transform:translate(-25%)}50%{transform:translate(-50%)}75%{transform:translate(-25%)}to{transform:translate(1)}}.full-center[data-v-b52831ed]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.loading-container[data-v-df891f94]{position:relative}.loading-spinner[data-v-df891f94]{width:100%;height:100%;border-radius:50%;animation:spin-df891f94 1s linear infinite}@keyframes spin-df891f94{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.modal-overlay[data-v-d30d0309]{position:fixed;top:0;left:0;right:0;bottom:0;background:#0000004d;display:flex;justify-content:center;align-items:center;z-index:100}.modal[data-v-d30d0309]{background:var(--color-while);padding:2rem;border-radius:5px;width:25rem}h2[data-v-9cf8577d]{width:100%;text-align:center;font-size:1rem}form[data-v-9cf8577d]{display:flex;flex-direction:column}input[data-v-9cf8577d],select[data-v-9cf8577d],button[data-v-9cf8577d]{width:100%;padding:.5rem;margin-bottom:.25rem;font-size:.8rem}label[data-v-9cf8577d]{font-size:.7rem;color:#555}/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */.xterm{cursor:text;position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;right:0;left:0;top:0;bottom:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{-webkit-user-select:text;user-select:text;white-space:pre}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{text-decoration:double underline}.xterm-underline-3{text-decoration:wavy underline}.xterm-underline-4{text-decoration:dotted underline}.xterm-underline-5{text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{text-decoration:overline double underline}.xterm-overline.xterm-underline-3{text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}.operation-panel[data-v-24ef52ce]{position:fixed;right:0;top:0;width:calc(100% - 20rem);height:100%;z-index:10;overflow:auto;background-color:#002b36;color:var(--color-bg)}.terminal-container[data-v-24ef52ce]{box-shadow:#ededed0d 0 2px 4px inset;padding:.5rem;width:100%;height:calc(100% - 3rem);box-sizing:border-box}.small-button[data-v-24ef52ce]{border:1px solid var(--color-main);color:var(--color-main);background:transparent}.fade-width-enter-active[data-v-79459acb],.fade-width-leave-active[data-v-79459acb]{transition:opacity .25s ease-in-out}.fade-width-enter-from[data-v-79459acb],.fade-width-leave-to[data-v-79459acb]{opacity:0;width:0}.node-list-container[data-v-0ecba4d7]{position:fixed;left:0;top:0;height:100%;width:20rem;z-index:2;background:var(--color-bg)}.node-list[data-v-0ecba4d7]{display:flex;flex-direction:column;justify-content:space-between;border-right:1px solid var(--color-sub);height:100%;width:20rem}.header-title[data-v-0ecba4d7]{font-size:.9rem;flex-shrink:0;color:var(--color-font-1)}.nodes[data-v-0ecba4d7]{list-style:none;padding:.5rem .25rem;height:calc(100% - 6rem);overflow:auto;box-shadow:#0000000f 0 2px 4px inset}.node[data-v-0ecba4d7]{position:relative;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:.5rem;padding:.5rem;cursor:pointer;border-radius:4px;border:1px solid var(--color-sub)}.node[data-v-0ecba4d7]:hover{background-color:var(--color-sub);border:1px solid var(--color-main)}.node-info[data-v-0ecba4d7]{display:flex;align-items:center}.node-info>input[data-v-0ecba4d7]{min-width:0;width:1rem;flex-shrink:0;cursor:pointer;margin-right:.15rem}.node-info-name[data-v-0ecba4d7]{width:100%;white-space:nowrap;font-size:clamp(.6rem,.9rem,1rem);overflow:hidden;color:var(--color-font-2)}.node-actions[data-v-0ecba4d7]{display:none;position:absolute;right:.5rem;bottom:.5rem;opacity:0;transition:opacity .5s ease-in;background-color:var(--color-sub)}.node:hover .node-actions[data-v-0ecba4d7]{display:flex;width:auto;opacity:1;gap:.35rem}.selected[data-v-0ecba4d7]{color:var(--color-green)}.setting-icon[data-v-0ecba4d7]{width:1.5rem;height:1.5rem}.ssh-active[data-v-0ecba4d7]{background-color:var(--color-sub)}.footer-title[data-v-0ecba4d7]{font-weight:lighter;color:var(--color-font-3)}[data-v-0ecba4d7]{overflow:hidden}button[data-v-c5f34feb]{display:flex;justify-content:center;align-items:center}.operation-panel[data-v-8801a8b2]{position:fixed;right:0;top:0;height:100%;width:calc(100% - 20rem);z-index:2;overflow:auto;background-color:var(--color-bg)}.shortcuts[data-v-8801a8b2]{margin:.5rem 0;flex-wrap:no-wrap;justify-content:left}.shortcuts-note[data-v-8801a8b2]{font-size:.85rem;color:var(--color-font-1)}.shortcut[data-v-8801a8b2]{flex-shrink:0;width:auto;transition:all .2s ease-in-out}.shortcut-input[data-v-8801a8b2]{margin:.5rem 0;line-height:1.5rem}.delete-icon[data-v-8801a8b2]{cursor:pointer;width:.65rem;height:.65rem}.command-container[data-v-8801a8b2]{padding:.5rem}.command-input[data-v-8801a8b2]{width:100%;height:100px;padding:10px;background-color:var(--color-background-3);font-size:.8rem}.execute-button[data-v-8801a8b2]{font-size:.8rem}.results[data-v-8801a8b2]{margin:0;padding:0;margin-top:.5rem;list-style:none}.text-line[data-v-8801a8b2]{font-size:.8rem}.full-center[data-v-8801a8b2]{display:flex;align-items:center;justify-content:center;width:calc(100% - 20rem);height:100%}.success[data-v-8801a8b2]{font-weight:700;color:var(--color-green)}.failed[data-v-8801a8b2]{font-weight:700;color:var(--color-red)}.result[data-v-8801a8b2]{padding:.5rem;background-color:var(--color-background-3);border-radius:5px;border:1px solid #ddd;margin-bottom:.5rem;font-size:.85rem}.output-block[data-v-8801a8b2]{margin:.5rem 0;position:relative;background-color:#f4f4f4;border-radius:5px;overflow-x:auto}.output-block pre[data-v-8801a8b2]{margin:0;white-space:pre-wrap;word-wrap:break-word;padding:.75rem 0 .75rem 1rem}.output-block code[data-v-8801a8b2]{display:block;font-family:monospace;font-size:.8rem;line-height:1}.output-block[data-v-8801a8b2]:before{content:"";position:absolute;left:0;top:0;width:.5rem;height:100%;background-color:#e0e0e0;border-right:1px solid #ccc}.error-block[data-v-8801a8b2]:before{background-color:var(--color-orange)}.copy-button[data-v-8801a8b2]{margin:0;padding:0;width:auto;min-width:.5rem;background:transparent;padding:.15rem .25rem;position:absolute;top:.5rem;right:.5rem;border-radius:3px;cursor:pointer;font-size:.75rem}.container{position:fixed;top:0;left:0;height:100%;width:100%;display:flex}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
